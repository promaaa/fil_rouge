<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Faucheuse guid√©e par GPS RTK</title>
  <style>
    body {
      font-family: "Helvetica", Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      background-color: #fafafa;
      color: #222;
      line-height: 1.6;
      padding: 20px;
    }

    h1 {
      color: #210dfd8b;
      border-bottom: 2px solid #ce510dff;
      padding-bottom: 0.2em;
    }

    h2 {
      color: #333;
      margin-top: 1.5em;
    }

    ul, ol {
      margin-left: 1.5em;
    }

    /* Sous-listes dans les √©tapes */
    ol > li ul {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    ol > li strong {
      color: #444;
      display: block;
      margin-bottom: 0.3em;
    }

    .section {
      margin-bottom: 2em;
      background: #fff;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    /* Styliser le titre principal de chaque √©tape : encadr√© gris et police un peu plus grande
       Cibl√© uniquement dans la section √âtapes (classe .steps) pour √©viter d'impacter d'autres <strong>. */
    .section.steps > ol > li > strong:first-child {
      display: block;
      background: #f3f3f3; /* gris tr√®s clair */
      color: #222;
      padding: 0.45rem 0.6rem;
      border: 1px solid #d6d6d6;
      border-radius: 6px;
      font-size: 1.06em; /* l√©g√®rement plus grand */
      margin-bottom: 0.45rem;
    }

    /* Mat√©riaux: rendre les sous-items gris√©s et en police plus petite */
    .section.materials ul ul {
      color: #666;
      font-size: 0.9em;
      margin-top: 0.35em;
    }

    /* (Step title framed styles were removed per user request to revert) */

    .step-images {
      margin: 1em 0;
      display: grid;
      gap: 0.6rem;
    }

  /* Layout for image boxes: adjust columns based on count via classes .count-N */
  .step-images.count-1 { grid-template-columns: 1fr; }
  .step-images.count-2 { grid-template-columns: repeat(2, 1fr); }
  .step-images.count-3 { grid-template-columns: repeat(3, 1fr); }
  /* For 4 or more images, use 2 columns thumbnail layout for a more harmonious small-preview look */
  .step-images.count-4,
  .step-images.count-5,
  .step-images.count-6,
  .step-images.count-7,
  .step-images.count-8,
  .step-images.count-9,
  .step-images.count-10 { grid-template-columns: repeat(2, 1fr); }

    /* container box around the whole set of images for the step */
    .step-images {
      margin: 1em 0;
      display: grid;
      gap: 0.6rem;
      background: #fafafa; /* subtle gray background */
      border: 1px solid #e6e6e6;
      padding: 0.6rem;
      border-radius: 8px;
    }

    figure {
      margin: 0;
      text-align: center;
      background: transparent;
      padding: 0.25rem 0;
      border-radius: 6px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Thumbnails: show the whole image (no cropping). Use contain with max dims so
       small images display fully while larger images are constrained. Center them. */
    .step-images figure img {
      width: auto;
      max-width: 100%;
      max-height: 160px; /* control thumbnail height but do not crop */
      object-fit: contain; /* show full image */
      background: #f5f5f5; /* subtle neutral background for small images */
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      cursor: zoom-in;
      display: block;
      margin: 0 auto; /* center narrower images */
    }
    /* Single-image steps: let the image take available width while preserving aspect */
    .step-images.count-1 figure img {
      width: 100%;
      height: auto;
      object-fit: contain;
      max-height: none;
    }

    /* Hide figcaptions in thumbnail/grid mode; captions are shown in the lightbox */
    .step-images figure figcaption { display: none; }

    figcaption {
      font-size: 0.9em;
      color: #666;
      margin-top: 0.5em;
      font-style: italic;
    }
    

    /* Lightbox overlay */
    .lightbox-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.75);
      z-index: 9999;
      padding: 1rem;
    }
    .lightbox-overlay.active { display: flex; }
    .lightbox-content {
      max-width: 95%;
      max-height: 95%;
      text-align: center;
    }
    .lightbox-content img {
      max-width: 100%;
      max-height: 80vh;
      border-radius: 6px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    }
    .lightbox-caption { color: #fff; margin-top: 0.6rem; font-size: 0.95em; }
    .lightbox-close {
      position: absolute; top: 12px; right: 16px; color: #fff; background: transparent;
      border: none; font-size: 1.6rem; cursor: pointer;
    }

    footer {
      margin-top: 2em;
      font-size: 0.9em;
      color: #666;
      border-top: 1px solid #ddd;
      padding-top: 1em;
    }

    /* Style impression PDF */
    @media print {
      body { background: white; color: black; }
      a { color: black; text-decoration: none; }
      .section { box-shadow: none; border: 1px solid #ccc; }
    }
  </style>
</head>
<body>

  <header>
    <h1>Faucheuse guid√©e par GPS RTK</h1>
    
      <div style="text-align:center; margin-bottom:1.2em;">
        <img src="https://wikifab.org/images/thumb/0/00/Faucheuse_guid_e_par_GPS_RTK_IMG_20200106_155916.jpg/ia-ba6408da030bfa53aea73957984861b6-px-Faucheuse_guid_e_par_GPS_RTK_IMG_20200106_155916.jpg.png" alt="Image principale du tutoriel" style="max-width:100%; max-height:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08);">
        
          <div style="color:#666; font-size:0.97em; margin-top:0.4em; font-style:italic;">Cette faucheuse robot est capable de couper l'herbe de fa√ßon enti√®rement automatique sur un parcours d√©termin√© √† l'avance. Gr√¢ce au guidage par GPS RTK le parcours est reproduit √† chaque tonte avec une pr√©cision meilleure que 10 centim√®tres.</div>
        
      </div>
    
    
      
        <p>On va d√©crire ici une faucheuse robot capable de couper l'herbe de fa√ßon enti√®rement automatique sur un parcours d√©termin√© √† l'avance. Gr√¢ce au guidage par GPS RTK le parcours est reproduit √† chaque tonte avec une pr√©cision meilleure que 10 centim√®tres (mon exp√©rience) . Le pilotage est bas√© sur une carte Aduino Mega, compl√©t√©e par quelques shields de commande moteurs, d'acc√©l√©rom√®tres et boussole ainsi que d'une carte m√©moire.</p>
      
        <p>C'est une r√©alisation non professionnelle, mais qui m'a permis de me rendre compte des probl√®mes rencontr√©s en robotique agricole. Cette toute jeune discipline est en train de se d√©velopper rapidement, aiguillonn√©e par les nouvelles lois sur la r√©duction des d√©sherbants et pesticides. Voici par exemple un lien vers le dernier salon de robotique agricole de Toulouse (https://www.fira-agtech.com/). Certaines entreprises comme Naio technologies fabriquent d√©j√† des robots op√©rationnels (https://www.naio-technologies.com/).</p>
      
        <p>En comparaison, ma r√©alisation est bien modeste mais elle permet tout de m√™me de comprendre l'int√©r√™t et les d√©fis de fa√ßon ludique.</p>
      
        <p>....Et puis elle fonctionne vraiment ! ...... et peut donc √™tre utilis√©e pour couper l'herbe autour de sa maison, tout en pr√©servant son temps libre...</p>
      
        <p>M√™me si je ne d√©cris pas la r√©alisation jusque dans les derniers d√©tails, les indications que je donne sont pr√©cieuses pour celui qui voudrait se lancer. N'h√©sitez pas √† poser des questions ou √† faire des suggestions, ce qui me permettra de compl√©ter ma pr√©sentation au b√©n√©fice de tous.</p>
      
        <p>Je serais vraiment ravi que ce type de projet puisse donner le go√ªt de l'ing√©nierie √† des bien plus jeunes que moi.... afin d'√™tre pr√™ts pour la grande robolution qui nous attend....</p>
      
        <p>D'ailleurs ce type de projet conviendrait parfaitement √† un groupe de jeunes motiv√©s dans un club ou un fablab, pour s'exercer √† travailler en groupe projet, avec architectes m√©canique, √©lectrique, software chapeaut√©s par un ing√©nieur syst√®me, comme dans l'industrie.</p>
      
        <p>La video d'introduction:</p>
      
        <p>Dans la premi√®re partie, on voit la machine se d√©placer en ligne droite entre deux points du fichier de fauchage. Les in√©galit√©s de terrain obligent √† de petites corrections de trajectoire. Au bout de la ligne droite, deux types de virages sont possibles: autour du centre de rotation situ√© au milieu des deux roues arri√®re ou bien autour d'une roue de fa√ßon √† r√©aliser des bandes de fauchage contigu√´s. Bien que tournant √† 1200 tr/min, les 3 lames de cutter des disques de coupe sont bien visibles gr√¢ce √† l'effet stroboscopique.</p>
      
    
    
    <p style="color: #666; font-size: 0.95em;">
      <strong>Difficult√© :</strong> Hard Difficile &nbsp;&nbsp; 
      <strong>Dur√©e :</strong> 12 month(s) mois &nbsp;&nbsp; 
      <strong>Co√ªt :</strong> 750 EUR (‚Ç¨)
    </p>
    
    <p style="font-size:0.95em; color:#066; margin-top:0.2em;">
      <strong>Lien du tutoriel de base :</strong>
      <a href="https://wikifab.org/wiki/Faucheuse_guid√©e_par_GPS_RTK" target="_blank" rel="noopener" style="color:#066;">https://wikifab.org/wiki/Faucheuse_guid√©e_par_GPS_RTK</a>
    </p>
    
    
  </header>

  <div class="section materials">
    <h2>üõ†Ô∏è Mat√©riaux</h2>
    
      <p><em>Non sp√©cifi√©</em></p>
    
  </div>

  <div class="section">
    <h2>üîß Outils</h2>
    
      <p><em>Non sp√©cifi√©</em></p>
    
  </div>

  <div class="section steps">
    <h2> √âtapes</h2>
    
      <ol>
        
          <li>
            
            
              <strong>1. √âtape 1 - Les objectifs</strong><p><strong>√âtapes :</strong></p><ol><li>Le but est de fabriquer un prototype op√©rationnel de faucheuse capable de faucher l'herbe de mani√®re autonome sur des terrains pouvant comporter des irr√©gularit√©s importantes (pr√©s plut√¥t que pelouses).</li><li>Le confinement dans le champ ne peut pas √™tre bas√© sur une limitation par barri√®re physique ou par fil guide enterr√© comme pour les robots de tonte pour les pelouses. Les champs √† faucher sont en effet variables et de surface importante.</li><li>Pour la barre de coupe, l'objectif est de maintenir la pousse de l'herbe √† une certaine hauteur apr√®s une premi√®re tonte ou d√©broussaillage obtenus par un autre moyen.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>2. √âtape 2 - Pr√©sentation g√©n√©rale</strong><div class='step-images count-3'><figure><img src='https://wikifab.org/images/thumb/d/dd/Faucheuse_guid_e_par_GPS_RTK_VueGenerale_1.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_VueGenerale_1.jpg' alt='Faucheuse guid e par GPS RTK VueGenerale 1.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/2/21/Faucheuse_guid_e_par_GPS_RTK_VueGenerale_3.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_VueGenerale_3.jpg' alt='Faucheuse guid e par GPS RTK VueGenerale 3.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/9/90/Faucheuse_guid_e_par_GPS_RTK_Base.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Base.jpg' alt='Faucheuse guid e par GPS RTK Base.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Le syst√®me se compose d'un robot mobile et d'une base fixe.</li><li>Sur le robot mobile on trouve:</li><li>- Le tableau de bord</li><li>- Le bo√Ætier de commande g√©n√©ral incluant une carte m√©moire.</li><li>- la manette de commande manuelle</li><li>- Le GPS configur√© en "rover" ainsi que le r√©cepteur de corrections RTK</li><li>- 3 roues motoris√©es</li><li>- Les moteurs √† galets des roues</li><li>- la barre de coupe constitu√©e de 4 disques tournants portant chacun 3 lames de cutter en p√©riph√©rie (largeur de coupe de 1 m√®tre)</li><li>- le bo√Ætier de gestion de la barre de coupe</li><li>- les batteries</li><li>Dans la base fixe on trouve le GPS configur√© en "base" ainsi que l'√©metteur des corrections RTK. On note que l'antenne est plac√©e en hauteur de fa√ßon √† rayonner sur quelques centaines de m√®tres autour de la maison. De plus, l'antenne GPS est en vue de tout le ciel sans aucune occultation par des b√¢timents ou par de la v√©g√©tation.</li><li>Les modes Rover et base des GPS seront d√©crits et expliqu√©s dans la partei GPS.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>3. √âtape 3 - Mode d'emploi ( 1/4 )</strong><div class='step-images count-2'><figure><img src='https://wikifab.org/images/thumb/4/43/Faucheuse_guid_e_par_GPS_RTK_TableauDeBord.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_TableauDeBord.jpg' alt='Faucheuse guid e par GPS RTK TableauDeBord.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/c/cf/Faucheuse_guid_e_par_GPS_RTK_manette_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_manette_.jpg' alt='Faucheuse guid e par GPS RTK manette .jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Je propose de prendre connaissance du robot √† travers son mode d'emploi qui fait bien appara√Ætre toutes ses fonctionnalit√©s.</li><li>Description du tableau de bord:</li><li>- Un interrupteur g√©n√©ral</li><li>- un premier s√©lecteur √† 3 positions permet de s√©lectionner les modes de fonctionnement: mode d√©placement manuel, mode enregistrement de parcours, mode fauchage</li><li>- Un bouton poussoir sert de marqueur. On verra ses utilisations.</li><li>- Deux autres s√©lecteurs √† 3 positions servent √† s√©lectionner un num√©ro de fichier parmi 9. On dispose donc de 9 fichiers de fauchage ou d'enregistrements de parcours pour 9 champs diff√©rents.</li><li>- Un s√©lecteur √† 3 positions est d√©di√© √† la commande de la barre de coupe. Une position OFF, une position ON, une position commande programm√©e.</li><li>- Afficheur deux lignes</li><li>- un s√©lecteur 3 positions pour d√©finir 3 affichages diff√©rents</li><li>- une LED qui indique l'√©tat du GPS. LED √©teinte, pas de GPS. LED clignotante lentement, GPS sans corrections RTK. LED clignotante rapide, corrections RTK re√ßues. LED allum√©e, verrouillage GPS sur la plus grande pr√©cision.</li><li>Enfin, la manette de commande manuelle est munie de deux s√©lecteurs √† 3 positions. Celui de gauche commande la roue gauche, celui de droite commande la roue droite.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>4. √âtape 4 - Mode d'emploi ( 2 /4 )</strong><p><strong>√âtapes :</strong></p><ol><li>Mode pilotage manuel (GPS non n√©cessaire)</li><li>Apr√®s mise ON et s√©lection de ce mode avec le s√©lecteur de mode, le pilotage de la machine se fait avec la manette de commande.</li><li>Les deux s√©lecteurs √† 3 positions ont un ressort de rappel qui les ram√®ne toujours en position milieu, correspondant √† l'arr√™t des roues.</li><li>Quand on pousse les leviers de gauche et de droite vers l'avant les deux roues arri√®re tournent et la machine va tout droit.</li><li>Quand on tire les deux leviers en arri√®re, la machine recule tout droit.</li><li>Quand on pousse un levier vers l'avant, la machine tourne autour de la roue arr√™t√©e.</li><li>Quand on pousse un levier vers l'avant et l'autre vers l'arri√®re, la machine tourne autour d'elle-m√™me, en un point situ√© au milieu de l'axe joignant les roues arri√®re.</li><li>La motorisation de la roue avant s'ajuste automatiquement en fonction des deux commandes pass√©es sur les deux roues arri√®re.</li><li>Enfin, dans le mode manuel on peut √©galement faucher de l'herbe. Pour cela, apr√®s avoir v√©rifi√© que personne ne se trouve √† proximit√© des disques de coupe, on met ON le bo√Ætier de gestion de la barre de coupe (interrupteur "hard" pour la s√©curit√©). On place ensuite le s√©lecteur de coupe du tableau de bord sur ON. A cet instant les 4 disques de la barre de coupe se mettent en rotation.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>5. √âtape 5 - Mode d'emploi ( 3/4 )</strong><div class='step-images count-1'><figure><img src='https://wikifab.org/images/thumb/8/8e/Faucheuse_guid_e_par_GPS_RTK_enregistrement.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_enregistrement.jpg' alt='Faucheuse guid e par GPS RTK enregistrement.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Mode enregistrement de parcours (GPS n√©cessaire)</li><li>- Avant de commencer √† enregistrer un parcours, on d√©finit arbitrairement un point de r√©f√©rence pour le champ et on le marque par un petit piquet. Ce point sera l'origine des coordonn√©es dans le rep√®re g√©ographique (photo)</li><li>- On s√©lectionne ensuite le num√©ro de fichier dans lequel le parcours va √™tre enregistr√©, gr√¢ce aux deux s√©lecteurs du tableau de bord.</li><li>- On met la base ON</li><li>- On v√©rifie alors que la LED d'√©tat GPS se met √† clignoter rapidement.</li><li>- On quitte le mode manuel en pla√ßant le s√©lecteur de mode du tableau de bord sur la position enregistrement.</li><li>- On am√®ne alors la machine manuellement √† la position du point de r√©f√©rence. Pr√©cis√©ment c'est l'antenne GPS qui doit se trouver au dessus de ce rep√®re. Cette antenne GPS est situ√©e au dessus du point centr√© entre les deux roues arri√®re et qui est le point de rotation de la machine sur elle-m√™me.</li><li>- On attend que la LED donnant le statut du GPS soit maintenant allum√©e sans clignotement. Cela indique que le GPS est √† sa pr√©cision maximum ("Fix" GPS).</li><li>- On marque la position origine 0,0 en appuyant sur le BP marqueur du tableau de bord.</li><li>- On se dirige alors vers le point suivant que l'on veut cartographier. D√®s qu'il est atteint, on le signale √† l'aide du marqueur.</li><li>- Pour mettre fin √† l'enregistrement on repasse en mode manuel.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>6. √âtape 6 - Mode d'emploi ( 4/4 )</strong><div class='step-images count-1'><figure><img src='https://wikifab.org/images/thumb/2/23/Faucheuse_guid_e_par_GPS_RTK_fauchage.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_fauchage.jpg' alt='Faucheuse guid e par GPS RTK fauchage.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Mode fauchage (GPS n√©cessaire)</li><li>Il faut d'abord pr√©parer le fichier de points que la machine doit parcourir pour faucher tout le champ sans laisser de surface non coup√©e. Pour cela on r√©cup√®re le fichier enregistr√© dans la carte m√©moire et √† partir de ces coordonn√©es, √† l'aide par exemple d'Excel, on g√©n√®re une liste de points comme sur la photo. Pour chacun des points √† atteindre on indique si la barre de coupe est ON ou OFF. Comme c'est la barre de coupe qui consomme le plus de puissance (de 50 √† 100 Watts suivant l'herbe), il faut veiller √† couper la barre de coupe lors de la travers√©e d'un champ d√©j√† fauch√© par exemple.</li><li>La carte de fauchage √©tant g√©n√©r√©e, on remet la carte m√©moire sur son shield dans le tiroir de commande.</li><li>Il ne reste plus alors que mettre ON la base et se rendre sur le champ √† faucher, juste au dessus du rep√®re de r√©f√©rence. On met ensuite le s√©lecteur de mode sur "Fauchage".</li><li>A ce moment la machine attendra toute seule le verrouillage GPS RTK en "Fix" pour faire une mise √† z√©ro des coordonn√©es et commencer √† faucher.</li><li>Lorsque le fauchage sera termin√©, elle reviendra seule au point de d√©part, avec une pr√©cision d'une dizaine de centim√®tres.</li><li>Pendant le fauchage, la machine se d√©place en ligne droite entre deux points cons√©cutifs du fichier de points. La largeur de coupe est de 1,1 m√®tre. Comme la machine a une largeur entre roues de 1 m√®tre et peut tourner autour d'une roue (voir video), il est possible de faire des bandes de fauchage contigu√´s. C'est d'une grande efficacit√© !</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>7. √âtape 7 - Partie m√©canique</strong><div class='step-images count-4'><figure><img src='https://wikifab.org/images/thumb/f/f5/Faucheuse_guid_e_par_GPS_RTK_illustration.png/800px-Faucheuse_guid_e_par_GPS_RTK_illustration.png' alt='Faucheuse guid e par GPS RTK illustration.png' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/3/3a/Faucheuse_guid_e_par_GPS_RTK_RoueAvant.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RoueAvant.jpg' alt='Faucheuse guid e par GPS RTK RoueAvant.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/c/c1/Faucheuse_guid_e_par_GPS_RTK_MoteurGalet.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_MoteurGalet.jpg' alt='Faucheuse guid e par GPS RTK MoteurGalet.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/9/9b/Faucheuse_guid_e_par_GPS_RTK_MoteurGalet_.png/800px-Faucheuse_guid_e_par_GPS_RTK_MoteurGalet_.png' alt='Faucheuse guid e par GPS RTK MoteurGalet .png' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>La structure du robot</li><li>Le robot est construit autour d'une structure en treillis de tubes d'aluminium, ce qui lui conf√®re une bonne rigidit√©. Ses dimensions sont environ de 1.20 m√®tre de long, 1 m√®tre de large et 80 cm de haut.</li><li>Les roues</li><li>Elle peut se d√©placer gr√¢ce √† 3 roues de v√©lo enfant de diam√®tre 20 pouces: Deux roues arri√®re et une roue avant semblable √† la roulette des chariots de supermarch√© (photos 1 et 2). C'est le mouvement relatif des deux roues arri√®re qui assure son orientation.</li><li>Les moteurs √† galet</li><li>A cause des irr√©gularit√©s de terrain, il est n√©cessaire de disposer de couples importants et donc d'un grand rapport de r√©duction. Dans ce but j'ai utilis√© le principe de galet appuyant sur la roue, comme sur un solex (photos 3 et 4). La r√©duction importante permet de garder la machine stable dans une pente, m√™me lorsque l'on coupe l'alimentation des moteurs. En contrepartie, la machine avance lentement (3 m√®tres / minute)...mais l'herbe pousse lentement....</li><li>On peut noter que les 3 roues sont motoris√©es avec des moteurs √† galet. La motorisation de la roue avant permet d'√©viter le blocage de cette roue directrice lorsqu'elle tombe dans un creux important.</li><li>Pour la conception m√©canique j'ai utilis√© le logiciel de dessin OpenScad (logiciel √† scripts tr√®s efficace). En parall√®le pour les plans de d√©tail j'ai utilis√© Drawing de OpenOffice.</li><li>Enfin voici la liste de sites o√π les diff√©rents √©l√©ments m√©caniques ont √©t√© achet√©s:</li><li>Faucheuse_guid_e_par_GPS_RTK_ListeMeca.pdf</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>8. √âtape 8 - Le GPS RTK (1/3)</strong><div class='step-images count-2'><figure><img src='https://wikifab.org/images/thumb/6/62/Faucheuse_guid_e_par_GPS_RTK_RTKpage3.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RTKpage3.jpg' alt='Faucheuse guid e par GPS RTK RTKpage3.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/0/0e/Faucheuse_guid_e_par_GPS_RTK_RTKpage9.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RTKpage9.jpg' alt='Faucheuse guid e par GPS RTK RTKpage9.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>GPS simple</li><li>Le GPS simple (photo 1), celui qui est dans notre voiture n'a une pr√©cision que de quelques m√®tres. Si on enregistre la position indiqu√©e par un tel GPS maintenu fixe pendant une heure par exemple, on va observer des fluctuations de plusieurs m√®tres. Ces fluctuations sont dues √† des perturbations de l'atmosph√®re et de la ionosph√®re, mais aussi √† des erreurs d'horloge des satellites et des erreurs de meure du GPS lui-m√™me. Il ne convient donc pas pour notre application.</li><li>GPS RTK</li><li>Afin d'am√©liorer cette pr√©cision, on utilise deux GPS situ√©s √† une distance inf√©rieure √† 10 Km (photo 2). Dans ces conditions, on peut consid√©rer que les perturbations de l'atmosph√®re et de la ionosph√®re sont identiques sur chaque GPS. Ainsi la diff√©rence de position entre les deux GPS n'est plus perturb√©e (diff√©rentiel). Si maintenant on fixe un des GPS (la base) et si on place l'autre sur un v√©hicule (le rover), on obtiendra pr√©cis√©ment le d√©placement du v√©hicule par rapport √† la base sans perturbations. De plus ces GPS effectuent une mesure de temps de vol beaucoup plus pr√©sise que les GPS simples (mesures de phase sur la porteuse).</li><li>Gr√¢ce √† ces am√©liorations, on obtiendra une pr√©cision de mesure centim√©trique pour le d√©placement du rover par rapport √† la base.</li><li>C'est ce syst√®me RTK (Real Time Kinematic) que nous avons choisi d'utiliser.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>9. √âtape 9 - Le GPS RTK (2/3)</strong><div class='step-images count-1'><figure><img src='https://wikifab.org/images/e/e4/Faucheuse_guid_e_par_GPS_RTK_GPS_RTK.jpg' alt='Faucheuse guid e par GPS RTK GPS RTK.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>J'ai achet√© 2 circuits GPS RTK (photo 1) √† la soci√©t√© Navspark.</li><li>Ces circuits sont mont√©s sur un petit circuit imprim√© √©quip√© de broches au pas de 2.54 mm qui se monte donc directement sur les plaques d'essai.</li><li>Comme le projet est localis√© dans le sud-ouest de la France, j'ai choisi des circuits travaillant avec les constellations de satellites am√©ricains GPS ainsi que la constellation russe Glonass.</li><li>Il est important d'avoir le maximum de satellites afin de b√©n√©ficier de la meilleure pr√©cision. Dans mon cas, j'ai couramment entre 10 et 16 satellites.</li><li>On doit √©galement acheter</li><li>- 2 adaptateurs USB, n√©cessaire pour relier le circuit GPS √† un PC (tests et configuration)</li><li>- 2 antennes GPS + 2 c√¢bles adaptateurs</li><li>- une paire d'emetteurs-r√©cepteurs 3DR afin que la base puisse √©mettre ses corrections vers le rover et le rover les recevoir.</li><li>Ci-joint la liste des achats avec des liens internet vers les revendeurs:</li><li>Faucheuse_guid_e_par_GPS_RTK_Liste_GPS.pdf</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>10. √âtape 10 - Le GPS RTK (3/3)</strong><p><strong>√âtapes :</strong></p><ol><li>La notice du GPS que l'on trouve sur le site de Navspark permet de mettre en ≈ìuvre progressivement les circuits.</li><li>http://navspark.mybigcommerce.com/content/NS-HP-GL-User-Guide.pdf</li><li>Sur le site de Navspark on trouvera √©galement</li><li>- le logiciel √† installer sur son PC Windows pour visualiser les sorties des GPS et programmer les circuits en base et en rover.</li><li>- Une description du format des donn√©es GPS (phrases NMEA)</li><li>Tous ces documents sont en anglais mais ils sont relativement faciles √† comprendre. Dans un premier temps, la mise en ≈ìuvre se fait sans le moindre circuit √©lectronique gr√¢ce aux adaptateurs USB qui fournissent √©galement toutes les alimentations √©lectriques.</li><li>La progression est la suivante:</li><li>- Test des circuits individuellement qui fonctionnent comme des GPS simples. La visualisation en nuage de ponts montre une stabilit√© de quelques m√®tres.</li><li>- Programmation d'un circuit en ROVER et l'autre en BASE</li><li>- Constitution d'un syst√®me RTK en reliant les deux modules par un simple fil. La visualisation en nuage de ponts montre une stabilit√© relative ROVER/BASE de quelques centim√®tres !</li><li>- Remplacement du fil liant BASE et ROVER par les √©metteurs-r√©cepteurs 3DR. L√† encore le fonctionnement en RTK permet une stabilit√© de quelques centim√®tres. Mais cette fois BASE et ROVER ne sont plus reli√©s par un lien physique.....</li><li>- Remplacement de la visualisation PC par une carte Arduino programm√©e pour recevoir les donn√©es GPS sur une entr√©e s√©rie... (voir plus bas)</li><li>Nota: Sur les photos fournies √† l'√©tape 2 on voit que le GPS du rover se trouve au sommet d'un m√¢t. C'est une pr√©caution que j'avais prise pour √©viter les effets d'√©cran de mon corps pr√®s de la machine lors de la mise au point. En fait, cette pr√©caution n'est plus utile lorsque la mise au point est termin√©e et que le rover √©volue seul sans pr√©sence humaine autour.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>11. √âtape 11 - La boussole (1/3)</strong><div class='step-images count-2'><figure><img src='https://wikifab.org/images/thumb/f/fb/Faucheuse_guid_e_par_GPS_RTK_IllustrationBesoinBoussole.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_IllustrationBesoinBoussole.jpg' alt='Faucheuse guid e par GPS RTK IllustrationBesoinBoussole.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/2/20/Faucheuse_guid_e_par_GPS_RTK_BoussoleOrientation.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_BoussoleOrientation.jpg' alt='Faucheuse guid e par GPS RTK BoussoleOrientation.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Un GPS ne donne que sa propre position dans le rep√®re g√©ographique sans aucune indication de direction. Cela ne suffit pas pour se diriger efficacement vers un autre point √† atteindre, comme le sugg√®re la figure 1.</li><li>L'id√©e qui vient naturellement est d'adjoindre une boussole √† ce GPS. Dans ce cas il sera n√©cessaire de caler l'indication de la boussole avec le rep√®re g√©ographique.</li><li>Comme le montre √©galement la figure 1, on peut aussi remplacer la boussole par un GPS additionnel. Dans ce cas la diff√©rence de position entre les deux GPS permet de calculer directement l'orientation par rapport au rep√®re g√©ographique, sans soucis de recalage de rep√®res. Je n'ai pas choisi cette solution par souci d'√©conomie.</li><li>La boussole que j‚Äôai utilis√©e est la CMPS11. Actuellement ce mod√®le est remplac√© par la CMPS12, bas√©e sur un circuit BNO055, qui est tr√®s proche. cmps12.pdf (robot-electronics.co.uk)</li><li>J‚Äôai mont√© cette boussole sur ma machine en orientant vers l‚Äôavant la direction ¬´ HEADING ¬ª fournie par la documentation. La figure 2 montre alors comment est la lecture de la boussole en fonction de l‚Äôorientation de la machine. Le Nord est le nord magn√©tique, celui indiqu√© par une boussole √† aiguille magn√©tique.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>12. √âtape 12 - La boussole (2/3)</strong><div class='step-images count-1'><figure><img src='https://wikifab.org/images/thumb/a/ae/Faucheuse_guid_e_par_GPS_RTK_IllustrationsBousssole_2.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_IllustrationsBousssole_2.jpg' alt='Faucheuse guid e par GPS RTK IllustrationsBousssole 2.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Pourquoi "caler" les indications de la boussole sur le rep√®re GPS ?</li><li>Le rep√®re dans lequel le GPS donne les positions est le rep√®re g√©ographique bas√© sur l'axe de rotation de la terre. Dans ce rep√®re, la direction +Y (figure 1) correspond au Nord g√©ographique. Un d√©placement le long de cet axe vers +Y correspond √† une augmentation pure de la latitude. De m√™me un d√©placement vers +X correspond √† une augmentation pure de la longitude Est.</li><li>En comparaison, la boussole indique le Nord magn√©tique qui est en g√©n√©ral d√©cal√© d'une valeur variable dans le temps, la d√©clinaison magn√©tique (D√©clinaison magn√©tique terrestre ‚Äî Wikip√©dia (wikipedia.org)). Actuellement cette diff√©rence entre Nord g√©ographique et Nord magn√©tique est de l'ordre du degr√©.</li><li>Actuellement, la boussole √©tant mont√©e avec HEADING vers l‚Äôavant, lorsque la machine se d√©place vers le Nord g√©ographique (+Y) on peut s‚Äôattendre √† une indication de la boussole proche de 0 ‚Äì 255.</li><li>En r√©alit√© il n‚Äôen est pas tout √† fait ainsi pour plusieurs raisons :</li><li>- Des offsets dus √† la d√©clinaison magn√©tique et √† l‚Äôerreur de calage en rotation de la boussole sur la machine.</li><li>- des variations plus ou moins cycliques sans doutes dues aux perturbations magn√©tiques des diff√©rents moteurs. (voir la suite).</li><li>C'est donc la raison pour laquelle il faut √©tablir exp√©rimentalement une relation entre les indications de la boussole et les directions dans le rep√®re du GPS.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>13. √âtape 13 - La boussole (3/3)</strong><div class='step-images count-3'><figure><img src='https://wikifab.org/images/thumb/f/f1/Faucheuse_guid_e_par_GPS_RTK_IllustrationsBoussole_3.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_IllustrationsBoussole_3.jpg' alt='Faucheuse guid e par GPS RTK IllustrationsBoussole 3.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/7/79/Faucheuse_guid_e_par_GPS_RTK_FonctionBoussole.bmp/800px-Faucheuse_guid_e_par_GPS_RTK_FonctionBoussole.bmp.png' alt='Faucheuse guid e par GPS RTK FonctionBoussole.bmp' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/6/6d/Faucheuse_guid_e_par_GPS_RTK_FonctionRotationRoue.bmp/800px-Faucheuse_guid_e_par_GPS_RTK_FonctionRotationRoue.bmp.png' alt='Faucheuse guid e par GPS RTK FonctionRotationRoue.bmp' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Comment "caler" les indications de la boussole sur le rep√®re GPS ?</li><li>On utilise pour cela le mode enregistrement de parcours (voir √©tape 5), en faisant se d√©placer la machine selon un certain nombre de rayons couvrant la totalit√© de l‚Äôazimut de 360¬∞. Des rep√®res au sol permettent de se guider afin d‚Äôassurer un pilotage manuel en ligne droite.</li><li>La figure 1 montre par exemple ce que j‚Äôai fait obtenu avec ma machine apr√®s fixation de la boussole dans sa position d√©finitive. Toutes les 3 seconde, sont enregistr√©es une valeur position GPS et une valeur boussole.</li><li>On peut alors simplement repr√©senter ces positions GPS traduites en m√®tres dans le rep√®re XY g√©ographique et en m√™me temps porter la valeur moyenne des valeurs boussole obtenues lors du parcours de chaque rayon.</li><li>Toutes ces valeurs peuvent √™tre √©crites selon deux colonnes:</li><li>- celle des angles calcul√©s dans le rep√®re XY pour atteindre un point choisi (par exemple 110.6)</li><li>- celle des indications boussole que l'on aura si la machine se dirige vers ce point (par exemple 230)</li><li>Il ne reste plus qu' √† trouver la fonction qui va nous faire passer des angles dans le rep√®re g√©ographique GPS aux indications de la boussole. C'est ce que r√©alise la fonction boussole (angle) dont le programme est donn√© sur la figure 2. Dans l'exemple donn√©, on peut v√©rifier que l'on retrouve bien les indications boussole √† mieux que 2 LSB<ul><li>La valeur but = boussole (angle) est ensuite utilis√©e par les fonctions de rotation de la machine (figure 3).</li></ul></li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>14. √âtape 14 - Principe de navigation avec GPS et boussole</strong><div class='step-images count-2'><figure><img src='https://wikifab.org/images/thumb/b/b3/Faucheuse_guid_e_par_GPS_RTK_PrincipeNavigation_3.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_PrincipeNavigation_3.jpg' alt='Faucheuse guid e par GPS RTK PrincipeNavigation 3.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/7/7e/Faucheuse_guid_e_par_GPS_RTK_RetourSurTrace.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RetourSurTrace.jpg' alt='Faucheuse guid e par GPS RTK RetourSurTrace.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Le d√©placement de la machine se fait de WP en WP selon des lignes droites.</li><li>Au d√©part d'un WP, la boussole indique la direction du prochain WP √† atteindre. Cependant, afin d'√©viter</li><li>- les erreurs de direction qui croissent avec la distance parcourue</li><li>- les d√©rives lat√©rales par glissement (en situation de d√©vers)</li><li>des points interm√©diaires situ√©s sur la droite joignant les deux WP sont calcul√©s. Ces points interm√©diaires sont situ√©s √† environ deux m√®tres √† l'avant de la machine, comme montr√© sur la figure 1.</li><li>Ensuite, √† chaque position courante de la machine P(x,y) on calcule l'angle (par rapport √† Xg√©o) n√©cessaire pour atteindre ce point interm√©diaire. On calcule √©galement l'indication de la boussole correspondant √† cet angle, but_boussole. C'est √† ce moment que sert la boussole "calibr√©e" par rapport au rep√®re g√©ographique. La machine tourne jusqu'√† ce que l'indication de la boussole soit √©gale √† but_boussole. Ainsi la machine pointera vers le point interm√©diare, quelle que soit l'orientation de d√©part de la machine.</li><li>Les calculs de ces points interm√©diaires et de l'angle de correction sont explicit√©s dans : Faucheuse_guid_e_par_GPS_RTK_PrincipeSuiviLigne_3.pdf</li><li>Ce principe de navigation donne de tr√®s bons r√©sultats. Lors de tests, j'ai d√©plac√© lat√©ralement la machine de 50 cm et j'ai pu constater qu'elle r√©agissait rapidement pour rallier la ligne des WP (voir figure 2).</li><li>Si la machine √©tait munie de capteurs de distance √† l'avant (ce n'est pas le cas actuellement) on pourrait facilement lui faire contourner un obstacle et revenir ensuite automatiquement sur la ligne des WP.</li><li>La simulation de la figure 2 montre cependant que les erreurs boussole se traduisent par des √©carts de position par rapport √† la ligne des WP.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>15. √âtape 15 - Proposition d'ajout d'un asservissement de position.</strong><div class='step-images count-5'><figure><img src='https://wikifab.org/images/thumb/a/a7/Faucheuse_guid_e_par_GPS_RTK_EffetOffsetBoussole_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_EffetOffsetBoussole_.jpg' alt='Faucheuse guid e par GPS RTK EffetOffsetBoussole .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/7/74/Faucheuse_guid_e_par_GPS_RTK_PrincipeAsservissement_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_PrincipeAsservissement_.jpg' alt='Faucheuse guid e par GPS RTK PrincipeAsservissement .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/d/d2/Faucheuse_guid_e_par_GPS_RTK_CalculPositionRobot_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_CalculPositionRobot_.jpg' alt='Faucheuse guid e par GPS RTK CalculPositionRobot .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/f/fa/Faucheuse_guid_e_par_GPS_RTK_Compensation_1_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Compensation_1_.jpg' alt='Faucheuse guid e par GPS RTK Compensation 1 .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/b/be/Faucheuse_guid_e_par_GPS_RTK_Compensation_2_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Compensation_2_.jpg' alt='Faucheuse guid e par GPS RTK Compensation 2 .jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Ce syst√®me n'est pas implant√© dans la machine actuelle. J'ai fait des simulations qui montrent que gr√¢ce √† cet asservissement PID (Correction Proportionnelle, Int√©grale et D√©riv√©e) on pourrait compenser les √©carts de position induits par les erreurs de la boussole (voir paragraphe pr√©c√©dent).</li><li>La figure 1, montre qu'une erreur boussole de l'ordre de 5¬∞ peut introduire une erreur de suivi de ligne de presque 9 cm. C'est dommage car on gaspille ainsi la pr√©cision du GPS pourtant proche de 2 cm.</li><li>La figure 2 explique un principe d'asservissement de position PID qui permettrait de verrouiller le robot sur la ligne des WP, m√™me en cas d'impr√©cision de la boussole ou d‚Äô√©volution dans le temps de son calage (masses magn√©tiques, champ magn√©tique moteurs).</li><li>La figure 3 explique le calcul de l‚Äôerreur de position ¬´ d ¬ª du robot n√©cessaire au calcul de la correction.</li><li>La figure 4 montre la simulation de cette correction avec ce principe d'asservissement. Une simple correction Proportionnelle et Int√©grale ram√®ne les erreurs au niveau de celles du GPS.</li><li>En conclusion, en combinant un asservissement angulaire avec la boussole et un asservissement de position par rapport √† la ligne suivie, on b√©n√©ficie √† la fois d'une grande efficacit√© et d'une tr√®s bonne pr√©cision directement reli√©e au GPS RTK.</li><li>Je recommanderais donc √† ceux qui construisent leur propre robot, de l'implanter dans leur logiciel.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>16. √âtape 16 - Les deux types de virages</strong><div class='step-images count-4'><figure><img src='https://wikifab.org/images/thumb/a/a1/Faucheuse_guid_e_par_GPS_RTK_Rotations_2.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Rotations_2.jpg' alt='Faucheuse guid e par GPS RTK Rotations 2.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/3/37/Faucheuse_guid_e_par_GPS_RTK_RotCentre_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RotCentre_.jpg' alt='Faucheuse guid e par GPS RTK RotCentre .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/9/9b/Faucheuse_guid_e_par_GPS_RTK_RotRoue_1_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RotRoue_1_.jpg' alt='Faucheuse guid e par GPS RTK RotRoue 1 .jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/9/9a/Faucheuse_guid_e_par_GPS_RTK_RotRoue_2.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_RotRoue_2.jpg' alt='Faucheuse guid e par GPS RTK RotRoue 2.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Deux types de virages sont d√©finis (figure 1):</li><li>- virages autour du centre situ√© entre les deux roues arri√®re</li><li>- virage autour d'une roue, soit la roue gauche pour tourner √† gauche, soit la roue droite pour tourner √† droite</li><li>Les fonction boussole() est expliqu√©e √† l'√©tape 13.</li><li>Le virage autour du centre est d'usage g√©n√©ral. Il peut cependant √™tre utilis√© pour parcourir une grille de fauchage en bandes contig√ºes (figure 2). Tous les points doivent √™tre atteints les uns apr√®s les autres, comme le montre la figure 2..<ul><li>Toutefois le virage autour d'une roue est mieux adapt√© pour r√©aliser pr√©cis√©ment des bandes contigu√´s pendant le fauchage (figure 3). Par rapport au virage autour du centre, il s'av√®re plus pr√©cis et plus fluide. Par contre ici l'un des points en bout de ligne est omis, car inutile (N=N+1 dans le programme).</li></ul></li><li>Enfin, le virage autour d'une roue est aussi utilis√© pour r√©aliser les petites corrections angulaires lors du trajet entre deux WP, afin de pointer vers le point interm√©diaire situ√© au devant de la machine (figure 4). L√† aussi c'est une correction beaucoup plus fluide que si RotationCentre √©tait utilis√©e.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>17. √âtape 17 - Partie √©lectrique (1/2)</strong><div class='step-images count-3'><figure><img src='https://wikifab.org/images/thumb/7/7e/Faucheuse_guid_e_par_GPS_RTK_BoitierElec.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_BoitierElec.jpg' alt='Faucheuse guid e par GPS RTK BoitierElec.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/0/02/Faucheuse_guid_e_par_GPS_RTK_BaseRover.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_BaseRover.jpg' alt='Faucheuse guid e par GPS RTK BaseRover.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/8/82/Faucheuse_guid_e_par_GPS_RTK_NMEA.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_NMEA.jpg' alt='Faucheuse guid e par GPS RTK NMEA.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Le bo√Ætier de commande √©lectrique</li><li>La photo 1 montre les principales cartes du bo√Ætier de commande qui vont √™tre d√©taill√©s ci-dessous.</li><li>C√¢blage du GPS</li><li>Les c√¢blages des GPS de la base et de la faucheuse sont donn√©s sur la figure 2.</li><li>On arrive naturellement √† ce c√¢blage si on suit la progression de la notice des GPS (voir partie GPS). Dans tous les cas on note la pr√©sence de l'adaptateur USB qui permet de programmer les circuits soit en base, soit en rover gr√¢ce au logiciel sur PC fourni par NavSpark. Gr√¢ce √† ce programme, on a √©galement toute les informations de position, nombre de satellites, etc...</li><li>Dans la partie faucheuse, la broche Tx1 du GPS est reli√©e √† l'entr√©e s√©rie 19 (Rx1) de la carte ARDUINO MEGA pour recevoir les phrases NMEA (figure 3).</li><li>Dans la base la broche Tx1 du GPS est envoy√©e sur la broche Rx de la radio 3DR pour l'envoi des corrections. Dans la faucheuse les corrections re√ßues par la radio 3DR sont envoy√©es sur la broche Rx2 du circuit GPS.</li><li>On note que ces corrections et leur gestion sont int√©gralement assur√©es par les circuits GPS RTK. Ainsi, la carte Aduino MEGA ne re√ßoit que des valeurs de position corrig√©es.</li><li>Nota: Le c√¢blage montr√© ici est celui d'une maquette de labo. M√™me si ce c√¢blage a permis de tester la machine en conditions r√©elles avec les vibrations, il est √©videmment souhaitable d'en concevoir une version plus durable avec circuits imprim√©s.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>18. √âtape 18 - Partie √©lectrique (2/2)</strong><div class='step-images count-3'><figure><img src='https://wikifab.org/images/thumb/4/4c/Faucheuse_guid_e_par_GPS_RTK_Empilement.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Empilement.jpg' alt='Faucheuse guid e par GPS RTK Empilement.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/9/9f/Faucheuse_guid_e_par_GPS_RTK_Brochage_Mega.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Brochage_Mega.jpg' alt='Faucheuse guid e par GPS RTK Brochage Mega.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/f/f1/Faucheuse_guid_e_par_GPS_RTK_Tableau_.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Tableau_.jpg' alt='Faucheuse guid e par GPS RTK Tableau .jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>La carte Arduino MEGA et ses shields</li><li>- Carte arduino MEGA</li><li>- Shield Moteurs roues arri√®re</li><li>- Shield Moteur roue avant</li><li>- Shield arte SD</li><li>Sur la figure 1, on note que l'on a mis des connecteurs intercalaires entre les cartes pour que la chaleur dissip√©e dans les cartes moteur puisse s'√©vacuer. De plus, ces intercalaires permettent de couper des liaisons non d√©sir√©es entre les cartes, sans avoir √† les modifier.</li><li>Les figures 2 et 3 montrent comment sont lues les positions des inverseurs du tableau de bord et de la manette de commande.</li><li>Et enfin on trouvera le c√¢blage de l'afficheur ici:</li><li>Faucheuse_guid_e_par_GPS_RTK_brochage_afficheur_LCM1602C.pdf</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>19. √âtape 19 - Le programme de pilotage Arduino</strong><p><strong>√âtapes :</strong></p><ol><li>La carte microcontr√¥leur est une Arduino MEGA (UNO n'ayant pas assez de m√©moire). Le programme de pilotage est tr√®s simple et classique. J'ai d√©velopp√© une fonction pour chaque op√©ration √©l√©mentaire √† effectuer (lecture tableau de bord, acquisition des donn√©es GPS, affichage LCD, commande d'avance ou de rotation de la machine, etc...). Ces fonctions sont ensuite utilis√©es facilement dans le programme principal. La vitesse lente de la machine (3 m√®tres / minute) facilite grandement les choses.</li><li>Par contre, la barre de coupe n'est pas g√©r√©e par ce programme mais par le programme de la carte UNO qui se trouve dans le bo√Ætier sp√©cifique.</li><li>Dans la partie SETUP du programme on trouve</li><li>- les initialisations de pins utiles de la carte MEGA en entr√©es ou sorties</li><li>- l'initialisation de l'afficheur LCD</li><li>- l' initialisation carte m√©moire SD</li><li>- l' initialisation de la vitesse de transfert de l'interface s√©rie hardware vers le GPS</li><li>- l' initialisation de la vitesse de transfert de l'interface s√©rie vers l'IDE</li><li>- l' arr√™t des moteurs et de la barre de coupe</li><li>Dans la partie LOOP du programme on trouve au d√©but</li><li>- les lectures du tableau de bord et de la manette, du GPS, de la boussole et des acc√©l√©rom√®tres</li><li>- un s√©lecteur √† 3 d√©rivations, suivant l'√©tat du s√©lecteur de modes du tableau de bord (manuel, enregistrement, fauchage)</li><li>La boucle LOOP est rythm√©e par la lecture asynchrone du GPS qui est l'√©tape la plus lente. On revient donc en d√©but de boucle environ toutes les 3 secondes.</li><li>Dans la d√©rivation mode normal, la fonction de d√©placement est command√©e en fonction de la manette et l'affichage est mis √† jour environ toutes les 3 secondes (position, √©tat GPS, direction boussole, inclinaison...). Un appui sur le BP marqueur met √† z√©ro les coordonn√©es de position qui seront exprim√©es en m√®tres dans le rep√®re g√©ographique.</li><li>Dans la d√©rivation mode enregistrement, toutes les positions mesur√©es pendant le d√©placement sont enregistr√©es sur la carte SD (p√©riode d'environ 3 secondes). Lorsque un point d'int√©r√™t est atteint, l'appui sur le marqueur est enregistr√©. dans la carte SD. La position de la machine est affich√©e toutes les 3 secondes, en m√®tres dans le rep√®re g√©ographique centr√© sur le point origine.</li><li>Dans la d√©rivation mode fauchage: La machine a pr√©alablement √©t√© amen√©e au dessus du point de r√©f√©rence. Au basculement du s√©lecteur de mode sur "fauchage", le programme observe les sorties GPS et en particulier la valeur du flag d'√©tat. Lorsque le flag d'√©tat passe en "Fix", le programme effectue la mise √† z√©ro de la position. Le premier point √† atteindre est alors lu dans le fichier fauchage de la m√©moire SD. Quand ce point est atteint, le virage de la machine se fait comme indiqu√© dans le fichier fauchage, soit autour d'une roue, soit autour du centre des deux roues - Voir les explications du paragraphe 15 -</li><li>Le processus se r√©p√®te jusqu'√† ce que le dernier point soit atteint (en g√©n√©ral point de d√©part). A ce moment le programme met la machine et la barre de coupe √† l'arr√™t.</li><li>Le fichier du programme de pilotage SW_Faucheuse_pilotage_V2.ino se trouve ici : Faucheuse guid e par GPS RTK SW Faucheuse pilotage V2.ino</li><li>Pas mal de commentaires ont √©t√© mis mais il est possible d‚Äôen rajouter en fonction des demandes d‚Äôexplications.</li><li>Pour examiner ou √©diter le fichier .ino de fa√ßon plus agr√©able qu‚Äôavec l‚Äô√©diteur Arduino on peut utiliser l‚Äô√©diteur Notepad++ (Notepad++ (notepad-plus-plus.org) ).</li><li>Ci-dessous un exemple de fichier de fauchage:Faucheuse_guid_e_par_GPS_RTK_ExempleFichierFauchage.txt</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>20. √âtape 20 - La barre de coupe et sa gestion</strong><div class='step-images count-2'><figure><img src='https://wikifab.org/images/thumb/b/bb/Faucheuse_guid_e_par_GPS_RTK_Barre.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_Barre.jpg' alt='Faucheuse guid e par GPS RTK Barre.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/5/54/Faucheuse_guid_e_par_GPS_RTK_ElectroniqueBarreDeCoupe.jpg/800px-Faucheuse_guid_e_par_GPS_RTK_ElectroniqueBarreDeCoupe.jpg' alt='Faucheuse guid e par GPS RTK ElectroniqueBarreDeCoupe.jpg' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>La barre de coupe est constitu√©e par 4 disques tournant √† la vitesse de 1200 tr/ minute. Chaque disque est muni de 3 lames de cutter escamotables. Ces disques sont dispos√©s de fa√ßon √† r√©aliser une bande de coupe continue de 1.2 m√®tre de large.</li><li>Les moteurs doivent √™tre contr√¥l√©s de fa√ßon √† limiter le courant</li><li>- au d√©marrage, √† cause de l'inertie des disques</li><li>- lors de la coupe, √† cause des blocages par trop d'herbe</li><li>Pour cela on mesure le courant dans le circuit de chaque moteur gr√¢ce √† des r√©sistances bobin√©es de faible valeur. La carte UNO est c√¢bl√©e et programm√©e pour mesurer ces courants et envoyer une commande PWM adapt√©e aux moteurs.</li><li>Ainsi, au d√©marrage, la vitesse augmente progressivement jusqu'√† sa valeur maxi en 10 secondes. En cas de blocage par de l'herbe, le moteur s'arr√™te pendant 10 secondes et refait une tentative de relance pendant 2 secondes. Si le probl√®me persiste, le cycle de 10 secondes de repos et 2 secondes de relance recommence. Dans ces conditions, l'√©chauffement du moteur reste limit√©, m√™me en cas de blocage permanent.</li><li>Les moteurs se mettent en route ou s'arr√™tent lorsque la carte UNO re√ßoit le signal envoy√© par le programme de pilotage. Cependant un interrupteur hard permet de couper le courant de fa√ßon fiable pour s√©curiser les op√©rations de maintenance</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>21. √âtape 21 - Quelle suite donner ? Quelles am√©liorations ?</strong><div class='step-images count-3'><figure><img src='https://wikifab.org/images/thumb/0/0a/Faucheuse_guid_e_par_GPS_RTK_nouveau_navspark.gif/800px-Faucheuse_guid_e_par_GPS_RTK_nouveau_navspark.gif' alt='Faucheuse guid e par GPS RTK nouveau navspark.gif' loading='lazy'></figure><figure><img src='https://wikifab.org/images/6/69/Faucheuse_guid_e_par_GPS_RTK_GPS_Radio.jpg' alt='Faucheuse guid e par GPS RTK GPS Radio.jpg' loading='lazy'></figure><figure><img src='https://wikifab.org/images/thumb/1/1d/Faucheuse_guid_e_par_GPS_RTK_image_lidar.gif/800px-Faucheuse_guid_e_par_GPS_RTK_image_lidar.gif' alt='Faucheuse guid e par GPS RTK image lidar.gif' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Ajouter Galileo √† GPS et Glonass</li><li>La v√©g√©tation (arbres) peut limiter le nombre de satellites en vue du v√©hicule et r√©duire la pr√©cision ou emp√™cher le verrouillage RTK. On a donc int√©r√™t √† utiliser le maximum de satellites simultan√©ment. Il serait donc int√©ressant de compl√©ter les constellations GPS et Glonass par la constellation Galileo.</li><li>On devrait pouvoir b√©n√©ficier ainsi de plus de 20 satellites au lieu de 15 au maximum, ce qui permet de mieux s'affranchir de l'√©crantage par la couverture v√©g√©tale.</li><li>Il commence √† exister des circuits travaillant simultan√©ment avec ces 3 constellations:</li><li>- Navspark a sorti un circuit "identique" √† celui que j'ai utilis√©, mais avec Galilleo en suppl√©ment (photo 1) (http://navspark.mybigcommerce.com/ns-hp-gn2-px1122r-multi-band-quad-gnss-rtk-breakout-board/)</li><li>- Il existe aussi des shields tr√®s compacts (phot 2) qui incluent √† la fois le circuit GPS et l'√©metteur-r√©cepteur sur le m√™me support</li><li>https://www.ardusimple.com/product/simplertk2b-starter-kit-mr-ip65/</li><li>....Mais le prix est bien sup√©rieur √† celui des circuits que nous avons utilis√©s ici.</li><li>Compl√©ter le GPS par de l'odom√©trie et par un LIDAR</li><li>Malheureusement, en arboriculture il arrive que la couverture v√©g√©tale soit tr√®s importante (champ de noisetiers par exemple). Dans ce cas, m√™me avec les 3 constellations il se peut que le verrouillage RTK ne soit pas possible.</li><li>Il faut donc introduire un capteur qui permettrait de conserver la position m√™me en l'absence momentan√©e de GPS.</li><li>L'utilisation de l'odom√©trie est une solution simple pour suppl√©er √† la perte du GPS. Son principe consiste √† mesurer pr√©cis√©ment la rotation des deux roues motrices pour en d√©duire le trajet de la faucheuse. Malheureusement la pr√©cision est limit√©e par tous les petits glissements des roues par rapport au sol. Je suis en train de tester cette solution en situation de terrain r√©elle.</li><li>L'utilisation d'un LIDAR pourrait √©galement permettre de se rep√©rer dans un verger. Son principe repose sur le balayage du plan horizontal par un faisceau laser √©mis par une tourelle. Au cours de ce balayage, la distance √† tous les objets intercept√©s est mesur√©e . Les troncs des arbres sont tr√®s faciles √† rep√©rer dans ce cas par le faisceau laser et peuvent servir √† observer la marche du robot. Voici par exemple un type de LIDAR qui pourrait convenir pour des conditions ext√©rieures (photo3): https://www.robotshop.com/eu/fr/telemetre-laser-360-rplidar-40m.html</li><li>Dans les deux cas le GPS reprendrait sa fonction en bout de rang√©e, au sortir de la couverture v√©g√©tale.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
      </ol>
    
  </div>

  

  <!-- Lightbox overlay for viewing images -->
  <div id="lightbox" class="lightbox-overlay" aria-hidden="true">
    <button id="lb-close" class="lightbox-close" aria-label="Fermer">√ó</button>
    <!-- Prev/Next visible controls -->
    <button id="lb-prev" class="lightbox-control lightbox-prev" aria-label="Image pr√©c√©dente">‚Äπ</button>
    <button id="lb-next" class="lightbox-control lightbox-next" aria-label="Image suivante">‚Ä∫</button>
    <div class="lightbox-content">
      <img id="lb-img" src="" alt="">
      <div id="lb-caption" class="lightbox-caption"></div>
    </div>
  </div>

  <script>
    // JS lightbox: delegate clicks from step-images figures
    document.addEventListener('click', function(ev){
      const fig = ev.target.closest('.step-images figure');
      if(!fig) return;
      const container = fig.closest('.step-images');
      if(!container) return;
      const figures = Array.from(container.querySelectorAll('figure'));
      const idx = figures.indexOf(fig);
      if(idx < 0) return;

      const overlay = document.getElementById('lightbox');
      const imgEl = document.getElementById('lb-img');
      const captionEl = document.getElementById('lb-caption');
      const btnPrev = document.getElementById('lb-prev');
      const btnNext = document.getElementById('lb-next');

      let current = idx;
      function show(i){
        const f = figures[i];
        const im = f.querySelector('img');
        const cap = f.querySelector('figcaption');
        if(im){ imgEl.src = im.src; imgEl.alt = im.alt || ''; }
        captionEl.textContent = cap ? cap.textContent : '';
        overlay.classList.add('active');
        overlay.setAttribute('aria-hidden','false');
      }
      function hide(){ overlay.classList.remove('active'); overlay.setAttribute('aria-hidden','true'); }

      show(current);

      // close handlers
      document.getElementById('lb-close').onclick = hide;
      overlay.onclick = function(e){ if(e.target === overlay) hide(); };
      // prev/next click handlers
      if(btnPrev){ btnPrev.onclick = function(e){ e.stopPropagation(); current = Math.max(current-1, 0); show(current); }; }
      if(btnNext){ btnNext.onclick = function(e){ e.stopPropagation(); current = Math.min(current+1, figures.length-1); show(current); }; }
      document.onkeydown = function(e){
        if(e.key === 'Escape') hide();
        if(e.key === 'ArrowRight') { current = Math.min(current+1, figures.length-1); show(current); }
        if(e.key === 'ArrowLeft') { current = Math.max(current-1, 0); show(current); }
      };
    });
  </script>

  <style>
    /* lightbox visible controls styling */
    .lightbox-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.35);
      color: #fff;
      border: none;
      width: 44px;
      height: 70px;
      font-size: 2rem;
      line-height: 1;
      border-radius: 6px;
      cursor: pointer;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .lightbox-prev { left: 12px; }
    .lightbox-next { right: 12px; }
    .lightbox-control:hover { background: rgba(0,0,0,0.6); }
    @media (max-width: 600px){ .lightbox-control { width: 36px; height: 56px; font-size: 1.6rem; } }
  </style>

  

</body>
</html>