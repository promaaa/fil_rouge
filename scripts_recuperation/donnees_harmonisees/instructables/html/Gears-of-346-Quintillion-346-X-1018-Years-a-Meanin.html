<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>INFINITY GEARS... a Meaningful Project</title>
  <style>
    body {
      font-family: "Helvetica", Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      background-color: #fafafa;
      color: #222;
      line-height: 1.6;
      padding: 20px;
    }

    h1 {
      color: #210dfd8b;
      border-bottom: 2px solid #ce510dff;
      padding-bottom: 0.2em;
    }

    h2 {
      color: #333;
      margin-top: 1.5em;
    }

    ul, ol {
      margin-left: 1.5em;
    }

    /* Sous-listes dans les √©tapes */
    ol > li ul {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    ol > li strong {
      color: #444;
      display: block;
      margin-bottom: 0.3em;
    }

    .section {
      margin-bottom: 2em;
      background: #fff;
      padding: 1em;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    /* Styliser le titre principal de chaque √©tape : encadr√© gris et police un peu plus grande
       Cibl√© uniquement dans la section √âtapes (classe .steps) pour √©viter d'impacter d'autres <strong>. */
    .section.steps > ol > li > strong:first-child {
      display: block;
      background: #f3f3f3; /* gris tr√®s clair */
      color: #222;
      padding: 0.45rem 0.6rem;
      border: 1px solid #d6d6d6;
      border-radius: 6px;
      font-size: 1.06em; /* l√©g√®rement plus grand */
      margin-bottom: 0.45rem;
    }

    /* Mat√©riaux: rendre les sous-items gris√©s et en police plus petite */
    .section.materials ul ul {
      color: #666;
      font-size: 0.9em;
      margin-top: 0.35em;
    }

    /* (Step title framed styles were removed per user request to revert) */

    .step-images {
      margin: 1em 0;
      display: grid;
      gap: 0.6rem;
    }

  /* Layout for image boxes: adjust columns based on count via classes .count-N */
  .step-images.count-1 { grid-template-columns: 1fr; }
  .step-images.count-2 { grid-template-columns: repeat(2, 1fr); }
  .step-images.count-3 { grid-template-columns: repeat(3, 1fr); }
  /* For 4 or more images, use 2 columns thumbnail layout for a more harmonious small-preview look */
  .step-images.count-4,
  .step-images.count-5,
  .step-images.count-6,
  .step-images.count-7,
  .step-images.count-8,
  .step-images.count-9,
  .step-images.count-10 { grid-template-columns: repeat(2, 1fr); }

    /* container box around the whole set of images for the step */
    .step-images {
      margin: 1em 0;
      display: grid;
      gap: 0.6rem;
      background: #fafafa; /* subtle gray background */
      border: 1px solid #e6e6e6;
      padding: 0.6rem;
      border-radius: 8px;
    }

    figure {
      margin: 0;
      text-align: center;
      background: transparent;
      padding: 0.25rem 0;
      border-radius: 6px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    /* Thumbnails: show the whole image (no cropping). Use contain with max dims so
       small images display fully while larger images are constrained. Center them. */
    .step-images figure img {
      width: auto;
      max-width: 100%;
      max-height: 160px; /* control thumbnail height but do not crop */
      object-fit: contain; /* show full image */
      background: #f5f5f5; /* subtle neutral background for small images */
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      cursor: zoom-in;
      display: block;
      margin: 0 auto; /* center narrower images */
    }
    /* Single-image steps: let the image take available width while preserving aspect */
    .step-images.count-1 figure img {
      width: 100%;
      height: auto;
      object-fit: contain;
      max-height: none;
    }

    /* Hide figcaptions in thumbnail/grid mode; captions are shown in the lightbox */
    .step-images figure figcaption { display: none; }

    figcaption {
      font-size: 0.9em;
      color: #666;
      margin-top: 0.5em;
      font-style: italic;
    }
    

    /* Lightbox overlay */
    .lightbox-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.75);
      z-index: 9999;
      padding: 1rem;
    }
    .lightbox-overlay.active { display: flex; }
    .lightbox-content {
      max-width: 95%;
      max-height: 95%;
      text-align: center;
    }
    .lightbox-content img {
      max-width: 100%;
      max-height: 80vh;
      border-radius: 6px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    }
    .lightbox-caption { color: #fff; margin-top: 0.6rem; font-size: 0.95em; }
    .lightbox-close {
      position: absolute; top: 12px; right: 16px; color: #fff; background: transparent;
      border: none; font-size: 1.6rem; cursor: pointer;
    }

    footer {
      margin-top: 2em;
      font-size: 0.9em;
      color: #666;
      border-top: 1px solid #ddd;
      padding-top: 1em;
    }

    /* Style impression PDF */
    @media print {
      body { background: white; color: black; }
      a { color: black; text-decoration: none; }
      .section { box-shadow: none; border: 1px solid #ccc; }
    }
  </style>
</head>
<body>

  <header>
    <h1>INFINITY GEARS... a Meaningful Project</h1>
    
      <div style="text-align:center; margin-bottom:1.2em;">
        <img src="https://content.instructables.com/F0P/TMFD/KWQEJE9V/F0PTMFDKWQEJE9V.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75" alt="Image principale du tutoriel" style="max-width:100%; max-height:320px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08);">
        
      </div>
    
    
      
        <p>Arthur Ganson built an inspiring sculpture named "Machine with Concrete" composed of 12 stages of 1/50 ratio gears all connected together. The first gear rotates at 200 rpm, full rotation takes 1/200 minutes. Guess the last gear's (which is buried in concrete) full rotation time: 13.7 Billion (10^12) years!</p>
      
        <p>No matter how fast you rotate the first gear, your effort diminishes inside the system. Life is and feels similarly. We do lots of things and those add very little to the universe. So the best we can do is to do what we like and what makes us happy!</p>
      
        <p>So, we created a similar project, INFINITY GEARS, in a more compact form with rotation-counter switches at different stages, powered by an Arduino Uno. We rotate the first gear with a 250 rpm DC geared motor.</p>
      
        <p>Guess the full rotation time of our last gear !? ------> Wait for it -------> 346 Quintillion (346 x 10^18) Years! Even the universe (most probably) won't see the full rotation! That's why we designed that last gear as a "Non-Rotatable square gear".</p>
      
        <p>All gears in our project are 3D Printed in colors except 5 Black ones, which have small magnets on them (+1 black gear on the motor shaft, does not have a magnet). Their rotations are counted by reed switches + LEDs which are connected to an Arduino Uno + 2x16 LCD.</p>
      
        <p>1st Black gear completes its full rotation in 0.002 minute, can easily be seen..</p>
      
        <p>2nd Black gear, however, completes its full rotation in 135 Days ! If you wait this long..</p>
      
        <p>3rd Black gear, OMG, will complete its full rotation in 3.6 Million (3.6 x 10^6) Years!</p>
      
        <p>4th Black gear, OMG, 35 Trillion (35 x 10^12)!</p>
      
        <p>5th Square Black Gear, OOOOOOMMMMMMMGGGGGGG, 346 Quintillion (346 x 10^18) YEARS! (Will the universe see it rotate? Not sure about it!)</p>
      
    
    
    
    <p style="font-size:0.95em; color:#066; margin-top:0.2em;">
      <strong>Lien du tutoriel de base :</strong>
      <a href="https://www.instructables.com/Gears-of-346-Quintillion-346-X-1018-Years-a-Meanin/" target="_blank" rel="noopener" style="color:#066;">https://www.instructables.com/Gears-of-346-Quintillion-346-X-1018-Years-a-Meanin/</a>
    </p>
    
  </header>

  <div class="section materials">
    <h2>üõ†Ô∏è Mat√©riaux</h2>
    
      <ul>
        <li>Supplies<ul><li>TOOLS:</li><li>*A3 Sized ProBUDDY Kit (Very helpful when building projects): https://www.sundayrobotics.com/probuddy/(Kickstarter campaign will be launched on 01 February 2022 Tuesday, Don't miss the first Hour and First day opportunities!)</li><li>*3D CAD Software</li><li>*3D Printer (We have a Cubicon Single Plus)</li><li>MATERIALS:</li><li>*1 x Standard size Breadboard, 1 x Half-sized Breadboard</li><li>*4 x Neodymium magnets with 10mm Diameter 1mm thickness</li><li>*4 x Miniature reed switches</li><li>*4 x 3mm Red LEDS</li><li>*4 x1,5K Resistors</li><li>*1 x Arduino Uno</li><li>*1 x 2x16 Character LCD module</li><li>*2 x LM2596 StepDown regulator modules</li><li>*8 x AA Alcaline Batteries + Battery case</li><li>*1 x Power button + Supply Jacks</li><li>*1 x 250 rpm geared DC motor 6V rated</li><li>*2 x steel rods with 8mm diameter and 30cm lenght</li><li>*4 x 8mm rod holders, aluminum.</li></ul></li>
      </ul>
    
  </div>

  <div class="section">
    <h2>üîß Outils</h2>
    
      <p><em>Non sp√©cifi√©</em></p>
    
  </div>

  <div class="section steps">
    <h2> √âtapes</h2>
    
      <ol>
        
          <li>
            
            
              <strong>1. Step 1: Planning</strong><div class='step-images count-4'><figure><img src='https://content.instructables.com/FNM/M73F/KWQEJDSX/FNMM73FKWQEJDSX.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Planning' loading='lazy'></figure><figure><img src='https://content.instructables.com/FQL/YYA7/KWQEJDUL/FQLYYA7KWQEJDUL.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Planning' loading='lazy'></figure><figure><img src='https://content.instructables.com/FWN/7KQP/KWQEJDUN/FWN7KQPKWQEJDUN.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Planning' loading='lazy'></figure><figure><img src='https://content.instructables.com/FGB/7SZC/KWQEJDUO/FGB7SZCKWQEJDUO.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Planning' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Planning is essential before starting any project, we all know this right?</li><li>So, in this stage we make our plan and decide on the overall design of our system and the designs and the quantity of gears.</li><li>We decided to build our project on a ProBUDDY Kit, since it makes building, storing and carrying project hardware easy. We first chose our ProBUDDY Kit size as A3.</li><li>We will be using SPUR GEARS in our system with 2 rows, the gears will be located on 8mm steel rods. The longest and feasible length of the rods was chosen to be 30cm.</li><li>The height of a ProBUDDY Kit magnetic base is 15mm and the lenght from the bottom of the rod holder to the center of the rod is 20 mm so the diameter of the gear must be smaller than 35 mm.</li><li>We will be adding magnets 4 gears and will count the rotation of each with reed switches + leds + Arduino Uno + Character LCD.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>2. Step 2: Gears</strong><div class='step-images count-5'><figure><img src='https://content.instructables.com/FB2/QPAF/KWQEJE73/FB2QPAFKWQEJE73.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Gears' loading='lazy'></figure><figure><img src='https://content.instructables.com/F3X/V707/KWQEJE75/F3XV707KWQEJE75.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Gears' loading='lazy'></figure><figure><img src='https://content.instructables.com/FA7/EQP5/KWQEJE76/FA7EQP5KWQEJE76.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Gears' loading='lazy'></figure><figure><img src='https://content.instructables.com/F7F/DGK0/KWQEJE77/F7FDGK0KWQEJE77.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Gears' loading='lazy'></figure><figure><img src='https://content.instructables.com/F7N/OGVD/KWT9CQAV/F7NOGVDKWT9CQAV.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Gears' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>We will have 41 Spur gears + Motor Gear all connected together. Each gear has 45 teeth on the outside and 9 teeth on the inside. The motor gear has 9 teeth too.</li><li>At each stage, the gear ratio is 1/5. From the motor gear to the end gear, we have 41 stages connected together. That makes 1/ (5^41) gear ratio.<ul><li>The motor gear completes its full rotation in 1/250 of a minute. And for the last (square) gear, it takes (1/250) * (5^41) = 1,8x10^26 Minutes!</li></ul></li><li>That is 3.03x10^24 Hours!</li><li>That is 1,26x10^23 Days!</li><li>That is 3.46x10^20 Years!</li><li>And that is 346 Quintillion Years!</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>3. Step 3: Electronics Hardware</strong><div class='step-images count-10'><figure><img src='https://content.instructables.com/FKT/829E/KWT9CD1N/FKT829EKWT9CD1N.jpg?auto=webp&fit=bounds&frame=1&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/F5Q/O8SJ/KWT9CQLH/F5QO8SJKWT9CQLH.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FGL/MHMO/KWT9CQLI/FGLMHMOKWT9CQLI.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FW3/32WB/KWT9CBYG/FW332WBKWT9CBYG.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FMF/D0FP/KWT9CBY6/FMFD0FPKWT9CBY6.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FXO/QM3S/KWT9CBY7/FXOQM3SKWT9CBY7.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FXX/Q14S/KWT9CBYI/FXXQ14SKWT9CBYI.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FMX/F1TJ/KWT9CBYJ/FMXF1TJKWT9CBYJ.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/F34/R0W0/KWT9CBYS/F34R0W0KWT9CBYS.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure><figure><img src='https://content.instructables.com/FDZ/NPMK/KWT9CBYT/FDZNPMKKWT9CBYT.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Electronics Hardware' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Guys, our power source is 8 x AA Alcaline batteries connected in series. We have a 6V DC motor and 5V Arduino Uno + LCD + rest of the circuit. Hence we utilize 2 x LM2596 regulators for this.</li><li>In each black gear we have a magnet. We have 4 magnets in total. Right next to them there is a reed switch connected to a led and resistor and to the Arduino Uno pin. When magnet passes right next to the reed switch, we will have a transition from high to low to high at the Arduino Pin.</li><li>We have a 2x16 character LCD to show the rotational counts.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>4. Step 4: The Code</strong><div class='step-images count-1'><figure><img src='https://content.instructables.com/FFB/PXAR/KWT9CIVE/FFBPXARKWT9CIVE.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='The Code' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>The code is not complicated and it is as follows;</li><li>#include (LiquidCrystal.h) /* This library must be included for LCD screen use. */</li><li>LiquidCrystal lcd(12, 11, 5, 4, 3, 2); /* Arduino pins to which the LCD is connected. *</li><li>* Reed switch sensor definitions. */<ul><li>int reed1 = 6;</li><li>int reed2 = 7;</li><li>int reed3 = 8;</li><li>int reed4 = 9;</li></ul></li><li>int reed_status1, reed_status2, reed_status3, reed_status4;</li><li>/* Counter definitions. */<ul><li>int counter1 = 0;</li><li>int counter2 = 0;</li><li>int counter3 = 0;</li><li>int counter4 = 0;</li></ul></li><li>void setup() {</li><li>lcd.begin(16, 2); /* The row and column numbers of the LCD are specified. *</li><li>* The text to be written on the first line of the LCD. */ lcd.setCursor(0, 0); lcd.print("SUNDAY ROBOTICS");</li><li>/* The text to be written on the second line of the LCD. */ lcd.setCursor(0, 1); lcd.print(" INFINITE GEARS");</li><li>/* Reed switches are set as input. */ pinMode(reed1,INPUT); pinMode(reed2,INPUT); pinMode(reed3,INPUT); pinMode(reed4,INPUT);</li><li>delay(1500); /* The splash screen will wait for 1500 milliseconds. */</li><li>}</li><li>void loop()</li><li>{</li><li>/* The reed switch sensor state is read and then the state is passed to the variable.<ul><li>reed_status1 = digitalRead(reed1);</li><li>reed_status2 = digitalRead(reed2);</li><li>reed_status3 = digitalRead(reed3);</li><li>reed_status4 = digitalRead(reed4);</li><li>// If the reed switch state is 0, the system waits for 100 milliseconds and the counter increments by 1. */ if(reed_status1 == 0)</li></ul></li><li>{</li><li>delay(100);</li><li>counter1++;</li><li>}<ul><li>else if(reed_status2 == 0)</li></ul></li><li>{</li><li>delay(100);</li><li>counter2++;</li><li>}<ul><li>else if(reed_status3 == 0)</li></ul></li><li>{</li><li>delay(100);</li><li>counter3++;</li><li>}<ul><li>else if(reed_status4 == 0)</li></ul></li><li>{</li><li>delay(100);</li><li>counter4++;</li><li>}</li><li>}</li><li>lcd.clear(); /* Clean the LCD screen. */</li><li>/* The text to be written after the splash screen. */</li><li>lcd.setCursor(0, 0);</li><li>lcd.print(" INFINITE GEARS");</li><li>/* Counter values are written on the second line. */</li><li>lcd.setCursor(0, 1);</li><li>lcd.print("F:");</li><li>lcd.print(counter1);</li><li>lcd.print(" S:");</li><li>lcd.print(counter2);</li><li>lcd.print(" T:");</li><li>lcd.print(counter3);</li><li>lcd.print(" F:");</li><li>lcd.print(counter4);</li><li>lcd.print(" F:");</li><li>lcd.print(counter5);</li><li>}</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
          <li>
            
            
              <strong>5. Step 5: Meaning of This Project</strong><div class='step-images count-1'><figure><img src='https://content.instructables.com/FKX/BROV/KWT9CMU3/FKXBROVKWT9CMU3.jpg?auto=webp&fit=bounds&frame=1&height=1024&width=1024auto=webp&frame=1&height=300&auto=webp&fit=bounds&width=600&height=450&quality=75' alt='Meaning of This Project' loading='lazy'></figure></div><p><strong>√âtapes :</strong></p><ol><li>Human life is actually not that long, no matter how hard or stressful we work, our efforts will be lost in the dynamism of the universe.Therefore, there is no need for stress, no need for mess. Let's just do the projects that make us and people happy!!!!</li><li>ProBUDDY Kits will be on KICKSTARTER on 11.01.2022! Product landing page is here: https://www.sundayrobotics.com/probuddy/</li><li>Thank you.</li></ol>
            

            
            
            
              
              
                
                
                
              

              
            
          </li>
        
      </ol>
    
  </div>

  

  <!-- Lightbox overlay for viewing images -->
  <div id="lightbox" class="lightbox-overlay" aria-hidden="true">
    <button id="lb-close" class="lightbox-close" aria-label="Fermer">√ó</button>
    <!-- Prev/Next visible controls -->
    <button id="lb-prev" class="lightbox-control lightbox-prev" aria-label="Image pr√©c√©dente">‚Äπ</button>
    <button id="lb-next" class="lightbox-control lightbox-next" aria-label="Image suivante">‚Ä∫</button>
    <div class="lightbox-content">
      <img id="lb-img" src="" alt="">
      <div id="lb-caption" class="lightbox-caption"></div>
    </div>
  </div>

  <script>
    // JS lightbox: delegate clicks from step-images figures
    document.addEventListener('click', function(ev){
      const fig = ev.target.closest('.step-images figure');
      if(!fig) return;
      const container = fig.closest('.step-images');
      if(!container) return;
      const figures = Array.from(container.querySelectorAll('figure'));
      const idx = figures.indexOf(fig);
      if(idx < 0) return;

      const overlay = document.getElementById('lightbox');
      const imgEl = document.getElementById('lb-img');
      const captionEl = document.getElementById('lb-caption');
      const btnPrev = document.getElementById('lb-prev');
      const btnNext = document.getElementById('lb-next');

      let current = idx;
      function show(i){
        const f = figures[i];
        const im = f.querySelector('img');
        const cap = f.querySelector('figcaption');
        if(im){ imgEl.src = im.src; imgEl.alt = im.alt || ''; }
        captionEl.textContent = cap ? cap.textContent : '';
        overlay.classList.add('active');
        overlay.setAttribute('aria-hidden','false');
      }
      function hide(){ overlay.classList.remove('active'); overlay.setAttribute('aria-hidden','true'); }

      show(current);

      // close handlers
      document.getElementById('lb-close').onclick = hide;
      overlay.onclick = function(e){ if(e.target === overlay) hide(); };
      // prev/next click handlers
      if(btnPrev){ btnPrev.onclick = function(e){ e.stopPropagation(); current = Math.max(current-1, 0); show(current); }; }
      if(btnNext){ btnNext.onclick = function(e){ e.stopPropagation(); current = Math.min(current+1, figures.length-1); show(current); }; }
      document.onkeydown = function(e){
        if(e.key === 'Escape') hide();
        if(e.key === 'ArrowRight') { current = Math.min(current+1, figures.length-1); show(current); }
        if(e.key === 'ArrowLeft') { current = Math.max(current-1, 0); show(current); }
      };
    });
  </script>

  <style>
    /* lightbox visible controls styling */
    .lightbox-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.35);
      color: #fff;
      border: none;
      width: 44px;
      height: 70px;
      font-size: 2rem;
      line-height: 1;
      border-radius: 6px;
      cursor: pointer;
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }
    .lightbox-prev { left: 12px; }
    .lightbox-next { right: 12px; }
    .lightbox-control:hover { background: rgba(0,0,0,0.6); }
    @media (max-width: 600px){ .lightbox-control { width: 36px; height: 56px; font-size: 1.6rem; } }
  </style>

  

</body>
</html>