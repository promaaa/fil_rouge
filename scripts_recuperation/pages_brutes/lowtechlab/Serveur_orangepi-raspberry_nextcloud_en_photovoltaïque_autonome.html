
<!DOCTYPE html>

<html class="client-nojs" dir="ltr" lang="fr">
<head>
<meta charset="utf-8"/>
<title>Serveur orangepi-raspberry nextcloud en photovoltaïque autonome — Low-tech Lab</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome","wgTitle":"Serveur orangepi-raspberry nextcloud en photovoltaïque autonome","wgCurRevisionId":131960,"wgRevisionId":131960,"wgArticleId":64194,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*","Dokit-read","Dokit-createaccount","Dokit-comment","Dokit-pdfexport"],"wgCategories":["Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],"wgMonthNamesShort":["","janv.","fév.","mars","avr.","mai","juin","juill.","août","sept.","oct.","nov.","déc."],"wgRelevantPageName":"Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome","wgRelevantArticleId":64194,"wgRequestId":"f7dbc8ce59dfea8991306b04","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPageFormsAutocompleteValues":[],"wgPageFormsAutocompleteOnAllChars":false,"wgPageFormsFieldProperties":[],"wgPageFormsCargoFields":[],"wgPageFormsDependentFields":[],"wgPageFormsGridValues":[],"wgPageFormsGridParams":[],"wgPageFormsContLangYes":null,"wgPageFormsContLangNo":null,"wgPageFormsContLangMonths":[],"wgPageFormsShowOnSelect":[],"wgPageFormsScriptPath":"/w/extensions/PageForms","edgValues":null,"wgPageFormsEDSettings":null,"wgAllowPipesInForms":true,"wgAmericanDates":false,"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wgVisualEditor":{"pageLanguageCode":"fr","pageLanguageDir":"ltr","pageVariantFallbacks":"fr","usePageImages":false,"usePageDescriptions":false},"wgULSAcceptLanguageList":[],"wgULSCurrentAutonym":"français","wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false,\"hidebreadcrumb\":true}","wgTranslatePageTranslation":"source","ImageAnnotator":{"imageAnnotatorOldWgServers":["https://lowtechlab.org","http://lowtechlab.org"]},"CommentStreams":{"canComment":false,"moderatorEdit":false,"moderatorAccept":false,"showEditBoxOnPageLoad":1,"moderatorDelete":false,"moderatorFastDelete":0,"showLabels":1,"userDisplayName":"\u003Cspan class=\"cs-comment-author-anonymous\"\u003Eanonyme\u003C/span\u003E","userAvatar":null,"newestStreamsOnTop":1,"initiallyCollapsed":false,"enableVoting":1,"enableAccepting":1,"enableWatchlist":1,"comments":[{"commenttitle":"bug etape 12","username":"Aurelpere","userdisplayname":"Aurelpere","avatar":"/images/avatars/default_l.gif","created":"22 août 2023 à 09:27","created_timestamp":"1692692828","modified":null,"moderated":null,"wikitext":"L' \u0026Eacute;tape 12 - Configuration https sur dietpi si vous etes branch\u0026eacute; en box ne passe pas ... je ne comprend pas pourquoi, j'ai essay\u0026eacute; en edition mediawiki ou en normal. Ca s'affiche dans le brouillon et dans la pr\u0026eacute;visualisation mais pas dans la version publi\u0026eacute;...","html":"\u003Cdiv class=\"mw-parser-output\"\u003E\u003Cp\u003EL' Étape 12 - Configuration https sur dietpi si vous etes branché en box ne passe pas ... je ne comprend pas pourquoi, j'ai essayé en edition mediawiki ou en normal. Ca s'affiche dans le brouillon et dans la prévisualisation mais pas dans la version publié...\n\u003C/p\u003E\u003C/div\u003E","pageid":64224,"associatedid":64194,"parentid":null,"numreplies":2,"numupvotes":0,"numdownvotes":0,"vote":0,"issolved":false,"watching":false,"children":[{"commenttitle":null,"username":"GoldofBengal","userdisplayname":"\u003Ca href=\"/wiki/Utilisateur:GoldofBengal\" title=\"Utilisateur:GoldofBengal\"\u003ELow-Tech Lab\u003C/a\u003E","avatar":"/images/avatars/dkf_Low_tech_Lab_3_l.jpg?r=1572475572","created":"23 août 2023 à 18:11","created_timestamp":"1692810705","modified":null,"moderated":null,"wikitext":"J'ai fait des tests \u0026agrave; l'\u0026eacute;tape 16 jusqu'\u0026agrave; isoler le morceau qui fait bugger le syst\u0026egrave;me. Je t'ai envoy\u0026eacute; le d\u0026eacute;tail par mail. \n\nBon courage !","html":"\u003Cdiv class=\"mw-parser-output\"\u003E\u003Cp\u003EJ'ai fait des tests à l'étape 16 jusqu'à isoler le morceau qui fait bugger le système. Je t'ai envoyé le détail par mail. \n\u003C/p\u003E\u003Cp\u003EBon courage\u0026#160;!\n\u003C/p\u003E\u003C/div\u003E","pageid":64256,"associatedid":64194,"parentid":64224,"numreplies":0,"numupvotes":0,"numdownvotes":0,"isaccepted":false},{"commenttitle":null,"username":"Aurelpere","userdisplayname":"Aurelpere","avatar":"/images/avatars/default_l.gif","created":"23 août 2023 à 19:06","created_timestamp":"1692813994","modified":null,"moderated":null,"wikitext":"Merci! J'ai mis de c\u0026ocirc;t\u0026eacute; le bloc qui buggue. Je vais laisser ca de c\u0026ocirc;t\u0026eacute; pour l'instant et j'updaterai quand j'aurai test\u0026eacute; avec une box","html":"\u003Cdiv class=\"mw-parser-output\"\u003E\u003Cp\u003EMerci! J'ai mis de côté le bloc qui buggue. Je vais laisser ca de côté pour l'instant et j'updaterai quand j'aurai testé avec une box\n\u003C/p\u003E\u003C/div\u003E","pageid":64258,"associatedid":64194,"parentid":64224,"numreplies":0,"numupvotes":0,"numdownvotes":0,"isaccepted":false}]}]},"wgVisualEditorToolbarScrollOffset":0,"wgVisualEditorUnsupportedEditParams":["undo","undoafter","veswitched"],"wgEditSubmitButtonLabelPublish":false});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"loading","user.tokens":"loading","ext.imageannotator.editor.css":"ready","ext.translate":"ready","ext.translate.tag.languages":"ready","ext.socialprofile.responsive":"ready","ext.socialprofile.userinfo.css":"ready","ext.Wikifab.css":"ready","ext.groupspage.css":"ready","ext.checkpagetitle.css":"ready","ext.flowcountertalks.css":"ready","ext.simpleembedvideo.css":"ready","ext.userspageslinks.css":"ready","ext.wikifab.css":"ready","ext.dokitfooter.css":"ready","ext.EmbedTutorials.modal.css":"ready","ext.visualEditor.desktopArticleTarget.noscript":"ready","ext.lowtechlab.css":"ready","ext.uls.interlanguage":"ready","ext.simplelanguageselectorcss":"ready","ext.autosetpagelang":"ready","ext.smw.style":"ready","ext.smw.tooltip.styles":"ready","ext.bootstrap.styles":"ready","ext.EmbedTutorials.modal.js":"loading","ext.QRCodeGenerator.modal.js":"loading"});mw.loader.implement("user.options@1dpodri",function($,jQuery,require,module){/*@nomin*/mw.user.options.set({"variant":"fr"});
});mw.loader.implement("user.tokens@1wxn27l",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["ext.wikifab.wfexplore","ext.Tabber","ext.imageannotator.editor","ext.smw.style","ext.smw.tooltips","ext.carousel.js","mediawiki.page.startup","mediawiki.user","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","ext.socialprofile.userinfo.js","ext.userswatchbutton.js","ext.groupspage.js","ext.checkpagetitle.js","ext.inputBox","mmv.head","mmv.bootstrap.autostart","ext.simpleembedvideo.js","ext.userspageslinks.js","ext.3d","ext.cssforcategories.common","ext.CommentStreams","ext.visualEditor.desktopArticleTarget.init","ext.visualEditor.targetLoader","ext.uls.interface","ext.simplelanguageselector","ext.bootstrap.scripts","ext.Wikifab.js"]);mw.loader.load("/w/load.php?debug=false\u0026lang=fr\u0026modules=ext.EmbedTutorials.modal.js%7Cext.QRCodeGenerator.modal.js\u0026only=scripts\u0026skin=chameleon");});</script>
<link href="/w/load.php?debug=false&amp;lang=fr&amp;modules=ext.EmbedTutorials.modal.css%7Cext.Wikifab.css%7Cext.autosetpagelang%2Csimplelanguageselectorcss%2Ctranslate%7Cext.bootstrap.styles%7Cext.checkpagetitle.css%7Cext.dokitfooter.css%7Cext.flowcountertalks.css%7Cext.groupspage.css%7Cext.imageannotator.editor.css%7Cext.lowtechlab.css%7Cext.simpleembedvideo.css%7Cext.socialprofile.responsive%7Cext.socialprofile.userinfo.css%7Cext.translate.tag.languages%7Cext.uls.interlanguage%7Cext.userspageslinks.css%7Cext.visualEditor.desktopArticleTarget.noscript%7Cext.wikifab.css&amp;only=styles&amp;skin=chameleon" rel="stylesheet"/>
<link href="/w/load.php?debug=false&amp;lang=fr&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=chameleon" rel="stylesheet"/>
<script async="" src="/w/load.php?debug=false&amp;lang=fr&amp;modules=startup&amp;only=scripts&amp;skin=chameleon"></script>
<style>
			:root{
				--main-btn-color: #C1AC55;
			}
			</style><style>
			:root{
				--main-hover-color: #AE9A46;
			}
			</style>
<meta content="" name="ResourceLoaderDynamicStyles"/>
<link href="/w/load.php?debug=false&amp;lang=fr&amp;modules=site.styles&amp;only=styles&amp;skin=chameleon" rel="stylesheet"/>
<meta content="MediaWiki 1.31.3" name="generator"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="/w/index.php?title=Sp%C3%A9cial:Export_RDF/Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome&amp;xmlmime=rdf" rel="alternate" title="Serveur orangepi-raspberry nextcloud en photovoltaïque autonome" type="application/rdf+xml"/>
<link href="/images/favicon/favicon.png" rel="shortcut icon"/>
<link href="/w/opensearch_desc.php" rel="search" title="Low-tech Lab (fr)" type="application/opensearchdescription+xml"/>
<link href="https://wiki.lowtechlab.org/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=fr&amp;modules=html5shiv&amp;only=scripts&amp;skin=chameleon&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome rootpage-Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome layout-layout-dokit skin-chameleon action-view bodyTranslateSourcePage bodyPageInUserLanguage">
<!-- navigation bar -->
<nav class="navbar navbar-default p-navbar" id="mw-navigation" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle collapsed" data-target="#mw-navigation-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
</button>
<!-- logo and main page link -->
<div class="p-logo navbar-brand" id="p-logo" role="banner">
<a href="https://wiki.lowtechlab.org/images/logo/logo-white.png" rel="noopener noreferrer" target="_blank" title="Visiter la page d’accueil"><img alt="Low-tech Lab" src="https://wiki.lowtechlab.org/images/logo/logo-white.png"/></a>
</div>
</div>
<div class="collapse navbar-collapse" id="mw-navigation-collapse">
<!-- search form -->
<div class="p-search navbar-form" id="p-search" role="search">
<form action="/w/index.php" class="mw-search form-inline" id="searchform">
<input name="title" type="hidden" value="Spécial:Recherche"/>
<div class="input-group"><input accesskey="f" autocomplete="off" class="form-control" id="searchInput" name="search" placeholder="Rechercher" title="Rechercher"/>
<div class="input-group-btn">
<button class="mw-searchButton btn btn-default" id="mw-searchButton" name="fulltext" title="Rechercher les pages comportant ce texte." type="submit" value="Rechercher"><span class="glyphicon glyphicon-search"></span></button>
</div>
</div>
</form>
</div>
<ul class="nav navbar-nav">
<!-- navigation -->
<li id="n-Tutoriels"><a href="/wiki/Explore">Tutoriels</a></li>
<li id="n-Groupes"><a href="/wiki/Groups">Groupes</a></li>
<li id="n-Forum"><a href="/wiki/Sp%C3%A9cial:AllDiscussions">Forum</a></li></ul>
<div class="navbar-right-aligned"><ul class="nav navbar-nav MessageContent"><div class="wf-top-button askButton" data-target="#CreateNewPage" data-toggle="modal"><span class="btn webfonts-changed"><span class="glyphicon glyphicon-pencil"></span> Créer une page</span></div>
<div aria-labelledby="myModalLabel" class="modal fade" id="CreateNewPage" role="dialog">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="myModalLabel"><span id="Vous_n'avez_pas_la_permission"></span><span class="mw-headline" id="Vous_n_avez_pas_la_permission">Vous n'avez pas la permission</span></h4>
</div>
<div class="modal-body NewPageTabs">
<div class="alert alert-warning" role="alert"><strong>Oups !</strong> Vous n'avez pas la permission de modifier ce tutoriel car vous n'êtes pas connecté. Pour modifier ce tutoriel, <a class="external text" href="https://wiki.lowtechlab.org/w/index.php?title=Sp%C3%A9cial:UserLogin/signup&amp;returnto=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome" rel="nofollow">créez un compte</a> ou <a class="external text" href="https://wiki.lowtechlab.org/w/index.php?title=Sp%C3%A9cial:UserLogin&amp;returnto=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome" rel="nofollow">connectez-vous</a>.</div>
</div>
</div>
</div>
</div>
</ul>
<ul class="nav navbar-nav MessageContent"></ul>
<!-- personal widgets uls -->
<ul class="navbar-personaltools navbar-nav navbar-personaltoolwidgets navbar-nav-widgets"><li class="active" id="pt-language"><a class="sls-trigger lang-fr" href="#" sort_order="0">français</a></li>
</ul>
<!-- personal tools -->
<ul class="navbar-tools navbar-nav">
<li class="dropdown navbar-tools-tools">
<a class="dropdown-toggle navbar-usernotloggedin" data-toggle="dropdown" href="#" title="Vous n’êtes pas connecté."><span class="glyphicon glyphicon-user"></span></a>
<ul class="p-personal-tools dropdown-menu dropdown-menu-right">
<li id="pt-createaccount"><a href="/w/index.php?title=Sp%C3%A9cial:Cr%C3%A9er_un_compte&amp;returnto=Serveur+orangepi-raspberry+nextcloud+en+photovolta%C3%AFque+autonome" sort_order="1" title="Nous vous encourageons à créer un compte utilisateur et vous connecter; ce n’est cependant pas obligatoire">Créer un compte</a></li>
<li id="pt-login-private"><a accesskey="o" href="/w/index.php?title=Sp%C3%A9cial:Connexion&amp;returnto=Serveur+orangepi-raspberry+nextcloud+en+photovolta%C3%AFque+autonome" sort_order="2" title="Vous devez vous connecter pour utiliser ce wiki [o]">Se connecter</a></li> <hr style="border-bottom-style: solid;margin-top: 2px;margin-bottom: 2px"/>
<li id="pt-help-target"><a href="https://help.dokit.app/wiki/Main_Page" menu="user-sub-menu" sort_order="3" target="_blanck">Aide</a></li>
</ul>
</li>
</ul>
</div> <!-- navbar-right-aligned -->
</div><!-- /.navbar-collapse -->
</div>
</nav>
<!-- additionnal page header -->
<div id="additionnal-page-header">
<div class="container">
</div>
</div>
<!-- main content header -->
<div id="main-content-header">
<div class="container">
<div class="maincontent-header-head">
<h1 class="firstHeading" id="firstHeading">Serveur orangepi-raspberry nextcloud en photovoltaïque autonome</h1>
</div>
<div class="maincontent-header-tail">
<!-- Page Tools Tabs -->
<div class="page-tools-tabs smooth-scroll"><ul class="list-inline">
<li class="selected" id="ca-nstab-main"><a accesskey="c" class="selected" href="/wiki/Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome" title="Voir le contenu de la page [c]">Page</a></li>
<li><a count="3" href="#cs-comments">Commentaires</a><span class="counterTalk">3</span></li>
<li id="ca-history"><a accesskey="h" href="/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome&amp;action=history" title="Historique des versions de cette page [h]">Historique</a></li></ul>
</div>
<div class="header-right-aligned">
<div class="PageNetworkLinks">
<a class="UsersPagesLinksButton addAction" data-linkstype="star" data-page="Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome"><button class="doActionLabel"><span class=""><i class="fa fa-heart upl_icon"></i> <i class="fa fa-spinner fa-spin upl_loading" style="display:none"></i> Favoris</span></button></a><div class="dropdownParent"><a class="UsersPagesLinksButtonCounter addAction" data-linkstype="star" data-listid="1" data-page="Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome" href="https://wiki.lowtechlab.org/w/index.php?title=Sp%C3%A9cial:DisplayUsersList&amp;pageName=Serveur+orangepi-raspberry+nextcloud+en+photovolta%C3%AFque+autonome&amp;typeButton=star&amp;numPage=1"><button>1</button></a><div class="UsersListContent" id="boutonContent1"> <div class="usersPageLinksUsers row"><div class="col-md-4 col-sm-6 col-xs-12 UserListcard"><a href="/wiki/Utilisateur:Relaxmax"><div class="avatar"><a href="https://wiki.lowtechlab.org/images/avatars/default_ml.gif" rel="noopener noreferrer" target="_blank"><img alt="avatar" border="0" src="https://wiki.lowtechlab.org/images/avatars/default_ml.gif"/></a></div><span class="name">Maxime</span></a></div></div></div></div>
<a class="UsersPagesLinksButton addAction" data-linkstype="ididit" data-page="Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome"><button class="doActionLabel"><span class=""><i class="fa fa-hand-peace-o upl_icon"></i> <i class="fa fa-spinner fa-spin upl_loading" style="display:none"></i> Je l'ai fait !</span></button></a><div class="dropdownParent"><a class="UsersPagesLinksButtonCounter addAction" data-linkstype="ididit" data-listid="2" data-page="Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome" href="#"><button>0</button></a><div class="UsersListContent" id="boutonContent2"> <div class="usersPageLinksUsers row"></div></div></div>
</div>
<!-- page tools -->
<ul class="page-tools-dropdown">
<li class="page-tools-dropdown-tools" id="ca-formedit"><a accesskey="&amp;" href="/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome&amp;action=formedit" title="Modifier cette page avec un formulaire [&amp;]"><span class="glyphicon glyphicon-pencil"></span></a></li>
<li class="page-tools-dropdown-tools dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" href="#" title="Outils pour les pages"><span>...</span></a>
<!-- Content navigation -->
<ul class="p-contentnavigation dropdown-menu" id="p-contentnavigation">
<!-- namespaces -->
<!-- views -->
<li id="ca-pdfexport"><a href="/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome&amp;action=pdfexport&amp;format=single">Export PDF</a></li>
<li class="embed-button" id="ca-embed"><a class="embed-button" href="/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome&amp;embed=true">Intégrer ce tutoriel</a></li>
<li class="qrcode-button" id="ca-qrcode"><a class="qrcode-button" data-target="#qrcodeModal" data-toggle="modal" href="#">Générer un QR code</a></li>
<!-- NetworksLinks -->
</ul>
</li>
</ul>
</div> <!-- header-right-aligned -->
</div>
</div>
</div>
<div>
<div class="container">
<div class="siteNoticeArea row">
<div class="col-lg-12">
</div>
</div>
<div class="row">
<div class="col-lg-12">
<!-- start the content area -->
<div class="mw-body" id="content"><a id="top"></a>
<div class="mw-indicators" id="mw-indicators"></div>
<div id="mw-js-message" style="display:none;"></div>
<div id="bodyContent">
<!-- body text -->
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="fr"><div class="mw-parser-output"><p class="tuto-details-autor-revision noprint">Tutorial de <span class="tuto-details-author-box"><a class="name" href="/wiki/Utilisateur:Aurelpere"><span class="tuto-details-author-name">Aurelpere</span></a></span> | Catégories : <a class="new" href="/w/index.php?title=Energy&amp;action=edit&amp;redlink=1" title="Energy (page inexistante)">Énergie</a>, <a class="new" href="/w/index.php?title=Tools&amp;action=edit&amp;redlink=1" title="Tools (page inexistante)">Outils</a></p>
<p class="tuto-details-autor-revision print-only"><span class="tuto-details-author-box"><a class="name" href="/wiki/Utilisateur:Aurelpere"><span class="tuto-details-author-name">Aurelpere</span></a></span></p>
<div class="row firstPage">
<div class="col-md-5 col-sm-5 col-xs-12 fullWidthPrint">
<div class="tuto-main-image"><a class="image" data-thumbsrc="/images/thumb/e/e9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg/ia-213999d69d8ff5203536557442d98d30-px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg.png" href="https://wiki.lowtechlab.org/images/thumb/e/e9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg/ia-213999d69d8ff5203536557442d98d30-px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg.png" rel="noopener noreferrer" target="_blank"><img class="annotationlayer" data-file-height="450.16574585635" data-file-width="600" src="https://wiki.lowtechlab.org/images/thumb/e/e9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg/ia-213999d69d8ff5203536557442d98d30-px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg.png" style="filter: blur(5px)"/></a>
<div class="print-only pageurl"><a class="external free" href="https://wiki.lowtechlab.org/wiki/Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome" rel="nofollow">https://wiki.lowtechlab.org/wiki/Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome</a></div>
<div class="print-only lasteditdateinfo">Dernière modification le 16/11/2024 </div>
</div>
<div class="row tuto-details-box print-only">
<p><br/>
</p>
<div class="col-md-5">
<div class="tuto-items-container">
<div class="tuto-items-details-container">
<div class="tuto-items-details-container-left"><i class="fa fa-tachometer"></i> Difficulté</div>
<div class="tuto-items-details-container-right"><span class="propertyKey" style="display:none">Medium</span> Moyen</div>
</div>
<div class="tuto-items-details-container">
<div class="tuto-items-details-container-left"><i class="fa fa-clock-o"></i> Durée</div>
<div class="tuto-items-details-container-right">3 <span class="propertyKey" style="display:none">hour(s)</span>  heure(s)</div>
</div>
<div class="tuto-items-details-container"><div class="tuto-items-details-container-left"><i class="fa fa-money"></i>
 Coût</div><div class="tuto-items-details-container-right">165 EUR (€)
 </div></div>
</div>
</div>
<div class="col-md-7">
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Tutoriel pour mettre en place un serveur nextcloud (équivalent drive google mais libre et adapté à l'organisation collective) sur un ordinateur monocarte autonome (alimenté en photovoltaïque avec stockage)
<br/><br/>
Ce tutoriel n'est pas tout à fait "lowtech" en première approche dans la mesure où il s'agit d'informatique et de photovoltaique.
<br/><br/>
Cependant, il se veut le plus didactique possible et rejoint la philosophie lowtech de partager les savoirs faires, éviter la tech inaccessible par la rétention d'information, la complexification by design ou la dépendance propriétaire by design.
<br/><br/>
On donne aussi un outil de dimensionnement photovoltaïque avec quelques explication. A vous de dimensionner pour une informatique lowtech, qui ne fonctionne que sur une plage horaire calé sur les rythmes du soleil, cad qui respecte les temporalités humaines.
<br/><br/>
Nextcloud (service accessible sur framasoft ici : <a class="external free" href="https://www.frama.space/abc/fr/" rel="nofollow">https://www.frama.space/abc/fr/</a>) est un service assez cool pour s'organiser à plusieurs et permet de partager des fichiers, avoir un annuaire, un chat, de travailler en cooperation sur des fichiers libreoffice voire même de faire des visios.
On peut aussi imaginer des infokiosques mobiles sur ce principe.
<br/><br/>
Le tuto remet en question le marché des vpns, le photovoltaique avec stockage neuf et cher (en réalité le photovoltaique est devenu trop competitif face au pétrole et encore plus face au nucléaire!), et le marché des gafam et leur design de surveillance nocif pour la confiance et le lien social.
<br/><br/>
Les commandes sont celles pour un systeme debian
<br/><br/>
Enfin, le tuto est fait avec un modem 4G (et connexion filaire à un orange pi qui n'a pas de carte wifi par défaut), et mis a jour ce 10 avril pour raspberry pi connecté au "partage wifi" de votre téléphone. (voir etap 6 pour wifi en wpa3 et etap 16 pour wifi en wpa2)</p>
</div>
</div>
</div>
<div class="print-only printPageBreakBefore"></div>
<div class="col-md-7 col-sm-7 col-xs-12 fullWidthPrint">
<div class="tuto-details-box">
<p class="tuto-details-about-title noprint">Tutoriel pour mettre en place un serveur nextcloud (équivalent drive google mais libre et adapté à l'organisation collective) sur un ordinateur monocarte autonome (alimenté en photovoltaïque avec stockage)
<br/><br/>
Ce tutoriel n'est pas tout à fait "lowtech" en première approche dans la mesure où il s'agit d'informatique et de photovoltaique.
<br/><br/>
Cependant, il se veut le plus didactique possible et rejoint la philosophie lowtech de partager les savoirs faires, éviter la tech inaccessible par la rétention d'information, la complexification by design ou la dépendance propriétaire by design.
<br/><br/>
On donne aussi un outil de dimensionnement photovoltaïque avec quelques explication. A vous de dimensionner pour une informatique lowtech, qui ne fonctionne que sur une plage horaire calé sur les rythmes du soleil, cad qui respecte les temporalités humaines.
<br/><br/>
Nextcloud (service accessible sur framasoft ici : <a class="external free" href="https://www.frama.space/abc/fr/" rel="nofollow">https://www.frama.space/abc/fr/</a>) est un service assez cool pour s'organiser à plusieurs et permet de partager des fichiers, avoir un annuaire, un chat, de travailler en cooperation sur des fichiers libreoffice voire même de faire des visios.
On peut aussi imaginer des infokiosques mobiles sur ce principe.
<br/><br/>
Le tuto remet en question le marché des vpns, le photovoltaique avec stockage neuf et cher (en réalité le photovoltaique est devenu trop competitif face au pétrole et encore plus face au nucléaire!), et le marché des gafam et leur design de surveillance nocif pour la confiance et le lien social.
<br/><br/>
Les commandes sont celles pour un systeme debian
<br/><br/>
Enfin, le tuto est fait avec un modem 4G (et connexion filaire à un orange pi qui n'a pas de carte wifi par défaut), et mis a jour ce 10 avril pour raspberry pi connecté au "partage wifi" de votre téléphone. (voir etap 6 pour wifi en wpa3 et etap 16 pour wifi en wpa2)</p>
<div class="tuto-items-container">
<div class="tuto-items-details-container noprint">
<div class="tuto-items-details-container-left"><i class="fa fa-tachometer"></i> Difficulté</div>
<div class="tuto-items-details-container-right"><span class="propertyKey" style="display:none">Medium</span> Moyen</div>
</div>
<div class="tuto-items-details-container noprint">
<div class="tuto-items-details-container-left"><i class="fa fa-clock-o"></i> Durée</div>
<div class="tuto-items-details-container-right">3 <span class="propertyKey" style="display:none">hour(s)</span>  heure(s)</div>
</div>
<div class="tuto-items-details-container noprint"><div class="tuto-items-details-container-left"><i class="fa fa-money"></i>
 Coût</div><div class="tuto-items-details-container-right">165 EUR (€)</div></div>
<div class="tuto-items-languages noprint"><div class="mw-pt-languages noprint" dir="ltr" lang="fr"><div class="mw-pt-languages-label">Autres langues :</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-progress mw-pt-progress--complete" href="/wiki/Serveur_orangepi-raspberry_nextcloud_en_photovolta%C3%AFque_autonome/en" lang="en" title="Orangepi-raspberry pi nextcloud server (photovoltaics powered) (99% traduit)">English</a> • ‎<span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr">français</span></div></div></div>
<h2 class="print-only"><span class="mw-headline" id="Sommaire">Sommaire</span></h2>
<div class="tuto-items-details-container printTOC"><div class="tuto-items-details-container-left"><i class="fa fa-list-ol"></i></div><div class="toc" id="toc"><div class="toctitle" dir="ltr" lang="fr"><h2>Sommaire</h2></div>
<ul>
<li class="toclevel-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1"><a href="#Sommaire"><span class="tocnumber">2</span> <span class="toctext">Sommaire</span></a></li>
<li class="toclevel-1"><a href="#Introduction"><span class="tocnumber">3</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Étape_1_-_Materiel"><span class="tocnumber">4</span> <span class="toctext">Étape 1 - Materiel</span></a></li>
<li class="toclevel-1"><a href="#Étape_2_-_Installation_de_nextcloud_1/4"><span class="tocnumber">5</span> <span class="toctext">Étape 2 - Installation de nextcloud 1/4</span></a></li>
<li class="toclevel-1"><a href="#Étape_3_-_Installation_de_nextcloud_2/4"><span class="tocnumber">6</span> <span class="toctext">Étape 3 - Installation de nextcloud 2/4</span></a></li>
<li class="toclevel-1"><a href="#Étape_4_-_Installation_de_nextcloud_3/4"><span class="tocnumber">7</span> <span class="toctext">Étape 4 - Installation de nextcloud 3/4</span></a></li>
<li class="toclevel-1"><a href="#Étape_5_-_Installation_de_nextcloud_4/4"><span class="tocnumber">8</span> <span class="toctext">Étape 5 - Installation de nextcloud 4/4</span></a></li>
<li class="toclevel-1"><a href="#Étape_6_-_configuration_du_reseau_local_ethernet_ou_wifi"><span class="tocnumber">9</span> <span class="toctext">Étape 6 - configuration du reseau local ethernet ou wifi</span></a></li>
<li class="toclevel-1"><a href="#Étape_7_-_configuration_d_un_vpn_wireguard_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g"><span class="tocnumber">10</span> <span class="toctext">Étape 7 - configuration d'un vpn wireguard pour rendre accessible votre serveur depuis une box 4g ou un modem 4g</span></a></li>
<li class="toclevel-1"><a href="#Étape_8_-_configuration_d_un_vpn_openvpn_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g"><span class="tocnumber">11</span> <span class="toctext">Étape 8 - configuration d'un vpn openvpn pour rendre accessible votre serveur depuis une box 4g ou un modem 4g</span></a></li>
<li class="toclevel-1"><a href="#Étape_9_-_Rediriger_les_requetes_du_serveur_vpn_vers_le_orange_pi-raspberry_pi"><span class="tocnumber">12</span> <span class="toctext">Étape 9 - Rediriger les requetes du serveur vpn vers le orange pi-raspberry pi</span></a></li>
<li class="toclevel-1"><a href="#Étape_10_-_Nom_de_domaine_et_adresse_fixe"><span class="tocnumber">13</span> <span class="toctext">Étape 10 - Nom de domaine et adresse fixe</span></a></li>
<li class="toclevel-1"><a href="#Étape_11_-_Configuration_https_sur_serveur_gandi_vpn"><span class="tocnumber">14</span> <span class="toctext">Étape 11 - Configuration https sur serveur gandi vpn</span></a></li>
<li class="toclevel-1"><a href="#Étape_12_-_Configuration_https_sur_dietpi_si_vous_etes_branché_en_box"><span class="tocnumber">15</span> <span class="toctext">Étape 12 - Configuration https sur dietpi si vous etes branché en box</span></a></li>
<li class="toclevel-1"><a href="#Étape_13_-_Rendre_votre_serveur_nomade_et_autonome_énergétiquement_en_photovoltaique"><span class="tocnumber">16</span> <span class="toctext">Étape 13 - Rendre votre serveur nomade et autonome énergétiquement en photovoltaique</span></a></li>
<li class="toclevel-1"><a href="#Étape_14_-_Montage_et_test"><span class="tocnumber">17</span> <span class="toctext">Étape 14 - Montage et test</span></a></li>
<li class="toclevel-1"><a href="#Étape_15_-_Securisation_du_serveur"><span class="tocnumber">18</span> <span class="toctext">Étape 15 - Securisation du serveur</span></a></li>
<li class="toclevel-1"><a href="#Étape_16_-_Activer_le_wifi_lors_de_l_installation_(par_exemple_avec_un_raspberry)"><span class="tocnumber">19</span> <span class="toctext">Étape 16 - Activer le wifi lors de l'installation (par exemple avec un raspberry)</span></a></li>
<li class="toclevel-1"><a href="#Notes_et_références"><span class="tocnumber">20</span> <span class="toctext">Notes et références</span></a></li>
<li class="toclevel-1"><a href="#Commentaires"><span class="tocnumber">21</span> <span class="toctext">Commentaires</span></a></li>
</ul>
</div>
</div>
</div>
<div class="licence-detail noprint"><i class="fa fa-creative-commons"></i><span class="licence-detail-title">Licence :</span> Attribution (CC BY)</div>
</div>
</div>
</div>
<p><span class="propertyKey" style="display:none">debian, photovoltaique, nextcloud, ordinateur monocarte, orange pi</span>
<span class="propertyKey" style="display:none"></span>
<span class="propertyKey" style="display:none"></span>
<span class="propertyKey" style="display:none"></span>
</p>
<div class="noprint"></div>
<hr class="print-only printPageBreakAfter">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<div class="wf-intro">
<p>Tutoriel pour mettre en place un serveur nextcloud (équivalent drive google mais libre et adapté à l'organisation collective) sur un ordinateur monocarte autonome (alimenté en photovoltaïque avec stockage)
</p><p>Ce tutoriel n'est pas tout à fait "lowtech" en première approche dans la mesure où il s'agit d'informatique et de photovoltaique.
</p><p>Cependant, il se veut le plus didactique possible et rejoint la philosophie lowtech de partager les savoirs faires, éviter la tech inaccessible par la rétention d'information, la complexification by design ou la dépendance propriétaire by design.
</p><p>On donne aussi un outil de dimensionnement photovoltaïque avec quelques explication. A vous de dimensionner pour une informatique lowtech, qui ne fonctionne que sur une plage horaire calé sur les rythmes du soleil, cad qui respecte les temporalités humaines.
</p><p>Nextcloud (service accessible sur framasoft ici : https://www.frama.space/abc/fr/) est un service assez cool pour s'organiser à plusieurs et permet de partager des fichiers, avoir un annuaire, un chat, de travailler en cooperation sur des fichiers libreoffice voire même de faire des visios.
</p><p>On peut aussi imaginer des infokiosques mobiles sur ce principe.
</p><p>Le tuto remet en question le marché des vpns, le photovoltaique avec stockage neuf et cher (en réalité le photovoltaique est devenu trop competitif face au pétrole et encore plus face au nucléaire!), et le marché des gafam et leur design de surveillance nocif pour la confiance et le lien social.
</p><p>Les commandes sont celles pour un systeme debian
</p><p>Enfin, le tuto est fait avec un modem 4G (et connexion filaire à un orange pi qui n'a pas de carte wifi par défaut), et mis a jour ce 10 avril pour raspberry pi connecté au "partage wifi" de votre téléphone. (voir etap 6 pour wifi en wpa3 et etap 16 pour wifi en wpa2)
</p>
<br/>Voir <a class="external free" href="https://solar.lowtechmagazine.com/fr/" rel="nofollow">https://solar.lowtechmagazine.com/fr/</a> pour aller plus loin dans les approches "internet low tech" (notamment "Comment créer un Internet low-tech")</div>
<div class="Input-tabs Grey-Input-tabs">
<div class="tabber" id="tabber-defdb1ebf9cfcdfa94ee5246ba557bf7">
<div class="tabbertab" title="Outils &amp; Matériaux ">
<p class="mw-empty-elt">
</p><div class="wf-nav-tabs-inner"><div class="row">
<div class="col-xs-12 col-md-6 step-instructions">
<h3><span class="mw-headline" id="Matériaux">Matériaux</span></h3>
</div>
<div class="col-xs-12 col-md-6 step-instructions">
<h3><span class="mw-headline" id="Outils">Outils</span></h3>
<p>autonomie.ods 
</p>
</div>
</div>
</div><p class="mw-empty-elt"></p>
</div>
<div class="tabbertab" title="Fichiers">
<p class="mw-empty-elt">
</p><div class="attach-link-table newwin"><i class="fa fa-file"></i> <a class="internal" href="/images/d/d4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_autonomie_.ods" title="Serveur orangepi-raspberry nextcloud en photovolta que autonome autonomie .ods">Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_autonomie_.ods</a></div><p class="mw-empty-elt"></p>
</div></div>
</div>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_1_-_Materiel">Étape 1 - Materiel</span></h2>
<p>Les liens vers le materiel photovoltaïque utilisé sont dans le fichier autonomie.ods ( lisible avec libreoffice) attaché à ce tutoriel.
</p><p>- raspberry pi :
</p><p>42€ sur leboncoin
</p><p>-Orange pi :
</p><p>Carte utilisée: Orange pi 5
</p><p>ordinateur monocarte avec 4,8,16 ou 32 Go de ram
</p><p>Un processeur à 2,4Ghz ARM Cortex-A55
</p><p>Cette carte est compatible avec les disques nvme pcie 2.0 ssd 2242 ou 2230 (le pcie étant rétrocompatible cad que les 3.0, 4.0, 5.0 fonctionnent à vitesse réduite sur l'orange pi 5)
</p><p>Meme principe qu'ici <a href="/wiki/Sp%C3%A9cial:AjouterDonn%C3%A9es/Tutorial/Ordinateur_low-tech" title="Spécial:AjouterDonnées/Tutorial/Ordinateur low-tech">Ordinateur low-tech</a> mais un peu plus puissant et on peut y brancher un disque dur (pratique pour nextcloud qui est fait pour héberger des fichiers) et ca démarre tout seul sur clé usb.
</p><p>Prix:  143€ neuf sur aliexpress en version 16 Go au 2 août 2023
</p><p>En occasion leboncoin, on trouve plus facilement des raspberry aux alentours de 100€.
</p><p>Il est nécessaire d'acheter une petit boitier à 10€ (ou en fabriquer un ) en plus pour éviter que la carte soit à nue
</p><p>-Stockage/disque dur:
</p><p>Ici on utilise une clé usb Kingston 32Go et une carte nvme samsung de 512Go.
</p><p>On peut brancher une disque dur de plus grande capacité soit en usb, soit une carte nvme (nvme pcie 2.0 ssd 2242 ou 2230. compatible avec les pcie 3.0 4.0 et superieur mais la vitesse est réduite).
</p><p>Une carte nvme samsung 2242 de 500Go coute 50€ environ au 2 août 2023.
</p><p>-clé usb : 10€
</p><p>-cable rj45: 5€
</p><p>-Box internet ou modem 4G selon votre connection internet.
</p><p>-Panneau solaire: Ici on utilise un panneau flexible de 120W acheté 115€  neuf  mais on en trouve à 30€ d'occasion sur leboncoin équivalent en puissance.
</p><p>Note: Pour le besoin théorique. Voir fichier autonomie.ods
</p><p>-batterie de voiture usée: utiliser sa précédente batterie de voiture plomb acide lorsqu'elle commence à lacher quand il fait trop chaud!
</p><p>-convertisseur batterie 12/24V-usb 5V: 20€ evitez amazon si vous le pouvez)
</p><p>- regulateur pwm 30A: 30€ neuf si on ne prend pas de la marque
</p><p>- DRL (interupteur jour/nuit 13V): 1,5€ neuf
</p><p>(mot clé "Kit de feux de jour à LED pour voiture, contrôleur marche/arrêt automatique DRL")
</p><p>-cable electrique mc4: 20€
</p><p>Total prix d'occasion orangepi: 256,50€
</p><p>Total prix neuf orangepi: 431,50€
</p><p>Total prix d'occasion raspberry: 165€
</p><p>Voir fichier autonomie.ods
</p><p>- 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel1"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/1/15/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192859_778.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192859_778.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 192859 778.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/1/15/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192859_778.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192859_778.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/d/d4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192848_031.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192848_031.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 192848 031.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/d/d4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192848_031.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192848_031.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/3/3c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192924_391.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192924_391.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 192924 391.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/3/3c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192924_391.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192924_391.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/01/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192908_135.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192908_135.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 192908 135.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/0/01/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192908_135.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_192908_135.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/8/89/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171056_521.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171056_521.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 171056 521.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/8/89/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171056_521.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171056_521.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/4c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_DRL.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_DRL.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome DRL.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/4/4c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_DRL.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_DRL.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel1"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_2_-_Installation_de_nextcloud_1/4">Étape 2 - Installation de nextcloud 1/4</span></h2>
<p>1.Téléchargement de dietpi et préparation de la clé usb
</p><p>Pour l'installation, je vous conseille d'utiliser dietpi. L'interet de dietpi est notamment la legereté du systeme pour des ordinateurs monocartes, mais aussi l'installation automatique de logiciels libres par un menu relativement "user friendly". On peut mentionner parmis tous les logiciels installables automatiquement au démarrage du systeme (<a class="external free" href="https://dietpi.com/dietpi-software.html" rel="nofollow">https://dietpi.com/dietpi-software.html</a>) des applis de domotique, interessante pour économiser de l'énergie en fonction de la meteo, mais aussi les relais "tor" pour contribuer au réseau relativement anonymisant tor, interessant pour les "éco terroristes" que nous sommes.
</p><p>Il faut aussi mentionner "younohost" (<a class="external free" href="https://yunohost.org/fr" rel="nofollow">https://yunohost.org/fr</a>) qui est français et qui fait le même boulot que dietpi pour les raspberry et qui est aussi "user friendly" sinon plus. Je n'ai pas encore testé yunohost car j'avais mis de côté le raspberry pi suite à des bugs de souris trop étranges. Mes recherches pour éviter les bugs de souris trop étranges n'ayant pas abouti positivement (purism, odroid, raspberry, orangpi, macbook, windows, voir section sécurité), je ne peux que faire état de ce que j'ai effectivement essayé.
</p><p><a class="external free" href="https://dietpi.com/#download" rel="nofollow">https://dietpi.com/#download</a>
</p><p>( pour younohost : <a class="external free" href="https://yunohost.org/fr/install/hardware:arm" rel="nofollow">https://yunohost.org/fr/install/hardware:arm</a>)
</p><p>Selectionner votre ordinateur monocarte (orange pi dans le cas présent) puis telecharger
</p><p>Dezipper l'archive obtenue.
</p><p>Utiliser ensuite balena etcher pour créer une clé usb bootable pour installer dietpi sur votre ordinateur monocarte (orange pi 5 dans le cas présent mais ca fonctionne pareil sur d'autres ordinateurs monocartes).
</p><p><a class="external free" href="https://etcher.balena.io/#download-etcher" rel="nofollow">https://etcher.balena.io/#download-etcher</a>
</p><p>Double cliquer sur le fichier téléchargé
</p><p>Selectionner l'image de dietpi téléchargée, selectionner votre clé usb, cliquer sur flash.
</p><p>Il ne vous reste plus qu'à brancher la clé usb sur le orangepi et il bootera automatiquement sur la clé usb.
</p><p>Pour un raspberry pi, on utilise une carte sd mais on peut configurer le boot usb également (voir ici : <a class="external free" href="https://makerhelp.fr/booter-un-raspberry-pi-4-sur-un-disque-dur-ou-un-ssd-en-usb/" rel="nofollow">https://makerhelp.fr/booter-un-raspberry-pi-4-sur-un-disque-dur-ou-un-ssd-en-usb/</a>).
</p><p>2. Installation de nextcloud
</p><p>Allumer votre orangepi/raspberrypi avec la clé usb branchée.
</p><p>Le login par défaut au démarrage est root et le mot de passe dietpi.
</p><p>Suivre les menus que vous propose dietpi au premier démarrage pour installer le service nextcloud. C'es très facile, c'est en anglais et tout est automatisé. J'ai mis les images des menus à sélectionner pour l'installation de nextcloud dans cette etape et les étapes 3 à 6.
</p><p>Vous pouvez vous déplacer dans les menus au clavier avec les fleches et la touche tab.
</p><p>Selectionner avec espace et valider avec entree.
</p><p>Voir images des étapes 3 à  6 pour le déroulement de l'installation et les entrées à sélectionner.
</p><p><br/>
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel2"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/7/75/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 10.png" data-file-height="438" data-file-width="859" height="408" src="https://wiki.lowtechlab.org/images/thumb/7/75/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/3/3b/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 02.png" data-file-height="537" data-file-width="838" height="513" src="https://wiki.lowtechlab.org/images/thumb/3/3b/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/c/c1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_01.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_01.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 01.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/c/c1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_01.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_01.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/3/31/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 02.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/3/31/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_02.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/a/af/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_03.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_03.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 03.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/a/af/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_03.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_03.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/8/82/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_04.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_04.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 04.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/8/82/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_04.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_04.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel2"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_3_-_Installation_de_nextcloud_2/4">Étape 3 - Installation de nextcloud 2/4</span></h2>
<p>Voir images 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel3"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/9/99/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_05.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_05.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 05.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/9/99/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_05.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_05.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/4f/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_06.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_06.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 06.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/4/4f/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_06.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_06.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/40/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_07.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_07.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 07.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/4/40/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_07.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_07.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/0c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_08.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_08.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 08.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/0/0c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_08.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_08.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/1/10/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_09.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_09.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 09.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/1/10/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_09.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_09.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/8/87/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 10.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/8/87/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_10.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel3"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_4_-_Installation_de_nextcloud_3/4">Étape 4 - Installation de nextcloud 3/4</span></h2>
<p>Voir images 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel4"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/f/f9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_11.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_11.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 11.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/f/f9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_11.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_11.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_12.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_12.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 12.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_12.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_12.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/7/7e/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_13.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_13.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 13.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/7/7e/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_13.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_13.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/0c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_14.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_14.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 14.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/0/0c/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_14.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_14.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/b/b4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_15.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_15.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 15.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/b/b4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_15.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_15.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/5/54/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_16.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_16.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 16.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/5/54/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_16.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_16.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel4"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_5_-_Installation_de_nextcloud_4/4">Étape 5 - Installation de nextcloud 4/4</span></h2>
<p>Voir images 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel5"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/a/a7/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_17.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_17.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 17.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/a/a7/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_17.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_17.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/2/26/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_18.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_18.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 18.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/2/26/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_18.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_18.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/f/f7/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_19.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_19.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 19.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/f/f7/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_19.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_19.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_20.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_20.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 20.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_20.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_20.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/e/eb/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_21.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_21.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 21.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/e/eb/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_21.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_21.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel5"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel5"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel5"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel5"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel5"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-oneimage">
<h2><span class="mw-headline" id="Étape_6_-_configuration_du_reseau_local_ethernet_ou_wifi">Étape 6 - configuration du reseau local ethernet ou wifi</span></h2>
<p><u><b>Si vous n'avez pas de box et que vous avez un orangepi ou un raspberrypi et que vous voulez vous connecter à un wifi (par exemple le wifi d'un smartphone en partage de connexion)</b></u>
</p><p>Dietpi fournit un utilitaire pour configurer automatiquement le wifi qui fonctionne sur raspberry. Chez moi ca ne fonctionne que si le réseau est en wpa2. Si vous voulez activer le WPA3 ou si vous voulez configurer votre wifi à la main, voici les étapes à suivre.
</p><p>Linux est un peu compliqué pour la gestion des réseaux. Il existe une multitude de programmes permettant de gérer les réseaux (networking, network interfaces, ifup, wpa_supplicant, network_manager, ifconfig, ip...). 
</p><p>Si vous vous y connaissez je vous laisse choisir ce qui vous convient le mieux. 
</p><p>Sinon, on utilisera les programmes installés par défaut dans dietpi pour la gestion des interfaces wifi : wpa_supplicant et dhclient.  
</p><p>Commencer par brancher un adaptateur usb wifi à votre orangepi ou verifier que votre adaptateur
wifi sur votre raspberry pi est bien détecté. 
</p><p>Sur un orangepi: verifier que l'adaptateur est bien détecté en tapant     
</p>
<pre>lsusb</pre>
<p>Cette commande va lister les périphériques usb et vous devriez voir votre clé usb wifi dans la liste.
Verifier ensuite que les drivers de votre clé ont bien été chargés en tapant: 
</p>
<pre>dmesg | grep usb</pre>
<p>ou pour lire tous les pilotes chargés par linux en tapant 
</p>
<pre>dmesg | less</pre>
<p>Vous pouvez trouver à cette adresse une liste d'adaptateur usb qui fonctionnent nativement sous linux : 
<a class="external free" href="https://github.com/morrownr/USB-WiFi/blob/main/home/USB_WiFi_Adapters_that_are_supported_with_Linux_in-kernel_drivers.md" rel="nofollow">https://github.com/morrownr/USB-WiFi/blob/main/home/USB_WiFi_Adapters_that_are_supported_with_Linux_in-kernel_drivers.md</a>
</p><p>Sur un orange pi ou raspberry pi : taper la commande 
</p>
<pre>ip a</pre>
<p>Vous devriez voir votre adaptateur wifi sous le nom d'interface wlan0.
On supposera dans la suite du tuto que le nom de l'interface est wlan0.
Si ce n'est pas le cas, remplacer wlan0 par le nom de votre interface. 
</p><p>Nou allons vérifier que votre interface est bien déclarée. Ouvrir le fichier
/etc/network/interfaces en tapant:
</p>
<pre>nano /etc/network/interfaces</pre>
<p>Vous devez avoir les lignes suivantes. Si elles n'y sont pas ajouter les.
</p>
<pre>auto wlan0
iface wlan0 inet dhcp
  wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<p>Nous allons maintenant configurer wpa_supplicant pour activer la connection wifi.
</p><p>Pour cela, editer le fichier /etc/wpa_supplicant/wpa_supplicant.conf en tapant les 
commandes suivantes:
(remplacer votre.ssid par le nom que vous donnez à votre reseau wifi
et votre.password par votre mot de passe)
</p>
<pre>echo "ctrl_interface=/run/wpa_supplicant" | sudo tee /etc/wpa_supplicant/wpa_supplicant.conf
echo "ap_scan=1" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "update_config=1" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "network={" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo 'ssid="votre.ssid"' | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "scan_ssid=1" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "proto=WPA RSN" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<p>Maintenant, la configuration differe si votre wifi est un wifi WPA2 ou WPA3.
</p><p>Si cest un wpa2, ajouter:
</p>
<pre>echo "key_mgmt=WPA-PSK | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo 'psk="votre.password"' | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "}" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<p>Si cest un wpa3, ajouter: 
</p>
<pre>echo "key_mgmt=SAE | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo 'sae_password="votre.password"' | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "ieee80211w=2" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
echo "}" | sudo tee -a /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<p>Lancer maintenant wpa_supplicant avec les commandes: 
</p>
<pre>export PATH="/usr/sbin:$PATH"
sudo wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
<p>Lancer ensuite dhclient pour obtenir une ip sur votre reseau:
</p>
<pre>sudo dhclient wlan0
</pre>
<p>Verifier que vous etes connecté:
</p>
<pre>curl google.com
</pre>
<p>Voilà vous êtes connecté.
</p><p>Si ca ne fonctionne pas bien chez vous, je vous conseille les liens suivants pour débugguer ou comprendre mieux à quoi servent ces commandes:
<a class="external free" href="https://wiki.archlinux.org/title/Wpa_supplicant" rel="nofollow">https://wiki.archlinux.org/title/Wpa_supplicant</a>
<a class="external free" href="https://doc.ubuntu-fr.org/wifi_ligne_de_commande" rel="nofollow">https://doc.ubuntu-fr.org/wifi_ligne_de_commande</a>
<a class="external free" href="https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant" rel="nofollow">https://www.linuxbabe.com/command-line/ubuntu-server-16-04-wifi-wpa-supplicant</a>
</p><p><br/>
Pour automatiser la connection au démarrage de l'ordinateur:
</p>
<pre>sudo cp /lib/systemd/system/wpa_supplicant.service /etc/systemd/system/wpa_supplicant.service
sudo nano /etc/systemd/system/wpa_supplicant.service
</pre>
<p>Votre fichier doit ressembler à cela:
</p>
<pre>[Unit]
Description=WPA Supplicant
Before=network.target
After=dbus.service
Wants=network.target
IgnoreOnIsolate=true

[Service]
Type=dbus
BusName=fi.w1.wpa_supplicant1
ExecStart=/sbin/wpa_supplicant -u -s -c /etc/wpa_supplicant/wpa_supplicant.conf -i wlan0
Group=netdev
RuntimeDirectory=wpa_supplicant
RuntimeDirectoryMode=0750
Restart=always

[Install]
WantedBy=multi-user.target
</pre>
<p>Lancer ensuite la commande pour automatiser le demarrage du service au boot:
</p>
<pre>sudo systemctl enable wpa_supplicant.service</pre>
<p>Editer ensuite le service dhclient pour automatiser son demarrage:
</p>
<pre>sudo nano /etc/systemd/system/dhclient.service</pre>
<p>Ajouter le texte suivant : 
</p>
<pre>[Unit]
Description= DHCP Client
Before=network.target

[Service]
Type=forking
ExecStart=/sbin/dhclient wlan0 -v
ExecStop=/sbin/dhclient wlan0 -r
Restart=always

[Install] 
WantedBy=multi-user.target
</pre>
<p>puis lancer la commande:
</p>
<pre>sudo systemctl enable dhclient.service</pre>
<p><br/>
</p><p><b><u>Si vous avez une box:</u></b>
</p><p>Brancher le orangepi ou le raspberry pi à votre box internet 
</p><p>(avec un cable rj45 pour le orange pi qui n'a pas le wifi par défaut, avec un cable rj45 ou en wifi pour votre raspberry pi)
</p><p><br/>
Pour obtenir l'ip de votre dietpi ou raspberry pi, taper la commande suivante:
</p><p><b>ip a</b>
</p><p>L'adresse ip s'affiche  (192.168.2.2 sur l'image jointe)
</p><p>Verifier que votre serveur est accessible depuis un autre ordinateur connecté à votre box ou routeur connecté au modem 4g ou réseau wifi en tapant dans la barre de votre navigateur (en remplacant adresse_ip par l'adresse trouvée avec la commande ip a)
</p><p><b>http://adresse_ip/nextcloud/</b>
</p><p><br/>
<b><u>Rendre votre réseau local accessible depuis internet:</u></b>
</p><p>Si vous n'avez pas de box internet (<b>reseau wifi de votre telephone ou modem 4g ou box 4g, se reporter aux etapes 7 et 8</b>)  
</p><p>Si vous avez une box internet:   
</p><p>Pour rendre votre dietpi accessible depuis internet, il faut aller dans la configuration de votre box et 
</p><p>dans la section "NAT" "Port Forwarding" mettre le port 80 et renseigner l'ip trouvée précedemment ainsi que le port 443 et renseigner l'ip trouvée précédemment également. 
</p><p>Je n'ai pas de box donc je n'ai pas pu vous faire de screenshot mais vous trouverez des ressources sur internet pour cela. Par exemple <a class="external free" href="https://pratiquepc.fr/ouvrir-des-ports-sur-une-livebox/" rel="nofollow">https://pratiquepc.fr/ouvrir-des-ports-sur-une-livebox/</a>
</p><p><br/>
</p><p><br/>
</p><p><br/>
<b><u>Si vous voulez vous connecter en ssh à votre serveur dietpi depuis un autre ordinateur:</u></b>
</p><p><br/>
Pour se connecter en ssh sans login avec dropbear au orange pi/raspberry pi
</p><p>copier votre clé publique ssh dans le fichier authorized_keys 
</p><p>placé dans ~/.ssh/authorized_keys
</p><p>ne pas oublier de faire un chmod 0600 sur ce fichier
</p><p><br/>
Pour le orange pi, qui utilise dropbear:
</p><p>ajouter la ligne DROPBEAR_EXTRA_ARGS="-s" 
</p><p>au fichier /etc/default/dropbear
</p><p><br/>
</p><p>Vous pouvez ensuite trouver votre ip publique (celle accessible par tous sur internet) en tapant depuis votre console dietpi 
</p><p><b>curl ifconfig.me</b>
</p><p>(si curl n'est pas installé lancer la commande apt update &amp;&amp; apt install curl)
</p><p><br/>
Une fois la configuration NAT/Port Forwarding effectué, tester si nextcloud est accessible sur internet en rentrant l'adresse suivante dans la barre de votre navigateur internet:
</p><p><b><a class="external text" href="http://adresse_ip_publique%3E/nextcloud/" rel="nofollow">http://adresse_ip_publique/nextcloud/</a></b>
</p><p>(remplacer adresse_ip_publique par l'adresse trouvée précédemment
</p><p><br/>
Attention les navigateurs peuvent être un peu capricieux sans le https, si vous voulez tester en sortant du diagnostic une possible erreur navigateur taper dans un terminal linux : 
</p><p>curl <b><a class="external text" href="http://adresse_ip_publique%3E/nextcloud/" rel="nofollow">http://adresse_ip_publique/nextcloud/</a></b>
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel6"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/4/47/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_change-ubuntu-ip-address-step-7.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome change-ubuntu-ip-address-step-7.jpg" data-file-height="363" data-file-width="734" height="363" src="https://wiki.lowtechlab.org/images/4/47/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_change-ubuntu-ip-address-step-7.jpg" width="734"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<p><br/>
</p><p><br/>
</p><p><br/>
</p>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span id="Étape_7_-_configuration_d'un_vpn_wireguard_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g"></span><span class="mw-headline" id="Étape_7_-_configuration_d_un_vpn_wireguard_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g">Étape 7 - configuration d'un vpn wireguard pour rendre accessible votre serveur depuis une box 4g ou un modem 4g</span></h2>
<p>[ATTENTION, cette section remet en question le marché des vpns!!]
</p><p>Cette section n'est utile que pour les connections 4G ou en wifi sur téléphone (4G ou 5G)
</p><p>La 4g a l'avantage d'être mobile, avec une tres faible consommation du modem autour de 5W, et vous pouvez trouver des modems 4g sans wifi pour limiter la surface d'attaque de votre serveur (exemple netgear lm1200 autour de 150€).
</p><p><b>qu'est ce qu'un vpn?</b>
</p><p>Les VPN sont principalement connus pour les "clients" vpn. C'est à dire que vous l'utilisez sur votre ordinateur pour vous "anonymiser".
</p><p>Le vpn est en fait un tunnel entre votre ordinateur et un ordinateur distant à partir duquel partent vos requetes vers internet. Tout votre traffic en direction d'internet va passer par ce tunnel.
</p><p>Internet pense ainsi que vos requetes proviennent de cet ordinateur distant. C'est à dire que votre ip publique devient celle de cet ordinateur distant.
</p><p>Votre fournisseur d'accès ne voit que le traffic entre votre ordinateur et cet ordinateur distant, ce qui vous "anonymise".
</p><p>En réalité, vous êtes anonyme vis à vis de votre fournisseur d'acces à internet, mais vous ne faites que déplacer la confiance vers votre fournisseur vpn qui lui peut voir votre traffic.
</p><p>Le vpn a aussi d'autres utilités comme vous donner accès à des sites qui filtrent l'accès selon la "provenance" de votre adresse ip publique.
</p><p>Vous pouvez tout à fait créer votre propre serveur vpn, et dans notre cas, ce serveur vpn permettra de rediriger les requetes internet faites sur ce serveur vers votre orange pi/raspberry pi en passant par le tunnel (dans l'autre sens que lorsque vous l'utilisez en tant que client pour accéder à internet).
</p><p>Et nous allons voir comment.
</p><p><b>Créer un serveur sur gandi.net</b>
</p><p>Créer un compte sur gandi.net, puis créer un serveur dans gandicloud vps. Voir les images jointes pour la création en 3 clics du serveur qui coute 5€/mois.
</p><p>Pour créer une clé ssh et se logger voir
</p><p>https://docs.gandi.net/fr/hebergement_web/connexion/cle_ssh.html
</p><p>https://docs.gandi.net/fr/cloud/operations_courantes/connexion_serveur.html
</p><p>Une fois loggé sur le serveur,
</p><p>lancer la commande pour installer wireguard et les dépendances nécessaires
</p>
<blockquote><p>sudo apt update &amp;&amp; sudo apt install wireguard resolvconf iptables nano -y</p></blockquote>
<p>Lancer la même commande sur votre orange pi/raspberry pi.
</p><p>lancer ensuite les commandes suivantes sur votre 
serveur et sur le orange pi/raspberry pi pour creer les cles privés et publiques de wireguard 
</p>
<blockquote><p>sudo mkdir -p /etc/wireguard
</p><p><br/><br/>
sudo sh -c 'wg genkey <span>|</span> (umask 0077 &amp;&amp; tee /etc/wireguard/private_key) <span>|</span> wg pubkey &gt; /etc/wireguard/public_key'
</p>
</blockquote>
<p>Afficher la clé publique sur votre orange pi/raspberry pi en tapant
</p>
<blockquote><p>sudo cat /etc/wireguard/public_key</p></blockquote>
<p>Afficher egalement la clé publique sur votre serveur en tapant
</p>
<blockquote><p>sudo cat /etc/wireguard/public_key</p></blockquote>
<p>Entrer ensuite les commandes suivantes pour créer un fichier de configuration /etc/wireguard/wg0.conf sur votre serveur:
</p><p>Taper les lignes suivantes (remplacer cle_publique_du_orange_pi_ou_raspberry_pi par celle affichée précédemment) :
</p>
<blockquote><p>echo "[Interface]" <span>|</span> sudo tee /etc/wireguard/wg0.conf
</p><p><br/><br/>
echo "Address=10.10.0.1/24" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "PrivateKey=$(sudo cat /etc/wireguard/private_key)" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "ListenPort=12345" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "[Peer]" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "PublicKey=cle_publique_du_orange_pi_ou_raspberry_pi" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
</p><p>
echo "AllowedIPs=10.10.0.2/32" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf</p></blockquote>
<p>Entrer ensuite la commande suivante sur le serveur pour lancer et activer le service vpn
</p>
<blockquote><p>sudo systemctl start wg-quick@wg0
</p><p><br/><br/>
</p><p>
sudo systemctl enable wg-quick@wg0</p></blockquote>
taper ensuite <blockquote><p>curl ifconfig.me</p></blockquote> pour obtenir l'ip publique de votre serveur
<p>Taper les lignes suivantes (remplacer cle_publique_du_serveur par celle affichée précédemment et ip_publique_du_serveur par celle affichée précédemment) :
</p>
<blockquote><p>echo "[Interface]" <span>|</span> sudo tee /etc/wireguard/wg0.conf
</p><p><br/><br/>
echo "Address=10.10.0.2/24" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "PrivateKey=$(sudo cat /etc/wireguard/private_key)" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "[Peer]" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "PublicKey=cle_publique_du_serveur" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
echo "AllowedIPs=10.10.0.1/32" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf
<br/><br/>
</p><p>
echo "Endpoint=ip_publique_du_serveur:12345" <span>|</span> sudo tee -a /etc/wireguard/wg0.conf</p></blockquote>
<p>La ligne AllowedIPS définit les ips de destination (sortantes) qui passeront par le tunnel et seront chiffrées mais aussi les ips entrantes autorisées.
Si vous souhaitez configurer votre "client" (orange pi ou raspberry pi) pour utiliser le vpn pour accéder à internet, remplacer AllowedIPs=10.10.0.1/32 par AllowedIPs=0.0.0.0/0
En définissant 0.0.0.0/0 on indique que tout le traffic du orange pi/raspberry pi passera par le tunnel wireguard et toutes les ip entrantes seront autorisées.
Il est alors important de bien configurer son firewall sur le serveur!
</p><p>Pour vérifier que wireguard fonctionne, lancer la commande suivante sur le serveur vpn:
</p>
<blockquote><p>ping 10.10.10.2 -c 4</p></blockquote>
<p>Le ping doit fonctionner
</p><p>Ca ne fonctionne de façon systématique chez moi, mais je suis sur que si vous essayez loin de l'oeil de sauron votre météo numérique ira mieux que la mienne, et ca fonctionnera chez vous ;) 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel7"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_1.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome gandi 1.png" data-file-height="771" data-file-width="1908" height="323" src="https://wiki.lowtechlab.org/images/thumb/0/02/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_1.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/1/10/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_2.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_2.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome gandi 2.png" data-file-height="859" data-file-width="1029" height="668" src="https://wiki.lowtechlab.org/images/thumb/1/10/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_2.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi_2.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel7"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel7"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<p><br/>
</p><p><br/>
</p>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span id="Étape_8_-_configuration_d'un_vpn_openvpn_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g"></span><span class="mw-headline" id="Étape_8_-_configuration_d_un_vpn_openvpn_pour_rendre_accessible_votre_serveur_depuis_une_box_4g_ou_un_modem_4g">Étape 8 - configuration d'un vpn openvpn pour rendre accessible votre serveur depuis une box 4g ou un modem 4g</span></h2>
<p>Dans le cas où ca ne fonctionnerait pas avec wireguard, vous pouvez utiliser openvpn, (qui est configurable sans ligne de commande à la souris!). 
</p><p><b><u>Configuration du serveur proxy gandi.net:</u><br/></b>
Pour cela suivez les étapes suivantes (<a class="external free" href="https://openvpn.net/vpn-server-resources/installing-openvpn-access-server-on-a-linux-system/" rel="nofollow">https://openvpn.net/vpn-server-resources/installing-openvpn-access-server-on-a-linux-system/</a>):
</p><p>Update du 27/11/23: il n'y a pas de version bookworm d'openvpn-as disponible pour debian. Pensez à installer debian version bullseye
</p>
<blockquote><p>apt update &amp;&amp; apt -y install ca-certificates wget net-tools gnupg
</p><p><br/>
</p><p><br/>
wget <a class="external free" href="https://as-repository.openvpn.net/as-repo-public.asc" rel="nofollow">https://as-repository.openvpn.net/as-repo-public.asc</a> -qO /etc/apt/trusted.gpg.d/as-repository.asc
<br/>
</p><p><br/>
echo "deb [arch=amd64 signed-by=/etc/apt/trusted.gpg.d/as-repository.asc] <a class="external free" href="http://as-repository.openvpn.net/as/debian" rel="nofollow">http://as-repository.openvpn.net/as/debian</a> bullseye main" <span>|</span> sudo tee  /etc/apt/sources.list.d/openvpn-as-repo.list
<br/>
</p><p><br/>
apt update &amp;&amp; apt -y install openvpn-as
<br/>
</p><p><br/>
</p>
</blockquote>
<p>Si les commandes ci-dessus ne fonctionnent pas, il est possible qu'openvpn ait mis a jour des éléments. Merci alors de se reporter à <a class="external free" href="https://openvpn.net/access-server/" rel="nofollow">https://openvpn.net/access-server/</a>, s'inscrire, et suivre les instructions d'installation
</p><p>Rendez vous ensuite sur la page de configuration du serveur: https://&lt;adresse_ip_du_serveur&gt;
</p><p>login:openvpn
</p><p>password: indiqué dans le log de l'installation
</p><p><br/><br/>
screen 1: 
go to admin panel
reentrer vos login/password
</p><p>screen2:
Network settings: Activer UDP seulement et port 1194 puis save settings
</p><p>screen3:
VPN Settings: remplir les champs comme indiqué sur le screenshot puis save settings
</p><p>screen 4 et 5: 
User Management/User permission : changer le mot de passe dans local password et entrer l'adresse ip fixe du screeenshot puis save settings.
Puis update running server.
<br/>
Pour vous reconnecter à l'interface de configuration:
<a class="external free" href="https://adresse_ip_du_serveur:943" rel="nofollow">https://adresse_ip_du_serveur:943</a>
</p><p>screen 6:
User Management/User profile: cliquer sur new profile
puis Cliquer sur create profile.
<br/><br/>
Renommer le fichier de configuration téléchargé en openvpn.conf
Ouvrir le fichier de configuration et trouver la ligne auth-user-pass et la remplacer par la ligne suivante:
</p>
<blockquote><p>auth-user-pass auth.txt</p></blockquote>
<p><b><u>Configuration du orangepi/raspberrypi</u></b>
<br/><br/><br/>
Lancer ensuite sur le orangepi raspberry pi: 
</p>
<blockquote><p>sudo apt update &amp;&amp; sudo apt install openvpn</p></blockquote>
<p><br/>
Copier le fichier de configuration télécharger vers /etc/openvpn/client/openvpn.conf sur votre orangepi/raspberry pi
<br/><br/>
creer un fichier auth.txt dans /etc/openvpn/client/ dans lequel vous copiez les deux lignes suivantes en remplacant password par votre mot de passe: 
<br/><br/>
</p>
<blockquote>
<p>openvpn<br/>
password
</p>
</blockquote>
<p><br/><br/>
Lancer ensuite le client vpn:
</p>
<blockquote><p>sudo systemctl start openvpn-client@openvpn</p></blockquote>
<p>Si vous voulez que le client se connecte automatiquement au lancement de la machine taper
<br/><br/>
</p>
<blockquote><p>sudo systemctl enable openvpn-client@openvpn</p></blockquote>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel8"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/2/25/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen1.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen1.png" data-file-height="858" data-file-width="1308" height="525" src="https://wiki.lowtechlab.org/images/thumb/2/25/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen1.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/d/d6/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen2.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen2.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen2.png" data-file-height="962" data-file-width="1910" height="403" src="https://wiki.lowtechlab.org/images/thumb/d/d6/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen2.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen2.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/8/8b/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen3.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen3.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen3.png" data-file-height="962" data-file-width="1910" height="403" src="https://wiki.lowtechlab.org/images/thumb/8/8b/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen3.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen3.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/c/c1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen4.png" data-file-height="962" data-file-width="1910" height="403" src="https://wiki.lowtechlab.org/images/thumb/c/c1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/7/7a/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.1.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen4.1.png" data-file-height="962" data-file-width="1910" height="403" src="https://wiki.lowtechlab.org/images/thumb/7/7a/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.1.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen4.1.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/4d/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen6.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen6.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome ovpnscreen6.png" data-file-height="962" data-file-width="1910" height="403" src="https://wiki.lowtechlab.org/images/thumb/4/4d/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen6.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_ovpnscreen6.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel8"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-md-12 step-instructions">
<h2><span class="mw-headline" id="Étape_9_-_Rediriger_les_requetes_du_serveur_vpn_vers_le_orange_pi-raspberry_pi">Étape 9 - Rediriger les requetes du serveur vpn vers le orange pi-raspberry pi</span></h2>
<p>Pour rediriger les requetes sur le serveur vers le orange pi / raspberry pi, on met en place un serveur logiciel web nginx:
</p>
<blockquote><p>sudo apt install nginx -y</p></blockquote>
<p>On ouvre ensuite le fichier de configuration de ce logiciel serveur web:
</p>
<blockquote><p>sudo nano /etc/nginx/sites-enabled/default</p></blockquote>
<p>Remplacer le contenu du fichier par ce qui suit:
</p>
<blockquote><p>server {
</p><p>listen 80;
</p><p>server_name localhost;
</p><p>server_tokens off;
</p><p>add_header Permissions-Policy "accelerometer=(),autoplay=(),camera=(),display-capture=(),document-domain=(),encrypted-media=(),fullscreen=(),geolocation=(),gyroscope=(),magnetometer=(),microphone=(),midi=(),payment=(),picture-in-picture=(),publickey-credentials-get=(),screen-wake-lock=(),sync-xhr=(self),usb=(),web-share=(),xr-spatial-tracking=()";
</p><p>add_header Strict-Transport-Security "max-age=31536000 ; includeSubDomains";
</p><p>add_header X-Frame-Options "SAMEORIGIN";
</p><p>add_header X-Content-Type-Options nosniff;
</p><p>add_header Content-Security-Policy "script-src 'self';";
</p><p>add_header X-Permitted-Cross-Domain-Policies none;
</p><p>add_header Referrer-Policy no-referrer;
</p><p>add_header Clear-Site-Data "cache,cookies,storage";
</p><p>location / {
</p><p>proxy_pass http://10.10.0.2;
</p><p>proxy_set_header Host $host;
</p><p>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</p><p>proxy_set_header X-Real-IP $remote_addr;
</p><p>proxy_set_header X-Forwarded-Proto $scheme;
</p><p>client_max_body_size 20M;
</p><p>limit_except GET HEAD POST {deny all;}
</p><p>}
</p><p>
}</p></blockquote>
<p>Nginx va rediriger les requetes faites sur l'ip publique de votre serveur vers le nextcloud de votre orange pi / raspberry pi (ligne proxy_pass http://10.10.0.2;)
</p><p>Vous pouvez tester si cela fonctionne en vous rendant sur la page:
</p><p><a class="external free" href="http://ip_publique_de_votre_serveur_gandi/nextcloud/" rel="nofollow">http://ip_publique_de_votre_serveur_gandi/nextcloud/</a>
</p><p>(notez bien que c'est en http et pas https)
</p><p>Attention, de nombreux navigateurs n'acceptent plus tres bien les redirections en http, voir la section https pour configurer le https (il faudra prendre un nom de domaine).
</p>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-oneimage">
<h2><span class="mw-headline" id="Étape_10_-_Nom_de_domaine_et_adresse_fixe">Étape 10 - Nom de domaine et adresse fixe</span></h2>
<p>Le nom de domaine est l'adresse dans votre navigateur : par exemple lowtechlab.org.
</p><p>Il vous permet de rendre votre serveur accessible plus facilement avec une adresse facilement memorisable. Il ne fait qu'associer le nom de domaine à l'adresse ip de votre serveur vpn ou l'adresse ip de votre box.
</p><p>Que vous enregistriez un nom de domaine pour rediriger vers votre adresse ip ou pas (c'est nécessaire pour avoir le https cependant), il faut noter que par défaut, les fournisseurs d'accès vous octroient une  adresse ip différente à chaque connexion.
</p><p>Si vous souhaitez une adresse ip fixe, il faut en faire la demande à votre fournisseur d'accès. Ce n'est malheureusement plus très répandue dans les offres grands publics. Orange propose à la place un "DynDns" qui vous propose une adresse en lettres correspondant à votre adresse ip mais à laquelle vous ne pouvez pas rattacher facilement un nom de domaine. Certains gestionnaires de nom de domaine, comme infomaniak, proposent tout de même d'enregistrer un nom de domaine pour le dyndns qui est acessible assez facilement sans surcout chez les principaux opérateurs.
</p><p>Si vous avez un accès en 4G, il n'est pas possible d'avoir une adresse ip fixe et votre adresse ip publique correspondra à un "pool". C'est à dire que l'opérateur alloue une adresse ip publique pour plusieurs clients, ne vous permettant pas d'utiliser la technique du NAT/Port Forwarding pour rendre votre dietpi accessible sur internet.
</p><p>Il faudra alors prendre un nom de domaine pour votre serveur vpn qui redirige les requetes vers votre dietpi.
</p><p>Voir image jointe pour l'enregistrement d'un nom de domaine: c'est la ligne nom "@" type A qu'il faut renseigner avec l'adresse ip publique de votre box ou de votre serveur vpn.
</p><p><br/>
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel9"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/5/5e/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi3.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi3.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome gandi3.png" data-file-height="747" data-file-width="1890" height="316" src="https://wiki.lowtechlab.org/images/thumb/5/5e/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi3.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_gandi3.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<p><br/>
</p><p><br/>
</p><p><br/>
</p>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-oneimage">
<h2><span class="mw-headline" id="Étape_11_-_Configuration_https_sur_serveur_gandi_vpn">Étape 11 - Configuration https sur serveur gandi vpn</span></h2>
<p>Si vous avez un serveur proxy
</p><p>Sur votre serveur gandi, effectuer les opérations suivantes:
</p><p>Creer un fichier /etc/nginx/conf.d/dietpi.conf et copier les lignes suivante:
</p>
<blockquote><p>server {
</p><p>listen 80;
</p><p>server_name localhost;
</p><p>server_tokens off;
</p><p>add_header Permissions-Policy "accelerometer=(),autoplay=(),camera=(),display-capture=(),document-domain=(),encrypted-media=(),fullscreen=(),geolocation=(),gyroscope=(),magnetometer=(),microphone=(),midi=(),payment=(),picture-in-picture=(),publickey-credentials-get=(),screen-wake-lock=(),sync-xhr=(self),usb=(),web-share=(),xr-spatial-tracking=()";
</p><p>add_header Strict-Transport-Security "max-age=31536000 ; includeSubDomains";
</p><p>add_header X-Frame-Options "SAMEORIGIN";
</p><p>add_header X-Content-Type-Options nosniff;
</p><p>add_header Content-Security-Policy "script-src 'self';";
</p><p>add_header X-Permitted-Cross-Domain-Policies none;
</p><p>add_header Referrer-Policy no-referrer;
</p><p>#add_header Clear-Site-Data "cache,cookies,storage";
</p><p>return 301 https://$host$request_uri;
</p><p>location / {
</p><p>return 301 https://$host$request_uri;
</p><p>}
</p><p>
}</p></blockquote>
<p>lancer ensuite les commandes suivantes:
</p>
<blockquote><p>sudo apt install letsencrypt
</p><p><br/><br/>
wget https://raw.githubusercontent.com/certbot/certbot/master/certbot-nginx/certbot_nginx/_internal/tls_configs/options-ssl-nginx.conf
<br/><br/>
sudo cp options-ssl-nginx.conf /etc/letsencrypt/options-ssl-nginx.conf
<br/><br/>
wget https://raw.githubusercontent.com/certbot/certbot/master/certbot/certbot/ssl-dhparams.pem
<br/><br/>
sudo cp ssl-dhparams.pem /etc/letsencrypt/ssl-dhparams.pem
<br/><br/>
sudo rm /etc/nginx/sites-enabled/default
<br/><br/>
sudo apt remove certbot
<br/><br/>
</p><p>
sudo apt install python3-certbot-nginx</p></blockquote>
<p>obtenir les certificats (rempalcer __domain__ par votre domaine):
</p>
<blockquote><p>sudo certbot certonly --nginx -d __domain__</p></blockquote>
<p>copier ensuite les lignes suivante dans votre fichier /etc/nginx/conf.d/dietpi.conf
</p><p>en remplacant __domain__ par votre domaine
</p>
<blockquote><p>server {
</p><p>listen 80;
</p><p>server_name localhost;
</p><p>server_tokens off;
</p><p>add_header Permissions-Policy "accelerometer=(),autoplay=(),camera=(),display-capture=(),document-domain=(),encrypted-media=(),fullscreen=(),geolocation=(),gyroscope=(),magnetometer=(),microphone=(),midi=(),payment=(),picture-in-picture=(),publickey-credentials-get=(),screen-wake-lock=(),sync-xhr=(self),usb=(),web-share=(),xr-spatial-tracking=()";
</p><p>add_header Strict-Transport-Security "max-age=31536000 ; includeSubDomains";
</p><p>add_header X-Frame-Options "SAMEORIGIN";
</p><p>add_header X-Content-Type-Options nosniff;
</p><p>add_header Content-Security-Policy "script-src 'self';";
</p><p>add_header X-Permitted-Cross-Domain-Policies none;
</p><p>add_header Referrer-Policy no-referrer;
</p><p>#add_header Clear-Site-Data "cache,cookies,storage";
</p><p>return 301 https://$host$request_uri;
</p><p>location / {
</p><p>return 301 https://$host$request_uri;
</p><p>}
</p><p>}
</p><p>server {
</p><p>listen 443 ssl http2;
</p><p>server_name localhost;
</p><p>server_tokens off;
</p><p>ssl_certificate /etc/letsencrypt/live/__domain__/fullchain.pem;
</p><p>ssl_certificate_key /etc/letsencrypt/live/__domain__/privkey.pem;
</p><p>include /etc/letsencrypt/options-ssl-nginx.conf;
</p><p>ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
</p><p>add_header Permissions-Policy "accelerometer=(),autoplay=(),camera=(),display-capture=(),document-domain=(),encrypted-media=(),fullscreen=(),geolocation=(),gyroscope=(),magnetometer=(),microphone=(),midi=(),payment=(),picture-in-picture=(),publickey-credentials-get=(),screen-wake-lock=(),sync-xhr=(self),usb=(),web-share=(),xr-spatial-tracking=()";
</p><p>add_header Strict-Transport-Security "max-age=31536000 ; includeSubDomains";
</p><p>add_header X-Frame-Options "SAMEORIGIN";
</p><p>add_header X-Content-Type-Options nosniff;
</p><p>add_header Content-Security-Policy "script-src 'self';";
</p><p>add_header X-Permitted-Cross-Domain-Policies none;
</p><p>add_header Referrer-Policy no-referrer;
</p><p>#add_header Clear-Site-Data "cache,cookies,storage";
</p><p>location / {
</p><p>proxy_pass http://10.10.10.2;
</p><p>proxy_set_header Host $host;
</p><p>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</p><p>proxy_set_header X-Real-IP $remote_addr;
</p><p>proxy_set_header X-Forwarded-Proto $scheme;
</p><p>client_max_body_size 20M;
</p><p>limit_except GET HEAD POST {deny all;}
</p><p>}
</p><p>
}</p></blockquote>
<p>redémarrer nginx
</p>
<blockquote><p>sudo systemctl restart nginx</p></blockquote>
<p>Une fois ces étapes réalisées, votre serveur est accessible en ligne en https en tapant dans votre navigateur
<a class="external free" href="https://votre_domaine/nextcloud/" rel="nofollow">https://votre_domaine/nextcloud/</a>
</p><p>Vous pouvez alors configurer nextcloud en ligne par le compte administrateur
login par défaut sur dietpi: admin
mot de passe par défaut sur dietpi: mot de passe entrée à l'installation de dietpi 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel10"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/a/ab/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_Capture_d_cran_du_2023-08-21_18-47-32.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_Capture_d_cran_du_2023-08-21_18-47-32.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome Capture d cran du 2023-08-21 18-47-32.png" data-file-height="1048" data-file-width="1920" height="437" src="https://wiki.lowtechlab.org/images/thumb/a/ab/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_Capture_d_cran_du_2023-08-21_18-47-32.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_Capture_d_cran_du_2023-08-21_18-47-32.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<p><br/>
</p><p><br/>
</p><p><br/>
</p>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-md-12 step-instructions">
<h2><span class="mw-headline" id="Étape_12_-_Configuration_https_sur_dietpi_si_vous_etes_branché_en_box">Étape 12 - Configuration https sur dietpi si vous etes branché en box</span></h2>
<p>Je n'ai pas de box, je vous updaterai quand ce sera le cas et prooftesté! :)
</p>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_13_-_Rendre_votre_serveur_nomade_et_autonome_énergétiquement_en_photovoltaique">Étape 13 - Rendre votre serveur nomade et autonome énergétiquement en photovoltaique</span></h2>
<p>Que ce soit pour des raisons écologiques, ou pour d'autres raisons, il est intéressant d'avoir un serveur autonome énergétiquement,
</p><p>qui ne dépendra pas des aléas du réseau électrique.
</p><p>NB: pour une version légèrement modifié du dimensionnement photovoltaïque (production moyenne/par intervalle calée sur modèle jrc en décembre au lieu du nombre d'heure d'ensoleillement minimum), voir mon autre tuto ici:
</p><p><a href="/wiki/Dimensionner_une_installation_photovolta%C3%AFque_autonome" title="Dimensionner une installation photovoltaïque autonome">Dimensionner une installation photovoltaïque autonome</a>
</p><p>videos:
</p><p>bases debutant(panneaux, regulateur, onduleur, conso/prod): <a class="external free" href="https://www.youtube.com/watch?v=8Ft4XQj9lQ4" rel="nofollow">https://www.youtube.com/watch?v=8Ft4XQj9lQ4</a>
</p><p>montage simple kit myshop solaires pour 230V: <a class="external free" href="https://www.youtube.com/watch?v=SvmPEhPq_S8" rel="nofollow">https://www.youtube.com/watch?v=SvmPEhPq_S8</a>
</p><p>kit prêts à acheter (si vous avez des subventions et des collègues qui coopèrent bien):
</p><p><a class="external free" href="https://allo.solar/kit-solaire-1650w-230v-autoconsommation-aps.html?gclid=EAIaIQobChMIkY_fxvu-gAMVyLfVCh014gadEAYYASABEgJd8_D_BwE" rel="nofollow">https://allo.solar/kit-solaire-1650w-230v-autoconsommation-aps.html?gclid=EAIaIQobChMIkY_fxvu-gAMVyLfVCh014gadEAYYASABEgJd8_D_BwE</a>
</p><p>solution de stockage intermédiaire intégrée (cher et pas tres lowtech):
</p><p>Station énergie portable extensible 230V BLUETTI AC200MAX
</p><p>EcoFlow River 2 pro
</p><p>kits semi lowtech (celui utilisé dans ce guide):
</p><p>panneaux photovoltaïque 120W et batterie de voiture plomb acide.
</p><p>kit vraiment lowtech:
</p><p>fabriquer sa batterie lithium à partir de déchets: voir barnabé chaillot
</p><p><a class="external free" href="https://www.youtube.com/watch?v=_hwj7Ds50lU" rel="nofollow">https://www.youtube.com/watch?v=_hwj7Ds50lU</a>
</p><p>rappel de base: branchement en série (+ sur - et + sur -) on ajoute le voltage et on garde le meme amperage, branchement en paralelle (+ sur +, - sur -) on ajoute l'amperage et on garde le meme voltage
</p><p>idem pour les batteries: à mettre en paralelle pour garder la meme tension (voltage)
</p><p>La première problématique du photovoltaïque lowtech autonome est le dimensionnement de l'installation (Se reporter à mon autre tuto
</p><p><a href="/wiki/Dimensionner_une_installation_photovolta%C3%AFque_autonome" title="Dimensionner une installation photovoltaïque autonome">Dimensionner une installation photovoltaïque autonome</a>)
</p><p>Pour cela on trouve pas mal d'informations sur internet.
</p><p>Vous pouvez utiliser la feuille libreoffice en piece jointe en haut de ce tutoriel pour du dimensionnement "bricolé".
</p><p>Le dimensionnement - le besoin journalier:
</p><p>Le orange pi consomme environ 20W
</p><p>Un disque usb supplémentaire consomme environ 5W
</p><p>Un modem 4G consomme environ 5W
</p><p>Soit un besoin constant de 35W en prenant 16% de marge d'erreur.
</p><p>Le besoin journalier pour un serveur qui tourne 24h/24: 35W*24h=840Wh
</p><p>Le besoin journalier pour un serveur qui tourne en journéee seulement:
</p><p>en été: 35W*14h=490Wh
</p><p>en hiver: 35W*8h=280Wh
</p><p>Notez qu'il s'agit là d'un besoin moyen et si vous souhaitez dimensionner
</p><p>pour des usages divers, il est recommander de procéder de façon plus précise
</p><p>en calculant les besoins temps réels.
</p><p>Le dimensionnement du stockage par le temps d'autonomie :
</p><p>Estimer les pertes à 20% et augmenter le besoin en consquénce:
</p><p>besoin 24h/24=840/0,80=1050Wh
</p><p>Estimer le temps d'autonomie voulue:
</p><p>exemple 24h
</p><p>On va alors dimensionner le stockage pour tenir 24h.
</p><p>Pour des batteries en 12V: 1050Wh/12V=87,5Ah
</p><p>Etant donné qu'on veut limiter la décharge des batteries à 50%, on prendra donc
</p><p>87,5Ah/0,5=175Ah
</p><p>Soit 2100 Wh en 12V
</p><p>Selon les caractéristiques des panneaux (voir feuille de calcul), on peut estimer la recharge de la batterie lorsque l'ensoleillement est minimal (en décembre).
</p><p>Le dimensionnement par la méthode du nombre de jours voulues pour recharger entierement les batteries:
</p><p>Si on veut pouvoir recharger les batteries en un jour en hiver, il faut considérer la puissance produite par vos panneaux au jour d'hiver avec le moins d'ensoleillement.
</p><p>Si on prend 3,5h pour le minimum, le nombre de panneaux nécessaire de puissance x Watt sera:
</p><p>C_batterie:Capacité batterie en Wh
</p><p>Dans notre exemple 2100Wh
</p><p>T_hiver:temps de recharge journalier minimal en hiver (en h)
</p><p>Dans notre exemple 3,5h
</p><p>B_hiver:besoin journalier hors temps ensoleillement en hiver (en Wh)
</p><p>Dans notre exemple (24h-3,5h)*35W=897Wh
</p><p>n_voulus:nombre de jour voulus pour recharger entierement la batterie
</p><p>Dans notre exemple 1
</p><p>I:amperage sortie d'un panneau photovoltaique
</p><p>Dans notre exemple 7A
</p><p>U:tension sortie d'un panneau photovoltaique
</p><p>Dans notre exemple 12V
</p><p>Nb_panneaux=C_batterie+B_hiver*n_nvoulus/T_hiver*I*U*n_voulus
</p><p>Dans l'exemple:
</p><p>Nb_panneaux=(2100+897*1)/(3,5*12*7*1)
</p><p>Il faudra donc 10 panneaux de 84W de 7A 12V
</p><p>Noter que la valeur cardinale ici est à la ligne 42 du fichier joint, il s'agit
</p><p>de l'ensoleillement journalier minimal en décembre à production nominale. Des valeurs de référence peuvent être trouvées sur
</p><p>https://re.jrc.ec.europa.eu/api/v5_2/seriescalc?lat=44.203142&amp;lon=0.616363&amp;loss=14&amp;angle=45&amp;aspect=0&amp;startyear=2005&amp;endyear=2005&amp;pvcalculation=1&amp;peakpower=1&amp;pvtechchoice=crystSi&amp;browser=0&amp;outputformat=csv
</p><p>Mais rien ne vaut une mesure empirique pour vérifier tout ca.
</p><p>Le graphique en illustration provient du monitoring de deux installations à 400km de distance d'une entreprise qui installe et suit du photovoltaïque depuis 2018. J'attend de mesurer tout ça avec un voltmetre fiable sur plusieurs panneaux achetés d'occasions pour updater ce tuto en décembre! :)
</p><p>Tout commentaire et "retour d'experience" est bienvenu à ce sujet en bas de cette page!
</p><p>Le dimensionnement par la méthode essais et erreurs
</p><p>La feuille de calcul propose aux lignes 41 et 42 d'ajuster le nombre de panneaux et le temps d'ensoleillement moyen en décembre et donne le besoin journalier hors temps ensoleillement hiver en Wh et la recharge batterie journaliere maximale en hiver (en Ah et Wh). En faisant des essais sur les deux paramètres, on peut obtenir le nombre de panneaux minimum pour que la(les) batterie(s) se recharge(nt) positivement en hiver.
</p><p>La problématique principale du photovoltaïque lowtech autonome est le stockage de l'énergie.
</p><p>Vous pouvez lire les caractéristiques des panneaux qu'on vous a donné ou trouvés sur leboncoin à pas cher:
</p><p>-puissance crete: elles s'aditionnent pour obtenir la puissance nécessaire trouvée lors de la phase de dimensionnement.
</p><p>-tension : 12V,24V ou 48V. voir regles série/paralelle pour leur additions
</p><p>-intensité: variable selon les modèles mais souvent inferieure à 10A. voir regles série/paralelle pour leur additions
</p><p>Pour recharger des batteries, en principe, si vous connectez votre panneaux en direct sur une batterie, il suffit que la tension à la sortie de vos panneaux soit la même que celles de vos batterie, et ca devrait charger.
</p><p>Il y a un composants importants à retenir pour charger correctement vos batteries:
</p><p>le regulateur ou controleur de charge
</p><p>il en existe de trois sortes: les tor (tout ou rien) les mppt (Maximum power point tracking) et les pwm (Pulse Width Modulation)
</p><p>Ils sont composés d'un adaptateur DC/DC (courant continu vers courant continu) et d'un coupe circuit. Le mppt comprend également un adaptateur d'impédence (il a une résistance pour adapter l'amperage injecté dans la batterie). Les mppt accepte des puissances nominales plus élevées, cad des tensions et intensité plus élevées.
</p><p>Le régulateur ou controleur de charge permet principalement de couper le circuit quand la batterie est rechargée en surveillant la tension et l'intensité de charge. Il coupe le circuit si leurs valeurs dépassent les intervalles de référence (pour cela le regulateur arrete la charge temporairement et mesure la tension aux bornes des batteries).
</p><p>Le mppt a un "algorithme" électronique intégré qui va chercher le point de puissance optimal grace a son adaptateur d'impedance.
</p><p>Si vous connectez plusieurs panneaux et plusieurs batteries, il est recommandé d'avoir un regulateur pour couper la charge correctement lorsque la batterie est chargée.
</p><p>Les tensions de charge de référence sont 12V,24V et 48V.
</p><p>Cependant, les prix des modèles augmentent avec la puissance nominales (qui va dépendre de l'amperage) qu'ils acceptent.
</p><p>Pour limiter l'intensité du courant de la production photovoltaïque, il est plus judicieux d'utiliser des panneaux de plus forte puissance qui sont généralement à des tensions plus élevées
</p><p>(rappel P=U*I,
</p><p>rappel E=P*t se conserve dans un systeme fermé).
</p><p>note: si le systeme de stockage par batterie ou l'appareil connecté à vos panneaux n'absorbe pas toute la puissance produite, et si le régulateur de charge ne coupe pas le circuit, le reste sera dégagé en chaleur.
</p><p>L'amperage va aussi dependre de la capacité de stockage de vos batteries, dimensionnées pour couvrir vos besoins pendant une periode définie au dimensionnement.
</p><p>Le courant de charge est calculé en divisant par 4 ou 5 la capacité nominale de la batterie exprimée en Ah qui devrait alors se recharger en 4 ou 5h. Cependant une batterie se rechargera aussi avec un courant de charge de la capacité nominale de la batterie divisée par 20 mais plus lentement (en 20h).
</p><p>Dimensionnez et/ou agencez vos panneaux en conséquence.
</p><p>Des montages de panneaux serie+paralelle peuvent permettrent d'ajuster tension et amperage.
</p><p>Il y a enfin un dernier point sur lequel être attentif: le déclenchement de la recharge de la batterie par le regulateur/controleur de charge (qui déclenche quand la tension de la batterie diminue en dessous d'un certain seuil).
</p><p>En effet, si la puissance soutirée à la batterie est trop faible, il est possible que le temps nécessaire à la décharger avec votre consommation journalière pour déclencher la recharge dans le régulateur dépasse le temps d'ensoleillement journalier. La batterie ne se recharge alors pas du tout pendant la journée.
</p><p>Dans ce cas, votre batterie ne se rechargera qu'un jour sur deux ou sur trois (selon le seuil de déclenchement de la recharge du regulateur).
</p><p>C'est un paramètre à prendre en compte dans le dimensionnement (non inclus dans la feuille de calcul).
</p><p>Le régulateur a 3 phases:
</p><p>1.bulk: le regulateur laisse passer le courant
</p><p>2.floating: le regulateur alterne interupteur fermée et ouvert à une fréquence donnée pour maintenir la batterie chargée
</p><p>En outre il faut prendre des précautions car la charge des batteries présente certains risques.
</p><p>3.absorption (pour les mppt): la tension de charge augmente un peu pour créer une difference de potentiel suffisante pour continuer à charger la batterie presque pleine.
</p><p>En théorie le courant de charge diminue lorsque la batterie est presque rechargée (courant de queue etc.)
</p><p>La charge de batteries en paralelle ou en série sur des batteries usagées qui n'ont pas les mêmes tensions ou intensité présente en théorie des risques. En effet vous lirez un peu partout que la résistance des fils pour relier ces batteries
</p><p>créee des différences de potentiels entre les batteries qui produisent des décharges d'une batterie envers une autre etc.
</p><p>créant des risques d'explosion, de degazage pour les batteries plomb etc.
</p><p>Il faut bien se rapeller que les batteries sont des assemblages de composants unitaires de faible tension mis en séries et en paralelle pour obtenir un générateur de l'intensité et la tension voulue et qu'à priori faire de même avec des batterie entiere ne présente pas vraiment de risques..
</p><p>On parle souvent de "battery management system" (bms) "intégré" pour les batteries lithium ion.
</p><p>En réalité le régulateur de charge est déjà un "bms". En théorie, le bms intégré s'assure que les tensions et les intensités de chaque unité composant la batterie est la même et la rééquilibre au besoin.
</p><p>On peut bien sûr s'interroger si tout ceci n'est pas une façon de rendre le stockage de l'énergie plus cher avec des composants BMS artificiellement chers et si ce n'est pas une façon d'éviter de réutiliser des unités de batteries usagées.
</p><p>Il est par exemple étonnant qu'il n'existe pas de BMS pour rééquilibrer automatiquement des batteries plomb acide, ce qui rendrait utilisable toutes les batteries mises au rebut de l'industrie automobile pour stocker l'énergie photovoltaïque sans risque!
</p><p>Dans tous les cas, si vous réutilisez des batteries au plomb, utilisez un régulateur pour éviter de continuer à charger vos batteries rechargées (risques de production d'hydrogene) -ou si vous n'en utilisez pas dimensionnez avec beaucoup de soin-, évitez les décharges profondes, et maintenez les batteries à une temperature constante autant que possible. 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel11"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/3/39/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_2.6kWc.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_2.6kWc.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 2.6kWc.png" data-file-height="452" data-file-width="1441" height="251" src="https://wiki.lowtechlab.org/images/thumb/3/39/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_2.6kWc.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_2.6kWc.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/c/c9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_9kWc.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_9kWc.png" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome 9kWc.png" data-file-height="446" data-file-width="1458" height="245" src="https://wiki.lowtechlab.org/images/thumb/c/c9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_9kWc.png/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_9kWc.png" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel11"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel11"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<p><br/>
</p><p><br/>
</p>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span class="mw-headline" id="Étape_14_-_Montage_et_test">Étape 14 - Montage et test</span></h2>
<p>On dimensionne sur un dixieme de la puissance de panneaux et un quart de la capacité de batterie de ce que la théorie nous a indiqué pour être autonome 24h/24h et en capacité de recharger en un seul jour en hiver, soit un panneau de 120W et une vieille batterie de voiture de 45Ah en 12V.
</p><p>C'est raccord avec une approche lowtech de ne faire tourner le serveur que lorsqu'il fait jour, pour une informatique qui respecte la temporalité humaine.
</p><p>Pour être bien en hiver (à hypothèse 3,5h d'ensoleillement moyen), il faudrait une batterie de plus de 58Ah, mais pour raisons budgétaire, on fait pour l'instant avec ce qu'on a! :).
</p><p>Le regulateur utilisé n'accepte pas les panneaux 40V donc on n'a pas utilisé le panneau photovoltaïque d'occasion de 180W à 20€ trouvé sur leboncoin, mais je ne manquerai pas d'updater ce tuto avec des raccordement de panneaux et de batteries dès que j'aurai le materiel et avec les valeurs de production hivernale si j'y arrive!
</p><p><b><u>Etapes de montage:</u></b>
</p><p><br/>
</p>
<ol><li>Raccorder un cable electrique de la borne + de la batterie à la borne + du regulateur pwm (sortie batterie). Raccorder un cable electrique de la borne - de la batterie à la borne - du regulateur pwm (sortie batterie)</li>
<li>Raccorder les panneaux aux cables mc4. Brancher le côté dénudé du cable + au + du régulateur pwm (entree panneaux). Brancher le côté dénudé du cable - au - du régulateur pwm (entree panneaux).</li>
<li>Brancher les pinces du convertisseur 12V batterie/5V USB avec le + sur le + et le - sur le -</li>
<li>Brancher le cable rj45 de votre box ou modem 4g au orange pi ou raspberry pi</li>
<li>Brancher le cable usb du orange pi ou raspberry pi au convertisseur 12V batterie/5V USB</li>
<li>Pour automatiser le fonctionnement quand il fait jour et éteindre quand il fait nuit, on utiliser un module DRL (Daytime Running Light) de voiture. Le module est un interupteur qui laisse passer le courant quand la tension est supérieure à 13V (quand le panneau solaire charge la batterie).  L'interrupteur est à brancher borne + du IN sur le + de la batterie, borne - du IN sur le - de la batterie, borne + du out sur la pince rouge et borne - du out sur la pince rouge (entre la batterie et le convertisseur 12V batterie/5V USB).</li></ol>
<p>Attendre quelques minutes que ca boot. Et voilà , votre serveur nextcloud est accessible en ligne ! :)
</p><p>Notez que si vous voulez alimenter quelque chose en courant alternatif 220V, la seule chose qu'il manque au montage est un convertisseur DC/AC (courant continu alternatif) qu'on trouve facilement en magasin de camping car ou sur leboncoin. 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel12"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/44/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171458_820.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171458_820.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 171458 820.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/4/44/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171458_820.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171458_820.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/e/e9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 171328 268.jpg" data-file-height="3024" data-file-width="4032" height="600" src="https://wiki.lowtechlab.org/images/thumb/e/e9/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_171328_268.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/a/a3/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_173010_697.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_173010_697.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 173010 697.jpg" data-file-height="3024" data-file-width="4032" height="600" src="https://wiki.lowtechlab.org/images/thumb/a/a3/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_173010_697.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_173010_697.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/8/86/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_172639_858.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_172639_858.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome IMG 20230821 172639 858.jpg" data-file-height="4032" data-file-width="3024" height="1067" src="https://wiki.lowtechlab.org/images/thumb/8/86/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_172639_858.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_IMG_20230821_172639_858.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/1/12/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_montage_avec_DRL.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_montage_avec_DRL.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome montage avec DRL.jpg" data-file-height="3024" data-file-width="4032" height="600" src="https://wiki.lowtechlab.org/images/thumb/1/12/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_montage_avec_DRL.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_montage_avec_DRL.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel12"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-md-12 step-instructions">
<h2><span class="mw-headline" id="Étape_15_-_Securisation_du_serveur">Étape 15 - Securisation du serveur</span></h2>
<p>Au niveau sécurité, les failles connues des cpus peuvent être trouvées sous linux en faisant:
</p>
<blockquote><p>grep -r . /sys/devices/system/cpu/vulnerabilities</p></blockquote>
<p>Cette commande sur le orange pi (cpu CortexA55) avec dietpi installé donne:
</p>
<blockquote>
<p>/sys/devices/system/cpu/vulnerabilities/spectre_v2:Mitigation: Unprivileged eBPF enabled
</p><p>/sys/devices/system/cpu/vulnerabilities/itlb_multihit:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/mmio_stale_data:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/mds:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/l1tf:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/spec_store_bypass:Mitigation: Speculative Store Bypass disabled via prctl
</p><p>/sys/devices/system/cpu/vulnerabilities/tsx_async_abort:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/spectre_v1:Mitigation: __user pointer sanitization
</p><p>/sys/devices/system/cpu/vulnerabilities/retbleed:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/srbds:Not affected
</p><p>/sys/devices/system/cpu/vulnerabilities/meltdown:Not affected
</p>
</blockquote>
<p>Ayant testé un orange pi un raspberry pi et un odroid, le probleme reste le même.
<br/><br/>
<u>basiques:</u>
</p><p>on peut passer sa vie à augmenter la sécurité d'un systeme informatique...
</p><p>trouver le bon compromis et évaluer les risques ou appats en termes financiers.
</p><p>Le hack est toujours possible, et vu le nombre de failles 0day non encore publié, quel que soit le systeme d'exploitation, la question est moins d'avoir un système infaillible, que de savoir de qui on cherche à se protéger quand on cherche à "sécuriser" ou réduire sa surface d'attaque.
</p><p>Je pense que la philosophie libre reste supérieure en termes de sécurité car auditable et réparable plus vite par la "commu", mais il faut bien avouer que les reglages par défaut ne sont pas tip top car linux a été pensé pour être stable au départ (rappelez vous des écrans bleux windows il y a 30 ans), et pas "sécurisé".
</p><p>Ayant subi des hacks que je considère très avancés et pas à la portée du premier venu(et ce quel que soit le système d'exploitation, quelle que soit la machine, et quel que soit le niveau de sécurisation -hors compilation de kernel-), j'ai cherché à sécuriser mes dispositifs numériques et j'en arrive aujourd'hui à penser que la "souveraineté" numérique n'existe pas ou plus, les failles créent un marché de la sécurité, ca fait travailler des gens... 
Voir l'article intéressant de w0nderfall au sujet de la sécurité sous linux: <a class="external free" href="https://wonderfall.space/linux-securite/" rel="nofollow">https://wonderfall.space/linux-securite/</a>
</p><p>Cependant quelques éléments car c'est un sujet sur lequel on trouve peu d'informations didactiques rassemblées.
<br/>
</p><p>-<b><u>principe de limiter surface d'attaque</u></b>
: principe général, la sécurisation ne fait que diminuer la surface d'attaque potentielle
</p><p><br/>-<b><u>acces physique sécurisé et config logicielle liée:</u></b>
<br/>
</p><p>- <u>acces physique</u>: à vous de voir
</p><p>-<u>mot de passe grub</u>
<br/><br/>
Lancer  dans un terminal:
<br/>
</p>
<blockquote><p>grub-mkpasswd-pbkdf2</p></blockquote>
<p>Copier le texte qui commence par grub.pbkdf2.sha512.10000.xy
</p><p>où xy est une longue suite de lettres et de chiffres
</p><p>Ajouter les lignes suivantes à un fichier /etc/grub.d/42_pw
</p><p>en remplacant user par votre nom d'utilisateur linux et pw par le
</p><p>texte précemment copié
</p>
<blockquote>
<p>cat &lt;&lt; EOF
</p><p>set superusers=user
</p><p>password_pbkdf2 pw
</p><p>EOF
</p>
</blockquote>
<p>lancer ensuite la commande
</p>
<blockquote><p>update-grub</p></blockquote>
<p>-<u>bons mots de passes en general</u>
</p><p>pour changer le mot de passer de l'utilisateur courant taper
</p>
<blockquote><p>passwd</p></blockquote>
<p>pour changer le mot de passe de l'utilisateur root taper
</p>
<blockquote><p>sudo passwd root</p></blockquote>
<p>-éventuellement <u>vérification d'intégrité du boot</u> (voir ordinateurs de purism par exemple)
</p><p>-<u>chiffrer (crypter) ses supports de stockage</u>:
</p><p><a class="external free" href="https://doc.ubuntu-fr.org/tutoriel/chiffrer_ses_donnees" rel="nofollow">https://doc.ubuntu-fr.org/tutoriel/chiffrer_ses_donnees</a>
</p><p><a class="external free" href="https://www.dwarmstrong.org/remote-unlock-dropbear/" rel="nofollow">https://www.dwarmstrong.org/remote-unlock-dropbear/</a>
</p><p><u><b>sécurité d'un serveur</b>:</u>
</p><p>-<u>apt update automatisé</u> : <a class="external free" href="https://www.linuxtricks.fr/wiki/debian-activer-les-mises-a-jour-automatique-avec-unattended-upgrades" rel="nofollow">https://www.linuxtricks.fr/wiki/debian-activer-les-mises-a-jour-automatique-avec-unattended-upgrades</a>
</p><p>-<u>ssh renforcé</u> :
</p><p>lignes à inclure dans votre configuration ssh (/etc/ssh/sshd_config):
</p>
<blockquote>
<p>Port 22 #changer sur un autre port si vous le souhaitez
</p><p>Protocol 2
</p><p>PermitRootLogin no
</p><p>StrictModes yes
</p><p>PermitEmptyPasswords no
</p><p>X11Forwarding no
</p><p>Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
</p><p>MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-512,hmac-sha2-256,umac-128@openssh.com
</p><p>KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,ecdh-sha2-nistp521,ecdh-sha2-nistp384,ecdh-sha2-nistp256,diffie-hellman-group-exchange-sha256
</p><p>AllowTcpForwarding no
</p><p>MaxSessions 1
</p><p>UsePAM yes
</p><p>AllowUsers user #remplacer par les utilisateurs autorisées
</p><p>AllowGroups group #remplacer par les groupes autorisés
</p><p>PasswordAuthentication no
</p><p>AuthorizedKeysFile .ssh/authorized_keys
</p>
</blockquote>
<p>-<u>firewall logiciel</u>:
</p><p>ufw: <a class="external free" href="https://doc.ubuntu-fr.org/ufw" rel="nofollow">https://doc.ubuntu-fr.org/ufw</a>
</p><p>ou fichier de configuration iptables:
</p><p><a class="external free" href="https://gitlab.com/aurelpere/bp028-hardening/-/blob/main/rhel_iptables_ipv4/files/server_firewall.sh" rel="nofollow">https://gitlab.com/aurelpere/bp028-hardening/-/blob/main/rhel_iptables_ipv4/files/server_firewall.sh</a>
</p><p>-<u>backup</u>: 
regle du 321 : 3 copies, 2 supports de stockages differents, 1 copie sur un autre lieux que les autres.
borgbackup reste un standard pour sa fiabilité dans la communauté du libre (je confirme apres avoir testé plusieurs trucs) et offre un cloud pas cher pour stocker des sauvegardes "remote" qui finance le developpement de son logiciel libre.
</p><p>fail2ban: <a class="external free" href="https://doc.ubuntu-fr.org/fail2ban" rel="nofollow">https://doc.ubuntu-fr.org/fail2ban</a>
</p><p>fail2ban pour nextcloud: <a class="external free" href="https://tuxicoman.jesuislibre.net/2015/01/fail2ban-pour-owncloud-7-sur-debian-jessie.html" rel="nofollow">https://tuxicoman.jesuislibre.net/2015/01/fail2ban-pour-owncloud-7-sur-debian-jessie.html</a>
</p><p>-<u>desactiver ipv6</u> (ou configurer le firewall aussi pour ipv6)
</p><p>3 méthodes pour désactiver ipv6:
</p><p>1.dans grub
</p><p>2.avec sysctl
</p><p>ajouter les lignes suivantes à /etc/systcl.conf
</p>
<blockquote>
<p>net.ipv6.conf.all.disable_ipv6 = 1
</p><p>net.ipv6.conf.default.disable_ipv6 = 1
</p><p>net.ipv6.conf.all.router_solicitations = 0
</p><p>net.ipv6.conf.default.router_solicitations = 0
</p><p>net.ipv6.conf.all.accept_ra_rtr_pref = 0
</p><p>net.ipv6.conf.default.accept_ra_rtr_pref = 0
</p><p>net.ipv6.conf.all.accept_ra_pinfo = 0
</p><p>net.ipv6.conf.default.accept_ra_pinfo = 0
</p><p>net.ipv6.conf.all.accept_ra_defrtr = 0
</p><p>net.ipv6.conf.default.accept_ra_defrtr = 0
</p><p>net.ipv6.conf.all.autoconf = 0
</p><p>net.ipv6.conf.default.autoconf = 0
</p><p>net.ipv6.conf.all.accept_redirects = 0
</p><p>net.ipv6.conf.default.accept_redirects = 0
</p><p>net.ipv6.conf.all.accept_source_route = 0
</p><p>net.ipv6.conf.default.accept_source_route = 0
</p><p>net.ipv6.conf.all.max_addresses = 1
</p><p>net.ipv6.conf.default.max_addresses = 1
</p>
</blockquote>
<p>3.avec le network manager nmcli
</p><p><a class="external free" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking" rel="nofollow">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_networking/using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking</a>
</p><p>-<u>sécuriser le serveur en cas de multi utilisateur ou autres utilisateurs ayant obtenu un accès:</u>
</p><p>listes de fichiers à sécuriser (permissions etc.): <a class="external free" href="https://linuxfr.org/forums/linux-general/posts/liste-des-fichiers-linux-a-securiser-owner-group-permissions-setuid-setgid-sticky-bit" rel="nofollow">https://linuxfr.org/forums/linux-general/posts/liste-des-fichiers-linux-a-securiser-owner-group-permissions-setuid-setgid-sticky-bit</a>
</p><p>guides de durcissement anssi : <a class="external free" href="https://www.ssi.gouv.fr/guide/recommandations-de-securite-relatives-a-un-systeme-gnulinux/" rel="nofollow">https://www.ssi.gouv.fr/guide/recommandations-de-securite-relatives-a-un-systeme-gnulinux/</a>
</p><p><u><b>Pour aller plus loin en termes de sécurité</b>:</u>
</p><p><u>firewall physique</u> libre: pcengines/ logiciel libre OPNSense
</p><p><u>fail2ban avec listes géographiques</u>: <a class="external free" href="https://thecustomizewindows.com/2016/11/fail2ban-geoip-action-script-block-ssh-country/" rel="nofollow">https://thecustomizewindows.com/2016/11/fail2ban-geoip-action-script-block-ssh-country/</a>
</p><p>Créer un <u>sas de connection</u> à votre service en ligne (MySafeip): <a class="external free" href="https://linuxfr.org/news/mysafeip-un-tiers-de-confiance-pour-votre-pare-feu" rel="nofollow">https://linuxfr.org/news/mysafeip-un-tiers-de-confiance-pour-votre-pare-feu</a>
</p><p>sécuriser les services systemd linux: <a class="external free" href="https://github.com/juju4/ansible-harden-systemd" rel="nofollow">https://github.com/juju4/ansible-harden-systemd</a>
</p><p><u>compiler un kernel</u> :
</p><p><a class="external text" href="https://doc.ubuntu-fr.org/tutoriel/comment_compiler_un_kernel_de_kernel.orghttps://github.com/robertdebock/ansible-role-kernel" rel="nofollow">https://doc.ubuntu-fr.org/tutoriel/comment_compiler_un_kernel_de_kernel.org</a>
</p><p><a class="external text" href="https://doc.ubuntu-fr.org/tutoriel/comment_compiler_un_kernel_de_kernel.orghttps://github.com/robertdebock/ansible-role-kernel" rel="nofollow">https://github.com/robertdebock/ansible-role-kernel</a>
</p>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<div class="row">
<div class="col-xs-12 col-md-6 step-instructions col-md-push-6 step-instructions-manyimage">
<h2><span id="Étape_16_-_Activer_le_wifi_lors_de_l'installation_(par_exemple_avec_un_raspberry)"></span><span class="mw-headline" id="Étape_16_-_Activer_le_wifi_lors_de_l_installation_(par_exemple_avec_un_raspberry)">Étape 16 - Activer le wifi lors de l'installation (par exemple avec un raspberry)</span></h2>
<p>wpa2:
</p><p>Lorsque vous démarrez pour la premiere fois votre raspberry avec dietpi sur la clé usb ou la carte sd, le programme d'installation va vous afficher un menu suite à une erreur ("Checking ipv4 network connectivity") [...] ping: connect: Network is unreachabel")
</p><p>Aller alors dans "network-settings" puis suivez les menus indiqués dans les images jointes
</p><p>wpa3: voir etape 6 
</p>
</div>
<div class="col-xs-12 col-md-6 tuto-step-image noprint col-md-pull-6">
<div class="carousel" data-interval="false" data-ride="carousel" id="myCarousel13"><div class="carousel-inner"><div class="carousel-item item active"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/7/74/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi2.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi2.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifi2.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/7/74/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi2.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi2.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/4/4f/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi3.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi3.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifi3.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/4/4f/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi3.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifi3.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/e/e1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifiscan.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/e/e1/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/b/b4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan2.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan2.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifiscan2.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/b/b4/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan2.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan2.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/a/a6/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan3.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan3.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifiscan3.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/a/a6/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan3.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan3.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div><div class="carousel-item item"><div class="annotatedImageContainer"><a class="image" href="https://wiki.lowtechlab.org/images/thumb/f/fc/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan4.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan4.jpg" rel="noopener noreferrer" target="_blank"><img alt="Serveur orangepi-raspberry nextcloud en photovolta que autonome wifiscan4.jpg" data-file-height="3072" data-file-width="4096" height="600" src="https://wiki.lowtechlab.org/images/thumb/f/fc/Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan4.jpg/800px-Serveur_orangepi-raspberry_nextcloud_en_photovolta_que_autonome_wifiscan4.jpg" width="800"/></a><div class="annotatedcontent" data-annotatedcontent=""> </div></div></div></div><ol class="carousel-indicators"><li class="carousel-thumb active" data-slide-to="0" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="1" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="2" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="3" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="4" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li><li class="carousel-thumb" data-slide-to="5" data-target="#myCarousel13"><div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div></li></ol></div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
<div class="col-md-6 step-image-print print-only">
<div class="tuto-step-image">
<div class="annotatedImageContainer"><div class="annotatedcontent" data-annotatedcontent=""> </div></div>
</div>
</div>
</div>
<div class="hrContentMinor"></div>
<p><span class="propertyKey" style="display:none"></span>
</p>
<h2><span class="mw-headline" id="Notes_et_références">Notes et références</span></h2>
<p>Pas de remerciements, c'est galère et on m'a pas aidé ;)
</p><p>Le tuto et son contenu ne sont pas issus d'expertise ou de formation spécifique mais de bidouillages et d'informations glanées ça et là donc soyez indulgents ;)
</p><p>Tout retour d'experience est bienvenu dans les commentaires
</p>
<div class="noprint"><h2 class="cs-title"><span class="mw-headline" id="Commentaires">Commentaires</span></h2>
<div id="cs-comments"></div></div>
<p><span class="propertyKey" style="display:none">fr</span>
<span class="propertyKey" style="display:none">none</span>
<span class="propertyKey" style="display:none">0</span>
<span class="hide">Published</span>
</p>
<!-- 
NewPP limit report
Cached time: 20251117210436
Cache expiry: 0
Dynamic content: true
[SMW] In‐text annotation parser time: 0.171 seconds
CPU time usage: 0.443 seconds
Real time usage: 2.165 seconds
Preprocessor visited node count: 2758/1000000
Preprocessor generated node count: 6591/1000000
Post‐expand include size: 501475/2097152 bytes
Template argument size: 136393/2097152 bytes
Highest expansion depth: 10/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 9941/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  589.615      1 -total
 60.67%  357.714     16 Modèle:Tuto_Step
 50.60%  298.327     13 Modèle:Tuto_StepImage
 18.44%  108.743      1 Modèle:Tuto_Details
 14.15%   83.425      1 Modèle:Materials
  2.68%   15.787      1 Modèle:Notes
  2.55%   15.061      3 Modèle:Tuto_StepNoImage
  1.32%    7.793      1 Modèle:PageLang
  0.66%    3.898      1 Modèle:MaterialsNoImage
  0.53%    3.104      1 Modèle:Introduction
-->
</hr></div>
<div aria-labelledby="myModalError" class="modal fade" id="ModalError" role="dialog" tabindex="-1">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<span aria-hidden="true" aria-label="Close" class="close" data-dismiss="modal">×</span>
<h4 class="modal-title">Erreur de saisie dans le nom du tutoriel</h4>
</div>
<div class="modal-body">
<p>Vous avez entré un nom de page invalide, avec un ou plusieurs caractères suivants : </p>
<p class="checkPageTitle-modalInvalidsCharslist"> &lt; &gt; @ ~ : * € £ ` + = / \ | [  ] { } ; ? # </p>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
<div aria-labelledby="myModalLabel" class="modal fade" id="connectionRequiredModal" role="dialog" tabindex="-1">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<button aria-label="Close" class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span></button>
<h4 class="modal-title" id="myModalLabel">Connexion</h4>
</div>
<div class="modal-body">
				Pas encore enregistré ? Créez un compte pour profiter de toutes les fonctionnalités du service !
				</div>
<div class="modal-footer">
<a href="/w/index.php?title=Sp%C3%A9cial:Connexion&amp;returnto=Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome"><button class="btn btn-default" type="button">Se connecter</button></a>
<a href="/w/index.php?title=Sp%C3%A9cial:Connexion&amp;returnto=Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome&amp;type=signup"><button class="btn btn-primary" type="button">Créer un compte</button></a>
</div>
</div>
</div>
</div>
<div aria-labelledby="myModalEmbed" class="modal fade" id="ModalEmbed" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg" role="document">
<div class="modal-content">
<div class="modal-header">
<span aria-hidden="true" aria-label="Close" class="close" data-dismiss="modal">×</span>
<h4 class="modal-title">Intégrer ce tutoriel sur votre site</h4>
</div>
<div class="modal-body">
<form action="#" id="embed-form">
<div class="row">
<div class="form-group col-md-6">
<label for="embed-size">Taille du lecteur</label>
<select class="embed-size form-control" name="embed-size">
<option data-height="580" data-width="640" selected="" value="1">Large</option>
<option data-height="540" data-width="530" value="2">Medium</option>
<option data-height="480" data-width="320" value="3">Small</option>
</select>
</div>
<div class="form-group col-md-6">
<label for="embed-color">Couleur</label>
<input class="embed-color jscolor form-control" name="embed-color" type="text"/>
</div>
</div>
</form>
<hr/>
<div class="form-group">
<label for="embed-code">Copiez-collez le code ci-dessous à intégrer sur votre page</label>
<textarea class="embed-code form-control" cols="30" name="embed-code" rows="3">
                                </textarea>
</div>
<div class="embed-player-preview">
</div>
</div>
</div>
</div>
</div>
<div class="modal fade" id="sls-language-selection-modal" role="dialog">
<div class="modal-dialog">
<!-- Modal content-->
<div class="modal-content">
<div class="modal-header">
<button class="close" data-dismiss="modal" type="button">×</button>
<h4 class="modal-title">Sélectionnez une langue</h4>
</div>
<div class="modal-body">
<ul class="sls-language-list row">
<li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-fr" data-code="fr"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/fr.png" rel="noopener noreferrer" target="_blank"><img alt="fr/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/fr.png"/></a>
						Français</a></li><li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-en" data-code="en"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/en.png" rel="noopener noreferrer" target="_blank"><img alt="en/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/en.png"/></a>
						English</a></li><li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-de" data-code="de"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/de.png" rel="noopener noreferrer" target="_blank"><img alt="de/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/de.png"/></a>
						Deutsch</a></li><li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-es" data-code="es"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/es.png" rel="noopener noreferrer" target="_blank"><img alt="es/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/es.png"/></a>
						Español</a></li><li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-it" data-code="it"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/it.png" rel="noopener noreferrer" target="_blank"><img alt="it/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/it.png"/></a>
						Italiano</a></li><li class="col-md-6 col-xs-12 sls-changeLanguageLink sls-lang-link sls-lang-link-pt" data-code="pt"><a><a href="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/pt.png" rel="noopener noreferrer" target="_blank"><img alt="pt/" class="sls-flagimage" src="https://wiki.lowtechlab.org/w/extensions/SimpleLanguageSelector/resources/flags/pt.png"/></a>
						Português</a></li>
</ul>
</div>
<div class="modal-footer">
<button class="btn btn-default" data-dismiss="modal" type="button">Annuler</button>
</div>
</div>
</div>
</div></div><div class="printfooter">
Récupérée de « <a dir="ltr" href="https://wiki.lowtechlab.org/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome&amp;oldid=131960">https://wiki.lowtechlab.org/w/index.php?title=Serveur_orangepi-raspberry_nextcloud_en_photovoltaïque_autonome&amp;oldid=131960</a> »</div>
<!-- end body text -->
</div>
<!-- category links -->
<div class="catlinks" data-mw="interface" id="catlinks"><div class="mw-normal-catlinks" id="mw-normal-catlinks"><a href="/wiki/Sp%C3%A9cial:Cat%C3%A9gories" title="Spécial:Catégories">Catégorie</a> : <ul><li><a href="/wiki/Cat%C3%A9gorie:Tutorials" title="Catégorie:Tutorials">Tutorials</a></li></ul></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="footer-dokit-main footer-main">
<div class="container">
<div class="footer-dokit">
<div class="row">
<div class="col-md-4 col-sm-4 col-xs-12">
						© 2017 - 2025 Dokit, SAS.
					</div>
<div class="col-md-8 col-sm-8 col-xs-12">
<ul class="list-unstyled">
<li><a href="https://wiki.lowtechlab.org/wiki/Dokit:Terms">Conditions générales</a></li>
<li><a href="https://wiki.lowtechlab.org/wiki/Dokit:Privacy">Politique de confidentialité</a></li>
<li><a href="https://wiki.lowtechlab.org/wiki/Sp%C3%A9cial:DokitRecentChanges">Modifications récentes</a></li>
<li><a href="https://help.dokit.app" target="_blank">Aide</a></li>
<li><a href="https://dokit.io" target="_blank">À propos</a></li>
</ul>
</div>
</div>
</div>
<div class="footer-dokit-mobile">
<a href="https://wiki.lowtechlab.org/wiki/Formulaire:Tutorial"><span class="glyphicon glyphicon-pencil"></span></a>
</div>
</div>
</div><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"smw":{"limitreport-intext-parsertime":0.171},"limitreport":{"cputime":"0.443","walltime":"2.165","ppvisitednodes":{"value":2758,"limit":1000000},"ppgeneratednodes":{"value":6591,"limit":1000000},"postexpandincludesize":{"value":501475,"limit":2097152},"templateargumentsize":{"value":136393,"limit":2097152},"expansiondepth":{"value":10,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":9941,"limit":5000000},"timingprofile":["100.00%  589.615      1 -total"," 60.67%  357.714     16 Modèle:Tuto_Step"," 50.60%  298.327     13 Modèle:Tuto_StepImage"," 18.44%  108.743      1 Modèle:Tuto_Details"," 14.15%   83.425      1 Modèle:Materials","  2.68%   15.787      1 Modèle:Notes","  2.55%   15.061      3 Modèle:Tuto_StepNoImage","  1.32%    7.793      1 Modèle:PageLang","  0.66%    3.898      1 Modèle:MaterialsNoImage","  0.53%    3.104      1 Modèle:Introduction"]},"cachereport":{"timestamp":"20251117210436","ttl":0,"transientcontent":true}}});});</script><!-- Matomo -->
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u = (("https:" == document.location.protocol) ? "https" : "http") + "://"+"analytics.hopinnov.fr/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "24"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Image Tracker -->
<noscript><a href="https://analytics.hopinnov.fr/piwik.php" rel="noopener noreferrer" target="_blank"><img alt="" src="https://analytics.hopinnov.fr/piwik.php" style="border:0"/></a></noscript>
<!-- End Matomo --><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":3400});});</script></body>
</html>